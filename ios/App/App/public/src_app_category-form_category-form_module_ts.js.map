{"version":3,"file":"src_app_category-form_category-form_module_ts.js","mappings":"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","sources":["./src/app/category-form/category-form-routing.module.ts","./src/app/category-form/category-form.module.ts","./src/app/category-form/category-form.ts","./src/app/models/category.ts","./src/app/category-form/category-form.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CategoryForm } from './category-form';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CategoryForm\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CategoryFormRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule, IonIcon, IonItem } from '@ionic/angular';\n\nimport { CategoryFormRoutingModule } from './category-form-routing.module';\n\nimport { CategoryForm } from './category-form';\nimport { SharedModule } from '../shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CategoryFormRoutingModule,\n    SharedModule,\n  ],\n  declarations: [CategoryForm]\n})\nexport class CategoryFormModule {}\n","import { Component, HostListener, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { UUID } from 'angular2-uuid';\r\nimport { NgbdModalFocus } from '../modal/modal-focus';\r\nimport { Category } from '../models/category';\r\nimport { StorageService } from '../services/storage.service';\r\n\r\n@Component({\r\n  selector: 'app-category-form',\r\n  templateUrl: './category-form.html',\r\n  styleUrls: ['./category-form.scss'],\r\n})\r\nexport class CategoryForm implements OnInit,OnDestroy {\r\n\r\n  uuidValue: string;\r\n  images = '';\r\n  // chantierId: string;\r\n  catId: string;\r\n  ActualCat : string;\r\n  modif : string;\r\n  modifCat : Category;\r\n  cat : Category;\r\n  parentCat : Category;\r\n  // indexFind: number;\r\n  catList : Array<Category> = [];\r\n  formCat = new FormGroup({\r\n    categoryName: new FormControl('',Validators.required),\r\n    description: new FormControl(''),\r\n    categoryPar: new FormControl(''),\r\n  });\r\n  selectedCat : string;\r\n\r\n  public modal = new NgbdModalFocus(this.modalS);\r\n  constructor(private modalS :NgbModal,private storageService:StorageService, private router: Router, private route: ActivatedRoute)\r\n  {\r\n  }\r\n  @HostListener('unloaded')\r\n  ngOnDestroy() {\r\n    console.log('Cleared');\r\n}\r\n  async ngOnInit() {\r\n\r\n    this.catList =await this.storageService.get('Categories');\r\n    if(this.catList==null)\r\n      this.catList = new Array<Category>();\r\n\r\n    this.modif = this.route.snapshot.paramMap.get('modif');\r\n    this.modifCat = this.catList.find(a => a.categoryId === this.route.snapshot.paramMap.get('modifCat'));\r\n    // this.chantierId = this.route.snapshot.paramMap.get('chantierId');\r\n    this.ActualCat = this.route.snapshot.paramMap.get('actualCat');\r\n\r\n\r\n\r\n    if(this.modif === 'YES' && this.modifCat !== null)\r\n    {\r\n      console.log('modification',this.modif);\r\n      // if(this.indexFind>=0)\r\n      // {\r\n      let catParentId :string;\r\n        if(this.modifCat.categoryParent!=null)\r\n          catParentId = this.modifCat.categoryParent.categoryId;\r\n        else catParentId='';\r\n        this.catId= this.modifCat.categoryId;\r\n        this.formCat.setValue({\r\n          categoryName: this.modifCat.categoryName,\r\n          description:  this.modifCat.description,\r\n          categoryPar:  catParentId,\r\n        });\r\n        if(this.modifCat.categoryImage!=null)\r\n          this.images=this.modifCat?.categoryImage;\r\n      // }\r\n    }else {\r\n      this.modif= 'NO';\r\n      console.log('creation',this.modif);\r\n      this.catId= this.generateUUID();\r\n      if(this.ActualCat!=null)\r\n        this.formCat.get('categoryPar').setValue(this.ActualCat);\r\n    }\r\n  }\r\n\r\n  async CreateWorksite() {\r\n\r\n  }\r\n\r\n  get f(){\r\n    return this.formCat.controls;\r\n  }\r\n\r\n  onFileChange(event) {\r\n    if (event.target.files && event.target.files[0])\r\n    {\r\n      const filesAmount = event.target.files.length;\r\n      for (let i = 0; i < filesAmount; i++)\r\n      {\r\n        const reader = new FileReader();\r\n        reader.onload = (event:any) =>\r\n        {\r\n          console.log(event.target.result);\r\n          this.images=event.target.result;\r\n          this.formCat.patchValue({\r\n          fileSource: this.images\r\n          });\r\n        }\r\n        reader.readAsDataURL(event.target.files[i]);\r\n      }\r\n    }\r\n  }\r\n  async onSubmit()\r\n  {\r\n    let parent = true;\r\n    const invalid = [];\r\n    const controls = this.formCat.controls;\r\n    for (const name in controls) {\r\n      if (controls[name].invalid) {\r\n          let nom='';\r\n          if(name==='productName')\r\n            nom='Nom catégorie';\r\n          if(name === 'categoryPar')\r\n          {\r\n            console.log('Pas de categorie parent');\r\n            parent=false;\r\n          }\r\n          invalid.push(nom);\r\n      }\r\n    }\r\n    if (!this.formCat.valid)\r\n    {\r\n      let res : string =null;\r\n      await this.modal.open('field',invalid.toString())\r\n      .then(result => result.result\r\n        .then((data) => {\r\n          res='OK';\r\n        }, (reason) => {\r\n        res='DISMISS' }\r\n        ));\r\n        return;\r\n    }\r\n  if(parent === false)\r\n  {\r\n    this.parentCat = null;\r\n  }else\r\n  {\r\n    this.parentCat = this.catList.find(a => a.categoryId === this.formCat.get('categoryPar').value);\r\n  }\r\n  if(this.modif === 'YES')\r\n  {\r\n    // RETRAIT DE LA CATEGORIE PARENT si il y'en a\r\n    if (this.modifCat.categoryParent)\r\n    {\r\n      const subCats=this.modifCat.categoryParent.subCategories;\r\n      subCats.splice(subCats.findIndex(a => a.categoryId === this.modifCat.categoryId),1);\r\n      this.catList[this.catList.findIndex(a => a.categoryId === this.modifCat.categoryParent.categoryId)].subCategories=subCats;\r\n    }\r\n\r\n    this.cat = new Category(\r\n      this.catId,\r\n      this.formCat.get('categoryName').value,\r\n      this.formCat.get('description').value,\r\n      this.parentCat,\r\n      this.catList.find(a => a.categoryId === this.modifCat.categoryId).subCategories,\r\n      this.images,\r\n    );\r\n  }else\r\n  {\r\n      this.cat = new Category(\r\n      this.catId,\r\n      this.formCat.get('categoryName').value,\r\n      this.formCat.get('description').value,\r\n      this.parentCat,\r\n      null,\r\n      this.images,\r\n    );\r\n  }\r\n\r\n    if(parent === true)\r\n    {\r\n      // AJOUT DE LA CATEGORIE PARENT\r\n      if(this.parentCat!=null)\r\n      {\r\n        if(this.parentCat.subCategories==null)\r\n          this.parentCat.subCategories = new Array<Category>();\r\n        this.parentCat.subCategories.push(this.cat);\r\n        this.catList[this.catList.findIndex(a => a.categoryId === this.parentCat.categoryId)] = this.parentCat;\r\n\r\n      }\r\n\r\n    }\r\n    if(this.modif==='YES')\r\n    {\r\n      const indexFind = this.catList.findIndex(x => x.categoryId === this.cat.categoryId);\r\n      // this.catList.splice(indexFind,1);\r\n      this.catList[indexFind] = this.cat;\r\n      this.catList.forEach(element => {\r\n        if(element.categoryParent!=null)\r\n        {\r\n          if(element.categoryParent.categoryId === this.cat.categoryId)\r\n          {\r\n            element.categoryParent= this.cat;\r\n          }\r\n        }\r\n        if(element.subCategories!=null)\r\n        {\r\n          element.subCategories.forEach(element => {\r\n            if(element.categoryId === this.cat.categoryId)\r\n            {\r\n              element = this.cat;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }else this.catList.push(this.cat);\r\n\r\n    this.storageService.set('Categories',this.catList);\r\n\r\n    console.log('cat saved', this.catList);\r\n    this.router.navigate(['/articles',{actualCat: this.ActualCat}],{replaceUrl:true});\r\n  }\r\n  generateUUID()\r\n  {\r\n      this.uuidValue=UUID.UUID();\r\n      return this.uuidValue;\r\n  }\r\n  resetImages()\r\n  {\r\n    this.images='';\r\n  }\r\n  GoBack()\r\n  {\r\n    this.router.navigate(['articles',{actualCat: this.ActualCat}],{replaceUrl:true});\r\n  }\r\n\r\n  changePar(e) {\r\n    this.formCat.get('categoryPar').setValue(e.target.value, {\r\n      onlySelf: true\r\n    })\r\n  }\r\n}","export interface ICategory\r\n{\r\n    categoryId:string;\r\n    categoryName: string;\r\n    description: string;\r\n    categoryParent: Category;\r\n    subCategories: Array<Category>;\r\n    categoryImage: string;\r\n}\r\n\r\nexport class Category implements ICategory {\r\n    constructor(\r\n        public categoryId:string,\r\n        public categoryName:string,\r\n        public description:string,\r\n        public categoryParent:Category,\r\n        public subCategories: Array<Category>,\r\n        public categoryImage: string,\r\n    ) {\r\n    }\r\n\r\n  }","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-button (click)=\\\"GoBack()\\\">\\n      <ion-icon name=\\\"arrow-back\\\"></ion-icon>\\n      <ion-label>Retour</ion-label>\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n<div class=\\\"container\\\" style=\\\"overflow-y: auto;\\\">\\n  <form [formGroup]=\\\"formCat\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n\\n    <ion-item class=\\\"form-group\\\" required=\\\"required\\\">\\n      <ion-label position=\\\"floating\\\">Nom catégorie</ion-label>\\n      <ion-input type=\\\"text\\\" id=\\\"categoryName\\\" name=\\\"categoryName\\\" formControlName=\\\"categoryName\\\" placeholder=\\\"...\\\"\\n        required=\\\"required\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label>Sous-catégorie</ion-label>\\n      <ion-select interface=\\\"alert\\\" okText=\\\"Ok\\\" cancelText=\\\"Annuler\\\" formControlName=\\\"categoryPar\\\"\\n        (change)=\\\"changePar($event)\\\">\\n        <ion-select-option></ion-select-option>\\n        <ion-select-option *ngFor=\\\"let c of catList\\\" [value]=\\\"c.categoryId\\\"> {{c.categoryName}} </ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n\\n    <hr>\\n\\n    <label for=\\\"imgCat\\\">Photo de la catégorie</label>\\n    <input id=\\\"imgCat\\\" type=\\\"file\\\" class=\\\"form-control\\\" multiple=\\\"\\\" (change)=\\\"onFileChange($event)\\\">\\n    <!-- <button type=\\\"button\\\" class=\\\"btn btn-danger btn-lg\\\" (click)=\\\"resetImages()\\\">Réinitialiser</button>\\n\\n    <img *ngFor='let url of images' [src]=\\\"url\\\" height=\\\"150\\\" width=\\\"200px\\\" style=\\\"margin: 3px;\\\"> <br /> -->\\n    <!-- <div *ngFor=\\\"let img of images\\\"> -->\\n    <img class=\\\"original\\\" [src]=\\\"images\\\" height=\\\"150\\\" width=\\\"200px\\\" style=\\\"margin: 3px;\\\" />\\n    <button type=\\\"submit\\\" (click)=\\\"resetImages()\\\" class=\\\"btn btn-danger\\\">\\n      <i class=\\\"far fa-trash-alt\\\"></i>\\n    </button>\\n    <!-- </div> -->\\n\\n\\n    <hr>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Description</ion-label>\\n      <ion-textarea id=\\\"description\\\" name=\\\"description\\\" formControlName=\\\"description\\\" placeholder=\\\"...\\\"\\n        style=\\\"height:100px;\\\"></ion-textarea>\\n    </ion-item>\\n\\n    <input type=\\\"submit\\\" value=\\\"Créer catégorie\\\">\\n  </form>\\n</div>\";"],"names":[],"sourceRoot":"webpack:///"}