{"version":3,"file":"default-src_app_create-worksite_create-worksite_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AACJ;AAEnD,MAAM,MAAM,GAAW;IACnB;QACA,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4DAAc;KAC1B;CACF,CAAC;IAOW,2BAA2B,SAA3B,2BAA2B;CAAG;AAA9B,2BAA2B;IAJvC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,2BAA2B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChBC;AACM;AACI;AACN;AACU;AACwB;AACtB;IAa5C,oBAAoB,SAApB,oBAAoB;CAAI;AAAxB,oBAAoB;IAVhC,uDAAQ,CAAC;QACR,YAAY,EAAE,CAAC,4DAAc,CAAC;QAC9B,OAAO,EAAE;YACP,uDAAW;YACX,yDAAY;YACZ,+DAAY;YACZ,wFAA2B;YAC3B,mEAAqB;SACtB;KACF,CAAC;GACW,oBAAoB,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBjC;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;IAOaY,cAAc,SAAdA,cAAc;EAiBzBC,YAAoBC,MAApB,EAA6CC,cAA7C,EAAoFC,MAApF,EACUC,KADV,EACwCC,cADxC,EACuE;IADnD;IAAyB;IAAuC;IAC1E;IAA8B;IAbjC,oBAAiC,EAAjC;IACP,kBAA2B,EAA3B;IAGA,gBAAW,IAAIjB,4DAAJ,CAAqB;MAC9BkB,YAAY,EAAE,IAAIjB,8DAAJ,CAAuB,EAAvB,EAA0BC,+DAA1B,CADgB;MAE9BkB,MAAM,EAAE,IAAInB,8DAAJ,CAAuB,EAAvB,EAA2BC,+DAA3B,CAFsB;MAG9BmB,WAAW,EAAE,IAAIpB,8DAAJ,CAAuB,EAAvB,CAHiB;MAI9BqB,OAAO,EAAG,IAAIrB,8DAAJ,CAAuB,EAAvB;IAJoB,CAArB,CAAX;IAOO,aAAQ,IAAIQ,8DAAJ,CAAmB,KAAKI,MAAxB,CAAR;EAIN;;EACKU,eAAe;IAAA;;IAAA;MACnBC,OAAO,CAACC,GAAR,CAAY,gBAAZ;;MACA,KAAI,CAACX,cAAL,CAAoBY,IAApB;;MACA,KAAI,CAACC,UAAL,SAAwB,KAAI,CAACb,cAAL,CAAoBc,GAApB,CAAwB,UAAxB,CAAxB;IAHmB;EAKpB;;EACKC,QAAQ;IAAA;;IAAA;MACZ,MAAMC,OAAO,GAAG,IAAIC,IAAJ,EAAhB;MACA,MAAI,CAACC,IAAL,GAAYF,OAAO,CAACG,OAAR,KAAkB,GAAlB,IAAuBH,OAAO,CAACI,QAAR,KAAmB,CAA1C,IAA6C,GAA7C,GAAiDJ,OAAO,CAACK,WAAR,EAA7D;MAEA,MAAI,CAACC,MAAL,GAAc,MAAI,CAACpB,KAAL,CAAWqB,QAAX,CAAoBC,QAApB,CAA6BV,GAA7B,CAAiC,QAAjC,CAAd;MACAJ,OAAO,CAACC,GAAR,CAAY,MAAI,CAACW,MAAjB;;MACA,MAAI,CAACtB,cAAL,CAAoBY,IAApB;;MACA,MAAI,CAACC,UAAL,SAAwB,MAAI,CAACb,cAAL,CAAoBc,GAApB,CAAwB,UAAxB,CAAxB;MACAJ,OAAO,CAACC,GAAR,CAAY,MAAI,CAACE,UAAjB;;MACA,IAAG,MAAI,CAACS,MAAL,KAAgB,IAAnB,EACA;QACE,MAAI,CAACG,QAAL,CAAcX,GAAd,CAAkB,QAAlB,EAA4BY,QAA5B,CAAqC,MAAI,CAACb,UAAL,CAAgBc,IAAhB,CAAqBC,CAAC,IAAIA,CAAC,CAACN,MAAF,KAAa,MAAI,CAACA,MAA5C,EAAoDA,MAAzF;MACD;;MACD,MAAI,CAACG,QAAL,CAAcX,GAAd,CAAkB,QAAlB,EAA4Be,YAA5B,CAAyCC,SAAzC,CAAoDC,KAAD,IAAgB;QACjErB,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBoB,KAAvB;;QACA,MAAI,CAACN,QAAL,CAAcX,GAAd,CAAkB,SAAlB,EAA6BY,QAA7B,CAAsC,MAAI,CAACb,UAAL,CAAgBc,IAAhB,CAAqBC,CAAC,IAAIA,CAAC,CAACN,MAAF,KAAaS,KAAK,CAACT,MAA7C,EAAqDd,OAArD,CAA6DwB,QAA7D,EAAtC;;QACAtB,OAAO,CAACC,GAAR,CAAY,MAAI,CAACc,QAAL,CAAcX,GAAd,CAAkB,SAAlB,CAAZ;MACD,CAJD;IAbY;EAkBb;;EAEKjB,cAAc;IAAA;;IAAA;MAClB,MAAMoC,OAAO,GAAG,EAAhB;MACA,MAAMC,QAAQ,GAAG,MAAI,CAACT,QAAL,CAAcS,QAA/B;;MACA,KAAK,MAAMC,IAAX,IAAmBD,QAAnB,EAA6B;QAC3B,IAAIA,QAAQ,CAACC,IAAD,CAAR,CAAeF,OAAnB,EAA4B;UACxB,IAAIG,GAAG,GAAC,EAAR;UACA,IAAGD,IAAI,KAAG,cAAV,EACEC,GAAG,GAAC,cAAJ;UACF,IAAGD,IAAI,KAAK,QAAZ,EACEC,GAAG,GAAC,QAAJ;UACFH,OAAO,CAACI,IAAR,CAAaD,GAAb;QACH;MACF;;MACD,IAAI,CAAC,MAAI,CAACX,QAAL,CAAca,KAAnB,EACA;QACE,IAAIC,GAAG,GAAW,IAAlB;QACA,MAAM,MAAI,CAACC,KAAL,CAAWC,IAAX,CAAgB,OAAhB,EAAwBR,OAAO,CAACD,QAAR,EAAxB,EACLU,IADK,CACAC,MAAM,IAAIA,MAAM,CAACA,MAAP,CACbD,IADa,CACPE,IAAD,IAAS;UACbL,GAAG,GAAC,IAAJ;QACD,CAHa,EAGVM,MAAD,IAAW;UACdN,GAAG,GAAC,SAAJ;QAAe,CAJD,CADV,CAAN;QAOE;MACH;;MACD7B,OAAO,CAACC,GAAR,CAAY,MAAI,CAACc,QAAL,CAAcX,GAAd,CAAkB,QAAlB,EAA4BiB,KAAxC;MACA,MAAI,CAACzB,MAAL,GAAc,MAAI,CAACO,UAAL,CAAgBc,IAAhB,CAAqBmB,CAAC,IAAIA,CAAC,CAACxB,MAAF,KAAa,MAAI,CAACG,QAAL,CAAcX,GAAd,CAAkB,QAAlB,EAA4BiB,KAA5B,CAAkCT,MAAzE,CAAd;;MACA,MAAI,CAACtB,cAAL,CAAoBY,IAApB;;MACA,MAAI,CAACmC,WAAL,GAAmB,IAAItD,sDAAJ,CACjB,MAAI,CAACuD,YAAL,EADiB,EAEjB,MAAI,CAACvB,QAAL,CAAcX,GAAd,CAAkB,cAAlB,EAAkCiB,KAFjB,EAGjB;MACA,MAAI,CAACzB,MAAL,CAAYgB,MAJK,EAKjB,MAAI,CAAChB,MAAL,CAAY2C,QAAZ,CAAqBC,WAArB,KAAoC,GAApC,GAAyC,MAAI,CAAC5C,MAAL,CAAY6C,SALpC,EAMjB,MAAI,CAAC1B,QAAL,CAAcX,GAAd,CAAkB,aAAlB,EAAiCiB,KANhB,EAOjB,MAAI,CAACN,QAAL,CAAcX,GAAd,CAAkB,SAAlB,EAA6BiB,KAPZ,EAQjB,MAAI,CAACb,IARY,EASjB,IATiB,EAUjB,UAViB,EAWjB,IAXiB,EAYjB,IAZiB,EAajB,IAbiB,EAcjB,IAdiB,EAejB,IAfiB,CAAnB;MAkBA,MAAI,CAACkC,YAAL,SAAwB,MAAI,CAACpD,cAAL,CAAoBc,GAApB,CAAwB,WAAxB,CAAxB;MACA,IAAG,MAAI,CAACsC,YAAL,IAAmB,IAAtB,EACE,MAAI,CAACA,YAAL,GAAkB,EAAlB;;MACF,MAAI,CAACA,YAAL,CAAkBf,IAAlB,CAAuB,MAAI,CAACU,WAA5B;;MACA,MAAI,CAAC/C,cAAL,CAAoBqD,GAApB,CAAwB,WAAxB,EAAoC,MAAI,CAACD,YAAzC;;MAEA,IAAG,MAAI,CAAC9C,MAAL,CAAYgD,UAAZ,IAAwB,IAA3B,EACE,MAAI,CAAChD,MAAL,CAAYgD,UAAZ,GAAwB,IAAIC,KAAJ,EAAxB;;MACF,MAAI,CAACjD,MAAL,CAAYgD,UAAZ,CAAuBjB,IAAvB,CAA4B,MAAI,CAACU,WAAL,CAAiBS,UAA7C;;MAEA,MAAI,CAAC3C,UAAL,CAAgB,MAAI,CAACA,UAAL,CAAgB4C,SAAhB,CAA0B7B,CAAC,IAAIA,CAAC,CAACN,MAAF,IAAY,MAAI,CAAChB,MAAL,CAAYgB,MAAvD,CAAhB,IAAkF,MAAI,CAAChB,MAAvF;;MACA,MAAI,CAACN,cAAL,CAAoBqD,GAApB,CAAwB,UAAxB,EAAoC,MAAI,CAACxC,UAAzC;;MACAH,OAAO,CAACC,GAAR,CAAY,+BAAZ;;MACA,MAAI,CAACV,MAAL,CAAYyD,QAAZ,CAAqB,CAAC,UAAD,CAArB,EAAkC;QAACC,UAAU,EAAC;MAAZ,CAAlC;IA3DkB;EA4DnB;;EACDC,SAAS;IAEPlD,OAAO,CAACC,GAAR,CAAY,eAAZ;IACA,KAAKV,MAAL,CAAYyD,QAAZ,CAAqB,CAAC,aAAD,EAAe;MAACG,GAAG,EAAE;IAAN,CAAf,CAArB;EACD;;EACDb,YAAY;IAER,KAAKc,SAAL,GAAexE,oDAAA,EAAf;IACA,OAAO,KAAKwE,SAAZ;EACH;;EACKC,MAAM;IAAA;;IAAA;MAEV,IAAIpB,MAAJ;MACA,IAAIqB,GAAG,GAAG,CAAV;MACAC,MAAM,CAACC,IAAP,CAAY,MAAI,CAACzC,QAAL,CAAcS,QAA1B,EAAoCiC,OAApC,CAA4CC,GAAG,IAAG;QAChD,IAAG,CAAC,MAAI,CAACjE,cAAL,CAAoBkE,aAApB,CAAkC,MAAI,CAAC5C,QAAL,CAAcS,QAAd,CAAuBkC,GAAvB,EAA4BrC,KAA9D,CAAJ,EACA;UACEiC,GAAG;QACJ;MACF,CALD;;MAMA,IAAGA,GAAG,GAAG,CAAT,EACA;QACErB,MAAM,SAAS,MAAI,CAAC2B,WAAL,EAAf;MACD;;MACD5D,OAAO,CAACC,GAAR,CAAYgC,MAAZ;MACA,IAAGA,MAAM,KAAK,IAAd,EACE,MAAI,CAAC1C,MAAL,CAAYyD,QAAZ,CAAqB,CAAC,SAAD,CAArB,EAAiC;QAACC,UAAU,EAAC;MAAZ,CAAjC;IAhBQ;EAiBX;;EACKW,WAAW;IAAA;;IAAA;MAEf,IAAI/B,GAAG,GAAW,IAAlB;MACA,MAAM,MAAI,CAACC,KAAL,CAAWC,IAAX,CAAgB,UAAhB,EAA2B,EAA3B,EACLC,IADK,CACAC,MAAM,IAAIA,MAAM,CAACA,MAAP,CACbD,IADa,CACPE,IAAD,IAAS;QACbL,GAAG,GAAC,IAAJ;MACD,CAHa,EAGVM,MAAD,IAAW;QACdN,GAAG,GAAC,SAAJ;MAAgB,CAJF,CADV,CAAN;MAOA,IAAGA,GAAG,KAAK,SAAX,EACI,OAAO,IAAP;MACJ,OAAO,EAAP;IAZe;EAahB;;AArJwB;;;QAVlB7C,gEAAQA;;QALRL,qEAAcA;;QAEEG,oDAAMA;;QAAtBD,4DAAcA;;QAMdK,qEAAcA;;;AAOVC,cAAc,uDAL1BZ,yDAAS,CAAC;EACTsF,QAAQ,EAAE,oBADD;EAETC,UAAAA,6DAFS;;AAAA,CAAD,CAKiB,GAAd3E,cAAc,CAAd;;;;;;;;;;;;;;;ACUN,MAAM,QAAQ;IACjB,YACW,UAAiB,EACjB,YAAmB;IAC5B,iCAAiC;IACxB,QAAe,EACf,cAAsB,EACtB,WAAmB,EACnB,OAAe,EACf,SAAkB,EAClB,OAAgB,EAChB,UAAkB,EAClB,cAA8B,EAC9B,YAA4B,EAC5B,QAAyB,EACzB,KAAsB,EACtB,KAAmB;QAdnB,eAAU,GAAV,UAAU,CAAO;QACjB,iBAAY,GAAZ,YAAY,CAAO;QAEnB,aAAQ,GAAR,QAAQ,CAAO;QACf,mBAAc,GAAd,cAAc,CAAQ;QACtB,gBAAW,GAAX,WAAW,CAAQ;QACnB,YAAO,GAAP,OAAO,CAAQ;QACf,cAAS,GAAT,SAAS,CAAS;QAClB,YAAO,GAAP,OAAO,CAAS;QAChB,eAAU,GAAV,UAAU,CAAQ;QAClB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,iBAAY,GAAZ,YAAY,CAAgB;QAC5B,aAAQ,GAAR,QAAQ,CAAiB;QACzB,UAAK,GAAL,KAAK,CAAiB;QACtB,UAAK,GAAL,KAAK,CAAc;IAG9B,CAAC;CAEF;;;;;;;;;;;;;;;;;;AChDwC;IAa9B,cAAc,SAAd,cAAc;IAEzB,gBAAgB,CAAC;IACf,aAAa,CAAC,IAAa;QAC3B,IAAG,IAAI,KAAK,EAAE,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,SAAS;YACjD,OAAO,IAAI,CAAC;;YACX,OAAO,KAAK,CAAC;IACpB,CAAC;IACD,MAAM,CAAC,KAAc,EAAE,KAAc;QACnC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAC,KAAK,CAAC,CAAC;QACzB,IAAG,KAAK,KAAK,EAAE,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EACxD;YACI,IAAG,KAAK,KAAK,EAAE,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EACxD;gBACI,OAAO,IAAI,CAAC;aACf;SACJ;aACD;YACI,IAAG,KAAK,KAAK,KAAK,EAClB;gBACI,OAAO,IAAI,CAAC;aACf;SACJ;QACD,OAAO,KAAK,CAAC;IACf,CAAC;CACF;;AAzBY,cAAc;IAH1B,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,cAAc,CAyB1B;AAzB0B;;;;;;;;;;;ACbd;;AACb,IAAIP,IAAI,GAAI,YAAY;EACpB,SAASA,IAAT,GAAgB,CACZ;EACH;;EACDA,IAAI,CAACA,IAAL,GAAY,YAAY;IACpB,IAAI,OAAQmF,MAAR,KAAoB,WAApB,IAAmC,OAAQA,MAAM,CAACC,MAAf,KAA2B,WAA9D,IAA6E,OAAQD,MAAM,CAACC,MAAP,CAAcC,eAAtB,KAA2C,WAA5H,EAAyI;MACrI;MACA;MACA,IAAIC,GAAG,GAAG,IAAIC,WAAJ,CAAgB,CAAhB,CAAV;MACAJ,MAAM,CAACC,MAAP,CAAcC,eAAd,CAA8BC,GAA9B;MACA,OAAQ,KAAKE,IAAL,CAAUF,GAAG,CAAC,CAAD,CAAb,IAAoB,KAAKE,IAAL,CAAUF,GAAG,CAAC,CAAD,CAAb,CAApB,GAAwC,GAAxC,GAA8C,KAAKE,IAAL,CAAUF,GAAG,CAAC,CAAD,CAAb,CAA9C,GAAkE,GAAlE,GAAwE,KAAKE,IAAL,CAAUF,GAAG,CAAC,CAAD,CAAb,CAAxE,GAA4F,GAA5F,GAAkG,KAAKE,IAAL,CAAUF,GAAG,CAAC,CAAD,CAAb,CAAlG,GAAsH,GAAtH,GAA4H,KAAKE,IAAL,CAAUF,GAAG,CAAC,CAAD,CAAb,CAA5H,GAAgJ,KAAKE,IAAL,CAAUF,GAAG,CAAC,CAAD,CAAb,CAAhJ,GAAoK,KAAKE,IAAL,CAAUF,GAAG,CAAC,CAAD,CAAb,CAA5K;IACH,CAND,MAOK;MACD;MACA;MACA;MACA,OAAO,KAAKG,OAAL,KAAiB,KAAKA,OAAL,EAAjB,GAAkC,GAAlC,GAAwC,KAAKA,OAAL,EAAxC,GAAyD,GAAzD,GAA+D,KAAKA,OAAL,EAA/D,GAAgF,GAAhF,GACH,KAAKA,OAAL,EADG,GACc,GADd,GACoB,KAAKA,OAAL,EADpB,GACqC,KAAKA,OAAL,EADrC,GACsD,KAAKA,OAAL,EAD7D;IAEH;EACJ,CAfD;;EAgBAzF,IAAI,CAACwF,IAAL,GAAY,UAAUE,GAAV,EAAe;IACvB,IAAIC,GAAG,GAAGD,GAAG,CAAChD,QAAJ,CAAa,EAAb,CAAV;;IACA,OAAOiD,GAAG,CAACC,MAAJ,GAAa,CAApB,EAAuB;MACnBD,GAAG,GAAG,MAAMA,GAAZ;IACH;;IACD,OAAOA,GAAP;EACH,CAND;;EAOA3F,IAAI,CAACyF,OAAL,GAAe,YAAY;IACvB,OAAOI,IAAI,CAACC,KAAL,CAAW,CAAC,IAAID,IAAI,CAACE,MAAL,EAAL,IAAsB,OAAjC,EACFrD,QADE,CACO,EADP,EAEFsD,SAFE,CAEQ,CAFR,CAAP;EAGH,CAJD;;EAKA,OAAOhG,IAAP;AACH,CAjCW,EAAZ;;AAkCAiG,YAAA,GAAejG,IAAf","sources":["./src/app/create-worksite/create-worksite-routing.module.ts","./src/app/create-worksite/create-worksite.module.ts","./src/app/create-worksite/create-worksite.ts","./src/app/models/chantier.ts","./src/app/services/methods.service.ts","./node_modules/angular2-uuid/index.js"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CreateWorksite } from './create-worksite';\r\n\r\nconst routes: Routes = [\r\n    {\r\n    path: '',\r\n    component: CreateWorksite,\r\n  }\r\n];\r\n\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class CreateWorksiteRoutingModule {}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CreateWorksite } from './create-worksite';\nimport { IonicModule } from '@ionic/angular';\nimport { SharedModule } from '../shared/shared.module';\nimport { CreateWorksiteRoutingModule } from './create-worksite-routing.module';\nimport { IonicSelectableModule } from 'ionic-selectable';\n\n\n@NgModule({\n  declarations: [CreateWorksite],\n  imports: [\n    IonicModule,\n    CommonModule,\n    SharedModule,\n    CreateWorksiteRoutingModule,\n    IonicSelectableModule\n  ]\n})\nexport class CreateWorksiteModule { }\n","import { Component, OnInit } from '@angular/core';\r\nimport { UntypedFormGroup, UntypedFormControl, Validators } from '@angular/forms';\r\nimport { StorageService } from '../services/storage.service';\r\nimport { UUID } from 'angular2-uuid';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Chantier } from '../models/chantier';\r\nimport { User } from '../models/user';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { NgbdModalFocus } from '../modal/modal-focus';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { MethodsService } from '../services/methods.service';\r\n\r\n@Component({\r\n  selector: 'app-createworksite',\r\n  templateUrl: 'create-worksite.html',\r\n  styleUrls: ['create-worksite.scss']\r\n})\r\nexport class CreateWorksite implements OnInit {\r\n  newWorksite : Chantier;\r\n  client : User;\r\n  selectedClient : User;\r\n  uuidValue : string;\r\n  public chantierList : Array<Chantier> = [];\r\n  clientList : Array<User> = [];\r\n  date : string;\r\n  userId : string;\r\n  formWork = new UntypedFormGroup({\r\n    worksiteName: new UntypedFormControl('',Validators.required),\r\n    client: new UntypedFormControl('', Validators.required),\r\n    description: new UntypedFormControl(''),\r\n    address : new UntypedFormControl(''),\r\n  });\r\n\r\n  public modal = new NgbdModalFocus(this.modalS);\r\n  constructor(private modalS :NgbModal,private storageService:StorageService, private router: Router,\r\n    private route:ActivatedRoute, private methodsService : MethodsService)\r\n  {\r\n  }\r\n  async ionViewDidEnter(){\r\n    console.log('view did enter');\r\n    this.storageService.init();\r\n    this.clientList = await this.storageService.get('Contacts');\r\n\r\n  }\r\n  async ngOnInit() {\r\n    const nowDate = new Date();\r\n    this.date = nowDate.getDate()+'/'+(nowDate.getMonth()+1)+'/'+nowDate.getFullYear();\r\n\r\n    this.userId = this.route.snapshot.paramMap.get('userId');\r\n    console.log(this.userId);\r\n    this.storageService.init();\r\n    this.clientList = await this.storageService.get('Contacts');\r\n    console.log(this.clientList);\r\n    if(this.userId !== null)\r\n    {\r\n      this.formWork.get('client').setValue(this.clientList.find(a => a.userId === this.userId).userId);\r\n    }\r\n    this.formWork.get('client').valueChanges.subscribe((value: User) => {\r\n      console.log('selected',value);\r\n      this.formWork.get('address').setValue(this.clientList.find(a => a.userId === value.userId).address.toString());\r\n      console.log(this.formWork.get('address'));\r\n    });\r\n  }\r\n\r\n  async CreateWorksite() {\r\n    const invalid = [];\r\n    const controls = this.formWork.controls;\r\n    for (const name in controls) {\r\n      if (controls[name].invalid) {\r\n          let nom='';\r\n          if(name==='worksiteName')\r\n            nom='Nom chantier';\r\n          if(name === 'client')\r\n            nom='Client';\r\n          invalid.push(nom);\r\n      }\r\n    }\r\n    if (!this.formWork.valid)\r\n    {\r\n      let res : string =null;\r\n      await this.modal.open('field',invalid.toString())\r\n      .then(result => result.result\r\n        .then((data) => {\r\n          res='OK';\r\n        }, (reason) => {\r\n        res='DISMISS' }\r\n        ));\r\n        return;\r\n    }\r\n    console.log(this.formWork.get('client').value);\r\n    this.client = this.clientList.find(x => x.userId === this.formWork.get('client').value.userId);\r\n    this.storageService.init();\r\n    this.newWorksite = new Chantier(\r\n      this.generateUUID(),\r\n      this.formWork.get('worksiteName').value,\r\n      // this.client.lastName,\r\n      this.client.userId,\r\n      this.client.lastName.toUpperCase() +' '+ this.client.firstName,\r\n      this.formWork.get('description').value,\r\n      this.formWork.get('address').value,\r\n      this.date,\r\n      null,\r\n      'En cours',\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n    );\r\n\r\n    this.chantierList=await this.storageService.get('Chantiers');\r\n    if(this.chantierList==null)\r\n      this.chantierList=[];\r\n    this.chantierList.push(this.newWorksite);\r\n    this.storageService.set('Chantiers',this.chantierList);\r\n\r\n    if(this.client.historique==null)\r\n      this.client.historique= new Array<string>();\r\n    this.client.historique.push(this.newWorksite.chantierId);\r\n\r\n    this.clientList[this.clientList.findIndex(a => a.userId == this.client.userId)] = this.client;\r\n    this.storageService.set('Contacts', this.clientList);\r\n    console.log('Chantier crÃ©e, redirection...');\r\n    this.router.navigate(['/tb-home'],{replaceUrl:true});\r\n  }\r\n  NewClient()\r\n  {\r\n    console.log('create client');\r\n    this.router.navigate(['new-contact',{tag: 'chantier'}]);\r\n  }\r\n  generateUUID()\r\n  {\r\n      this.uuidValue=UUID.UUID();\r\n      return this.uuidValue;\r\n  }\r\n  async GoBack()\r\n  {\r\n    var result : string | undefined;\r\n    let cpt = 0;\r\n    Object.keys(this.formWork.controls).forEach(key => {\r\n      if(!this.methodsService.isNullOrEmpty(this.formWork.controls[key].value))\r\n      {\r\n        cpt ++;\r\n      }\r\n    });\r\n    if(cpt > 0)\r\n    {\r\n      result = await this.GoBackModal();\r\n    }\r\n    console.log(result);\r\n    if(result !== null)\r\n      this.router.navigate(['tb-home'],{replaceUrl:true});\r\n  }\r\n  async GoBackModal() : Promise<string>\r\n  {\r\n    let res : string =null;\r\n    await this.modal.open('exitPage','')\r\n    .then(result => result.result\r\n      .then((data) => {\r\n        res='OK';\r\n      }, (reason) => {\r\n      res='DISMISS'; }\r\n      ));\r\n    if(res === 'DISMISS')\r\n        return null;\r\n    return '';\r\n  }\r\n}\r\n\r\n","import { Facture } from './facture';\r\nimport { Hour } from './hour';\r\n\r\nexport interface IChantier\r\n{\r\n    // list facture/devis\r\n    // list photos\r\n    // client: User;\r\n    // dates\r\n    chantierId: string;\r\n    worksiteName: string;\r\n   // clientLastName: string;\r\n    clientId:string;\r\n    clientFullName:string;\r\n    description : string;\r\n    address : string\r\n    dateStart : string;\r\n    dateEnd : string;\r\n    isFinished : string;\r\n    imagesChantier: Array<string>;\r\n    imagesTicket: Array<string>;\r\n    factures : Array<Facture>;\r\n    devis : Array<Facture>;\r\n    hours : Array<Hour>;\r\n\r\n\r\n}\r\nexport class Chantier implements IChantier {\r\n    constructor(\r\n        public chantierId:string,\r\n        public worksiteName:string,\r\n      //  public clientLastName:string,\r\n        public clientId:string,\r\n        public clientFullName: string,\r\n        public description: string,\r\n        public address: string,\r\n        public dateStart : string,\r\n        public dateEnd : string,\r\n        public isFinished: string,\r\n        public imagesChantier : Array<string>,\r\n        public imagesTicket : Array<string>,\r\n        public factures : Array<Facture>,\r\n        public devis : Array<Facture>,\r\n        public hours : Array<Hour>,\r\n\r\n    ) {\r\n    }\r\n\r\n  }","import { Injectable } from '@angular/core';\r\nimport { Directory, Filesystem } from '@capacitor/filesystem';\r\nimport jsPDF from 'jspdf';\r\nimport { Chantier } from '../models/chantier';\r\nimport { Facture } from '../models/facture';\r\nimport { User } from '../models/user';\r\nimport { StorageService } from './storage.service';\r\nimport { ToastController} from '@ionic/angular';\r\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MethodsService {\r\n\r\n  constructor() { }\r\n    isNullOrEmpty(text : string) {\r\n    if(text === '' || text === null || text === undefined)\r\n        return true;\r\n    else return false;\r\n  }\r\n  equals(text1 : string, text2 : string) {\r\n    console.log(text1,text2);\r\n    if(text1 === '' || text1 === null || text1 === undefined)\r\n    {\r\n        if(text2 === '' || text2 === null || text2 === undefined)\r\n        {\r\n            return true;\r\n        }\r\n    }else\r\n    {\r\n        if(text1 === text2)\r\n        {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n","\"use strict\";\nvar UUID = (function () {\n    function UUID() {\n        // no-op\n    }\n    UUID.UUID = function () {\n        if (typeof (window) !== \"undefined\" && typeof (window.crypto) !== \"undefined\" && typeof (window.crypto.getRandomValues) !== \"undefined\") {\n            // If we have a cryptographically secure PRNG, use that\n            // http://stackoverflow.com/questions/6906916/collisions-when-generating-uuids-in-javascript\n            var buf = new Uint16Array(8);\n            window.crypto.getRandomValues(buf);\n            return (this.pad4(buf[0]) + this.pad4(buf[1]) + \"-\" + this.pad4(buf[2]) + \"-\" + this.pad4(buf[3]) + \"-\" + this.pad4(buf[4]) + \"-\" + this.pad4(buf[5]) + this.pad4(buf[6]) + this.pad4(buf[7]));\n        }\n        else {\n            // Otherwise, just use Math.random\n            // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n            // https://stackoverflow.com/questions/11605068/why-does-jshint-argue-against-bitwise-operators-how-should-i-express-this-code\n            return this.random4() + this.random4() + \"-\" + this.random4() + \"-\" + this.random4() + \"-\" +\n                this.random4() + \"-\" + this.random4() + this.random4() + this.random4();\n        }\n    };\n    UUID.pad4 = function (num) {\n        var ret = num.toString(16);\n        while (ret.length < 4) {\n            ret = \"0\" + ret;\n        }\n        return ret;\n    };\n    UUID.random4 = function () {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    };\n    return UUID;\n}());\nexports.UUID = UUID;\n"],"names":["Component","UntypedFormGroup","UntypedFormControl","Validators","StorageService","UUID","ActivatedRoute","Router","Chantier","NgbModal","NgbdModalFocus","MethodsService","CreateWorksite","constructor","modalS","storageService","router","route","methodsService","worksiteName","required","client","description","address","ionViewDidEnter","console","log","init","clientList","get","ngOnInit","nowDate","Date","date","getDate","getMonth","getFullYear","userId","snapshot","paramMap","formWork","setValue","find","a","valueChanges","subscribe","value","toString","invalid","controls","name","nom","push","valid","res","modal","open","then","result","data","reason","x","newWorksite","generateUUID","lastName","toUpperCase","firstName","chantierList","set","historique","Array","chantierId","findIndex","navigate","replaceUrl","NewClient","tag","uuidValue","GoBack","cpt","Object","keys","forEach","key","isNullOrEmpty","GoBackModal","selector","template","window","crypto","getRandomValues","buf","Uint16Array","pad4","random4","num","ret","length","Math","floor","random","substring","exports"],"sourceRoot":"webpack:///"}