{"version":3,"file":"src_app_settings_settings_module_ts.js","mappings":";;;;;;;;;;;;;AAYO,MAAM,eAAe;IACxB,YACW,WAAoB,EACpB,IAAY,EACZ,OAAe,EACf,MAAc,EACd,aAAsB,EACtB,aAAsB;QALtB,gBAAW,GAAX,WAAW,CAAS;QACpB,SAAI,GAAJ,IAAI,CAAQ;QACZ,YAAO,GAAP,OAAO,CAAQ;QACf,WAAM,GAAN,MAAM,CAAQ;QACd,kBAAa,GAAb,aAAa,CAAS;QACtB,kBAAa,GAAb,aAAa,CAAS;IAEjC,CAAC;CAEF;;;;;;;;;;;;;;;;;;;;ACvBsC;AACc;AACjB;AAEtC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+CAAQ;KACpB;CACF,CAAC;IAMW,qBAAqB,SAArB,qBAAqB;CAAG;AAAxB,qBAAqB;IAJjC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACfW;AACJ;AACM;AAEQ;AACW;AAC5B;AACO;IAYhC,cAAc,SAAd,cAAc;CAAG;AAAjB,cAAc;IAV1B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,uDAAW;YACX,yDAAY;YACZ,+DAAY;YACZ,2EAAqB;YACrB,uDAAW;SACZ;QACD,YAAY,EAAE,CAAC,+CAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnB3B;AACA;AACA;AACA;AAEA;AACA;AACA;IAOaS,QAAQ,SAARA,QAAQ;EAYnBC,YAAoBC,MAApB,EAA6CC,cAA7C,EAAoFC,MAApF,EAAkG;IAA9E;IAAyB;IAAuC;IAXpF,WAAM,EAAN;IACA,gBAAW,CAAC,iBAAD,EAAoB,uBAApB,EAA4C,aAA5C,EAA0D,aAA1D,CAAX;IACA,mBAAc,IAAIX,4DAAJ,CAAqB;MACjCY,WAAW,EAAE,IAAIb,8DAAJ,CAAuB,EAAvB,EAA0BE,+DAA1B,CADoB;MAEjCa,IAAI,EAAE,IAAIf,8DAAJ,CAAuB,EAAvB,EAA0BE,+DAA1B,CAF2B;MAGjCc,OAAO,EAAE,IAAIhB,8DAAJ,CAAuB,EAAvB,CAHwB;MAIjCiB,MAAM,EAAE,IAAIjB,8DAAJ,CAAuB,EAAvB,CAJyB;MAKjCkB,aAAa,EAAE,IAAIlB,8DAAJ,CAAuB,EAAvB,CALkB;MAMjCmB,aAAa,EAAE,IAAInB,8DAAJ,CAAuB,EAAvB;IANkB,CAArB,CAAd;IAQO,aAAQ,IAAIK,8DAAJ,CAAmB,KAAKK,MAAxB,CAAR;IAELU,OAAO,CAACC,GAAR,CAAY,iBAAZ;EACD;;EAEKC,QAAQ;IAAA;;IAAA;MAEZ,KAAI,CAACX,cAAL,CAAoBY,IAApB;;MACA,IAAIC,eAAe,SAA2B,KAAI,CAACb,cAAL,CAAoBc,GAApB,CAAwB,mBAAxB,CAA9C;MACAL,OAAO,CAACC,GAAR,CAAYG,eAAZ;;MAEA,IAAGA,eAAe,IAAE,IAApB,EACA;QACE,IAAIE,WAAJ;;QACA,IAAGF,eAAe,CAACT,IAAhB,KAAyB,KAA5B,EACA;UACEW,WAAW,GAAG,CAAd;QACD,CAHD,MAGM,IAAGF,eAAe,CAACT,IAAhB,KAAyB,MAA5B,EACN;UACEW,WAAW,GAAG,CAAd;QACD,CAHK,MAGA,IAAGF,eAAe,CAACT,IAAhB,KAAyB,SAA5B,EACN;UACEW,WAAW,GAAG,CAAd;QACD,CAHK,MAGA,IAAGF,eAAe,CAACT,IAAhB,KAAyB,SAA5B,EACN;UACEW,WAAW,GAAG,CAAd;QACD,CAHK,MAGAA,WAAW,GAAG,CAAd;;QAEJ,KAAI,CAACC,WAAL,CAAiBC,QAAjB,CAA0B;UACxBf,WAAW,EAAEW,eAAe,CAACX,WADL;UAExBE,IAAI,EAAE,KAAI,CAACc,QAAL,CAAcH,WAAd,CAFkB;UAGxBV,OAAO,EAAEQ,eAAe,CAACR,OAHD;UAIxBC,MAAM,EAAEO,eAAe,CAACP,MAJA;UAKxBC,aAAa,EAAEM,eAAe,CAACN,aALP;UAMxBC,aAAa,EAAEK,eAAe,CAACL;QANP,CAA1B;MAQH,CAzBD,MA0BA;QACE,KAAI,CAACQ,WAAL,CAAiBC,QAAjB,CAA0B;UACxBf,WAAW,EAAE,EADW;UAExBE,IAAI,EAAE,EAFkB;UAGxBC,OAAO,EAAE,EAHe;UAIxBC,MAAM,EAAE,GAJgB;UAKxBC,aAAa,EAAE,KALS;UAMxBC,aAAa,EAAE;QANS,CAA1B;MAQD;IAzCW;EA0Cb;;EAEKW,qBAAqB;IAAA;;IAAA;MACzB,MAAMC,OAAO,GAAG,EAAhB;MACA,MAAMC,QAAQ,GAAG,MAAI,CAACL,WAAL,CAAiBK,QAAlC;;MACA,KAAK,MAAMC,IAAX,IAAmBD,QAAnB,EAA6B;QAC3B,IAAIA,QAAQ,CAACC,IAAD,CAAR,CAAeF,OAAnB,EAA4B;UACxB,IAAIG,GAAG,GAAC,EAAR;UACA,IAAGD,IAAI,KAAG,WAAV,EACEC,GAAG,GAAC,QAAJ;UACF,IAAGD,IAAI,KAAG,UAAV,EACEC,GAAG,GAAC,KAAJ;UACFH,OAAO,CAACI,IAAR,CAAaD,GAAb;QACH;MACF;;MACD,IAAI,CAAC,MAAI,CAACP,WAAL,CAAiBS,KAAtB,EACA;QACE,IAAIC,GAAG,GAAW,IAAlB;QACA,MAAM,MAAI,CAACC,KAAL,CAAWC,IAAX,CAAgB,OAAhB,EAAwBR,OAAO,CAACS,QAAR,EAAxB,EACLC,IADK,CACAC,MAAM,IAAIA,MAAM,CAACA,MAAP,CACbD,IADa,CACPE,IAAD,IAAS;UACbN,GAAG,GAAC,IAAJ;QACD,CAHa,EAGVO,MAAD,IAAW;UACdP,GAAG,GAAC,SAAJ;QAAe,CAJD,CADV,CAAN;QAOE;MACH;;MACDjB,OAAO,CAACC,GAAR,CAAY,MAAI,CAACwB,GAAjB,EAAsB,MAAI,CAACA,GAAL,CAASC,MAA/B;MAEA,IAAIpB,WAAW,GAAG,EAAlB;;MACA,IAAG,MAAI,CAACmB,GAAL,KAAa,iBAAhB,EACA;QACEnB,WAAW,GAAG,KAAd;MACD,CAHD,MAGM,IAAG,MAAI,CAACmB,GAAL,KAAa,uBAAhB,EACN;QACEnB,WAAW,GAAG,MAAd;MACD,CAHK,MAGA,IAAG,MAAI,CAACmB,GAAL,KAAa,aAAhB,EACN;QACEnB,WAAW,GAAG,SAAd;MACD,CAHK,MAGA,IAAG,MAAI,CAACmB,GAAL,KAAa,aAAhB,EACN;QACEnB,WAAW,GAAG,SAAd;MACD;;MACD,MAAI,CAACf,cAAL,CAAoBY,IAApB;;MACA,MAAI,CAACZ,cAAL,CAAoBoC,GAApB,CAAwB,mBAAxB,EAA4C,IAAIzC,6EAAJ,CAC1C,MAAI,CAACqB,WAAL,CAAiBF,GAAjB,CAAqB,aAArB,EAAoCuB,KADM,EAE1CtB,WAF0C,EAG1C,MAAI,CAACC,WAAL,CAAiBF,GAAjB,CAAqB,SAArB,EAAgCuB,KAHU,EAI1C,MAAI,CAACrB,WAAL,CAAiBF,GAAjB,CAAqB,QAArB,EAA+BuB,KAJW,EAK1C,MAAI,CAACrB,WAAL,CAAiBF,GAAjB,CAAqB,eAArB,EAAsCuB,KALI,EAM1C,MAAI,CAACrB,WAAL,CAAiBF,GAAjB,CAAqB,eAArB,EAAsCuB,KANI,CAA5C;;MAQA5B,OAAO,CAACC,GAAR,CAAY,iDAAZ;;MACA,MAAI,CAACT,MAAL,CAAYqC,QAAZ,CAAqB,CAAC,SAAD,CAArB,EAAiC;QAACC,UAAU,EAAC;MAAZ,CAAjC;IAnDyB;EAqD1B;;EACDC,aAAa,CAACC,KAAD,EAAM;IACjBhC,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB+B,KAAtB;IACA,KAAKP,GAAL,GAAYO,KAAK,CAACC,MAAN,CAAmCL,KAA/C;EACD;;EACKM,MAAM;IAAA;;IAAA;MAEV,MAAI,CAAC1C,MAAL,CAAYqC,QAAZ,CAAqB,CAAC,SAAD,CAArB,EAAiC;QAACC,UAAU,EAAC;MAAZ,CAAjC;IAFU;EAGX;;AAzHkB;;;QAXZ9C,gEAAQA;;QAIRG,qEAAcA;;QALdJ,mDAAMA;;;AAYFK,QAAQ,sDALpBT,yDAAS,CAAC;EACTwD,QAAQ,EAAE,cADD;EAETC,UAAAA,sDAFS;;AAAA,CAAD,CAKW,GAARhD,QAAQ,CAAR","sources":["./src/app/models/Settings/invoiceSettings.ts","./src/app/settings/settings-routing.module.ts","./src/app/settings/settings.module.ts","./src/app/settings/settings.ts"],"sourcesContent":["\r\nexport interface IInvoiceSettings\r\n{\r\n    factureName : string;\r\n    exts: string;\r\n    extType: string;\r\n    extNum: number;\r\n    positionAvant: boolean;\r\n    positionApres: boolean;\r\n}\r\n\r\n\r\nexport class InvoiceSettings implements IInvoiceSettings {\r\n    constructor(\r\n        public factureName : string,\r\n        public exts: string,\r\n        public extType: string,\r\n        public extNum: number,\r\n        public positionAvant: boolean,\r\n        public positionApres: boolean,\r\n    ) {\r\n    }\r\n\r\n  }","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { Settings } from './settings';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: Settings\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SettingsRoutingModule {}\r\n","import { IonicModule } from '@ionic/angular';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { SettingsRoutingModule } from './settings-routing.module';\r\nimport { Settings } from './settings';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    SharedModule,\r\n    SettingsRoutingModule,\r\n    FormsModule,\r\n  ],\r\n  declarations: [Settings]\r\n})\r\nexport class SettingsModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, UntypedFormControl, UntypedFormGroup, NgForm, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { isThisSecond } from 'date-fns';\r\nimport { NgbdModalFocus } from '../modal/modal-focus';\r\nimport { InvoiceSettings } from '../models/Settings/invoiceSettings';\r\nimport { StorageService } from '../services/storage.service';\r\n\r\n@Component({\r\n  selector: 'app-settings',\r\n  templateUrl: 'settings.html',\r\n  styleUrls: ['settings.scss']\r\n})\r\nexport class Settings implements OnInit{\r\n  ext = '';\r\n  extTypes = ['Numéro (Ex: 34)', 'Date (Ex: JJ/MM/AAAA)','Numéro-Date','Date-Numero'];\r\n  formInvoice = new UntypedFormGroup({\r\n    factureName: new UntypedFormControl('',Validators.required),\r\n    exts: new UntypedFormControl('',Validators.required),\r\n    extType: new UntypedFormControl(''),\r\n    extNum: new UntypedFormControl(''),\r\n    positionAvant: new UntypedFormControl(''),\r\n    positionApres: new UntypedFormControl(''),\r\n  });\r\n  public modal = new NgbdModalFocus(this.modalS);\r\n  constructor(private modalS :NgbModal,private storageService: StorageService,private router: Router) {\r\n    console.log('Module settings');\r\n  }\r\n\r\n  async ngOnInit(): Promise<void>\r\n  {\r\n    this.storageService.init();\r\n    let invoiceSettings : InvoiceSettings = await this.storageService.get('MyInvoiceSettings');\r\n    console.log(invoiceSettings);\r\n\r\n    if(invoiceSettings!=null)\r\n    {\r\n      let selectedExt : number;\r\n      if(invoiceSettings.exts === 'Num')\r\n      {\r\n        selectedExt = 0;\r\n      }else if(invoiceSettings.exts === 'Date')\r\n      {\r\n        selectedExt = 1;\r\n      }else if(invoiceSettings.exts === 'NumDate')\r\n      {\r\n        selectedExt = 2;\r\n      }else if(invoiceSettings.exts === 'DateNum')\r\n      {\r\n        selectedExt = 3;\r\n      }else selectedExt = 0;\r\n\r\n        this.formInvoice.setValue({\r\n          factureName: invoiceSettings.factureName,\r\n          exts: this.extTypes[selectedExt],\r\n          extType: invoiceSettings.extType,\r\n          extNum: invoiceSettings.extNum,\r\n          positionAvant: invoiceSettings.positionAvant,\r\n          positionApres: invoiceSettings.positionApres,\r\n        });\r\n    }else\r\n    {\r\n      this.formInvoice.setValue({\r\n        factureName: '',\r\n        exts: '',\r\n        extType: '',\r\n        extNum: '0',\r\n        positionAvant: false,\r\n        positionApres: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  async UpdateInvoiceSettings() {\r\n    const invalid = [];\r\n    const controls = this.formInvoice.controls;\r\n    for (const name in controls) {\r\n      if (controls[name].invalid) {\r\n          let nom='';\r\n          if(name==='firstName')\r\n            nom='Prénom';\r\n          if(name==='lastName')\r\n            nom='Nom';\r\n          invalid.push(nom);\r\n      }\r\n    }\r\n    if (!this.formInvoice.valid)\r\n    {\r\n      let res : string =null;\r\n      await this.modal.open('field',invalid.toString())\r\n      .then(result => result.result\r\n        .then((data) => {\r\n          res='OK';\r\n        }, (reason) => {\r\n        res='DISMISS' }\r\n        ));\r\n        return;\r\n    }\r\n    console.log(this.ext, this.ext.length);\r\n\r\n    let selectedExt = '';\r\n    if(this.ext === 'Numéro (Ex: 34)')\r\n    {\r\n      selectedExt = 'Num';\r\n    }else if(this.ext === 'Date (Ex: JJ/MM/AAAA)')\r\n    {\r\n      selectedExt = 'Date';\r\n    }else if(this.ext === 'Numéro-Date')\r\n    {\r\n      selectedExt = 'NumDate';\r\n    }else if(this.ext === 'Date-Numero')\r\n    {\r\n      selectedExt = 'DateNum';\r\n    }\r\n    this.storageService.init();\r\n    this.storageService.set('MyInvoiceSettings',new InvoiceSettings(\r\n      this.formInvoice.get('factureName').value,\r\n      selectedExt,\r\n      this.formInvoice.get('extType').value,\r\n      this.formInvoice.get('extNum').value,\r\n      this.formInvoice.get('positionAvant').value,\r\n      this.formInvoice.get('positionApres').value,\r\n    ));\r\n    console.log('Parametres de facture actualisé, redirection...');\r\n    this.router.navigate(['tb-home'],{replaceUrl:true});\r\n\r\n  }\r\n  selectExtType(event) {\r\n    console.log('select', event);\r\n    this.ext = (event.target as HTMLSelectElement).value;\r\n  }\r\n  async GoBack()\r\n  {\r\n    this.router.navigate(['tb-home'],{replaceUrl:true});\r\n  }\r\n}\r\n"],"names":["Component","UntypedFormControl","UntypedFormGroup","Validators","Router","NgbModal","NgbdModalFocus","InvoiceSettings","StorageService","Settings","constructor","modalS","storageService","router","factureName","required","exts","extType","extNum","positionAvant","positionApres","console","log","ngOnInit","init","invoiceSettings","get","selectedExt","formInvoice","setValue","extTypes","UpdateInvoiceSettings","invalid","controls","name","nom","push","valid","res","modal","open","toString","then","result","data","reason","ext","length","set","value","navigate","replaceUrl","selectExtType","event","target","GoBack","selector","template"],"sourceRoot":"webpack:///"}