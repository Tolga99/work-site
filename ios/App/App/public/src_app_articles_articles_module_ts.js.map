{"version":3,"file":"src_app_articles_articles_module_ts.js","mappings":"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","sources":["./src/app/articles/articles-routing.module.ts","./src/app/articles/articles.module.ts","./src/app/articles/articles.ts","./src/app/articles/articles.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { Articles } from './articles';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Articles\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ArticlesRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ArticlesRoutingModule } from './articles-routing.module';\n\nimport { Articles } from './articles';\nimport { SharedModule } from '../shared/shared.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ArticlesRoutingModule,\n    SharedModule,\n  ],\n  declarations: [Articles]\n})\nexport class ArticlesModule {}\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { isThursday } from 'date-fns';\r\nimport { threadId } from 'worker_threads';\r\nimport { NgbdModalFocus } from '../modal/modal-focus';\r\nimport { Category } from '../models/category';\r\nimport { Product } from '../models/product';\r\nimport { StorageService } from '../services/storage.service';\r\n\r\n@Component({\r\n  selector: 'app-articles',\r\n  templateUrl: './articles.html',\r\n  styleUrls: ['./articles.scss'],\r\n})\r\nexport class Articles implements OnInit {\r\n\r\n  headElementsArt = ['Nom article', 'Description','Prix HTVA', 'Catégorie'];\r\n  artList : Array<Product> = [];\r\n  catList : Array<Category> = [];\r\n  actualCat : Category = null;\r\n\r\n  public modal = new NgbdModalFocus(this.modalS);\r\n  constructor(private modalS : NgbModal,private storageService:StorageService, private router:Router,private route:ActivatedRoute)\r\n  {\r\n  }\r\n\r\n  async ionViewDidEnter(){\r\n    this.catList = await this.storageService.get('Categories');\r\n    this.actualCat =this.catList.find(a => a.categoryId === this.route.snapshot.paramMap.get('actualCat'));\r\n\r\n    this.EnterCategory(this.actualCat);\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.storageService.init();\r\n    this.artList = await this.storageService.get('Articles');\r\n    this.catList = await this.storageService.get('Categories');\r\n    if(this.catList!=null)\r\n      this.catList = this.catList.filter(a => a.categoryParent == null);\r\n\r\n    this.catList.forEach(element => {\r\n      if(element.categoryImage==null)\r\n        element.categoryImage='..//resources//White-square.jpg';\r\n      \r\n    });\r\n  }\r\n  CreateCategory()\r\n  {\r\n    console.log('Bouton nv cat');\r\n    if(this.actualCat!=null)\r\n      this.router.navigate(['category-form',{actualCat : this.actualCat.categoryId}],{replaceUrl:true});\r\n    else this.router.navigate(['category-form']);\r\n  }\r\n  ModifyCategory(c : Category)\r\n  {\r\n    console.log(c);\r\n    if(c!=null)\r\n      this.router.navigate(['category-form',\r\n                          {actualCat : this.actualCat?.categoryId,modifCat: c?.categoryId, modif: 'YES'}],\r\n                          {replaceUrl:true});\r\n    else this.router.navigate(['category-form',{modif: 'YES'}],{replaceUrl:true});\r\n\r\n  }\r\n  async EnterCategory(c : Category)\r\n  {\r\n    this.actualCat = c;\r\n    this.artList = await this.storageService.get('Articles'); // Dans les 2 cas on a besoin de la liste complete et actualisée\r\n    if(this.actualCat==null)\r\n    {\r\n      this.catList = await this.storageService.get('Categories');\r\n      if(this.catList!=null)\r\n        this.catList = this.catList.filter(a => a.categoryParent == null);\r\n    }else\r\n    {\r\n      this.catList = this.actualCat.subCategories;\r\n      if(this.artList!=null)\r\n        this.artList = this.artList.filter(a => a.categoryId === this.actualCat.categoryId);\r\n    }\r\n    // + refresh la liste en dessous avec les articles filtrés AUSSI\r\n  }\r\n  async BackCategory()\r\n  {\r\n    if(this.actualCat==null)\r\n      this.EnterCategory(null);\r\n    else this.EnterCategory(this.actualCat.categoryParent);\r\n    // REfresh articles\r\n  }\r\n  CreateProduct()\r\n  {\r\n    if(this.actualCat!=null)\r\n      this.router.navigate(['article-form',{actualCat : this.actualCat.categoryId}],{replaceUrl:true});\r\n    else this.router.navigate(['article-form']);\r\n  }\r\n  ModifyProduct(p : Product)\r\n  {\r\n    console.log(p);\r\n    if(p!=null)\r\n      this.router.navigate(['article-form',{modifArt: p.productId, modif: 'YES'}],{replaceUrl:true});\r\n    else this.router.navigate(['article-form',{modif: 'YES'}],{replaceUrl:true});\r\n  }\r\n  async DeleteProduct(p : Product)\r\n  {\r\n    let res : string =null;\r\n    await this.modal.open('delArt',p.productName)\r\n    .then(result => result.result\r\n      .then((data) => {\r\n        res='OK';\r\n      }, (reason) => {\r\n      res='DISMISS' }\r\n      ));\r\n\r\n    if(res==='DISMISS')\r\n        return ;\r\n\r\n  }\r\n  async DeleteCategory(c : Category)\r\n  {\r\n    let res : string =null;\r\n    await this.modal.open('delCat',c.categoryName)\r\n    .then(result => result.result\r\n      .then((data) => {\r\n        res='OK';\r\n      }, (reason) => {\r\n      res='DISMISS' }\r\n      ));\r\n\r\n    if(res==='DISMISS')\r\n        return ;\r\n\r\n  }\r\n  GoBack()\r\n  {\r\n    this.router.navigate(['tb-settings'],{replaceUrl:true});\r\n  }\r\n}","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-button (click)=\\\"GoBack()\\\">\\n      <ion-icon name=\\\"arrow-back\\\"></ion-icon>\\n      <ion-label>Retour</ion-label>\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n<div style=\\\"overflow-y: auto;\\\">\\n\\n  <div class=\\\"container\\\" style=\\\"overflow-y: auto;\\\">\\n    <div class=\\\"row\\\">\\n      <mat-card class=\\\"example-card col-4\\\" *ngFor=\\\"let el of catList\\\">\\n        <mat-card-title-group (click)=\\\"EnterCategory(el)\\\">\\n          <mat-card-title>{{el.categoryName}}</mat-card-title>\\n          <mat-card-subtitle>{{el.description}}</mat-card-subtitle>\\n          <img class=\\\"img-fluid\\\" mat-card-lg-image src=\\\"{{el.categoryImage}}\\\" style='width:100%;' [border]=\\\"0\\\" alt=\\\"Null\\\"\\n            onerror=\\\"this.onerror=null; this.src=null\\\">\\n        </mat-card-title-group>\\n        <button type=\\\"button\\\" (click)=\\\"ModifyCategory(el)\\\">...</button>\\n\\n        <!-- <mat-card-content>\\n        {{longText}}\\n      </mat-card-content> -->\\n      </mat-card>\\n    </div>\\n\\n    <div class=\\\"card-footer text-muted\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"BackCategory()\\\">Go back</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"CreateCategory()\\\">Nouvelle catégorie</button>\\n    </div>\\n  </div>\\n  <hr>\\n  <div class=\\\"card-header\\\">\\n    Mes articles\\n  </div>\\n  <div class=\\\"col-auto table-wrapper-scroll-y my-custom-scrollbar\\\">\\n    <table class=\\\"table table-bordered table-striped mb-0\\\">\\n\\n      <thead>\\n        <tr>\\n          <th *ngFor=\\\"let head of headElementsArt\\\" scope=\\\"col\\\">{{head}} </th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        <tr mdbTableCol *ngFor=\\\"let p of artList\\\">\\n          <!-- <th scope=\\\"row\\\">{{el.id}}</th> -->\\n          <td>{{p.productName}}</td>\\n          <td>{{p.description}}</td>\\n          <td>{{p.priceHtva}}</td>\\n          <!-- <td>{{p.categoryId}}</td> -->\\n          <td (click)=\\\"$event.stopPropagation()\\\">\\n            <button mat-icon-button [matMenuTriggerFor]=\\\"menu\\\" type=\\\"button\\\">\\n              <mat-icon>more_horiz</mat-icon>\\n            </button>\\n            <mat-menu #menu=\\\"matMenu\\\">\\n              <button mat-menu-item (click)=\\\"ModifyProduct(p)\\\" type=\\\"button\\\">\\n                <mat-icon>edit</mat-icon>\\n                <span>Modifier</span>\\n              </button>\\n              <button mat-menu-item (click)=\\\"DeleteProduct(p)\\\" type=\\\"button\\\">\\n                <mat-icon>delete</mat-icon>\\n                <span>Supprimer</span>\\n              </button>\\n            </mat-menu>\\n          </td>\\n        </tr>\\n      </tbody>\\n    </table>\\n\\n  </div>\\n  <div class=\\\"card-footer text-muted\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"CreateProduct()\\\">Nouvelle article</button>\\n  </div>\\n</div>\";"],"names":[],"sourceRoot":"webpack:///"}