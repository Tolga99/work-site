{"version":3,"file":"src_app_articles_articles_module_ts.js","mappings":"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","sources":["./src/app/articles/articles-routing.module.ts","./src/app/articles/articles.module.ts","./src/app/articles/articles.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { Articles } from './articles';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Articles\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ArticlesRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ArticlesRoutingModule } from './articles-routing.module';\n\nimport { Articles } from './articles';\nimport { SharedModule } from '../shared/shared.module';\nimport { MaterialModule } from '../material.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ArticlesRoutingModule,\n    SharedModule,MaterialModule\n  ],\n  declarations: [Articles]\n})\nexport class ArticlesModule {}\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { isThursday } from 'date-fns';\r\nimport { threadId } from 'worker_threads';\r\nimport { NgbdModalFocus } from '../modal/modal-focus';\r\nimport { Category } from '../models/category';\r\nimport { Product } from '../models/product';\r\nimport { StorageService } from '../services/storage.service';\r\n\r\n@Component({\r\n  selector: 'app-articles',\r\n  templateUrl: './articles.html',\r\n  styleUrls: ['./articles.scss'],\r\n})\r\nexport class Articles implements OnInit {\r\n\r\n  public allowedPageSizes = [5, 10, 15];\r\n  displayMode = 'full';\r\n  showPageSizeSelector = true;\r\n  showInfo = true;\r\n  showNavButtons = true;\r\n  \r\n  artList : Array<Product> = [];\r\n  catList : Array<Category> = [];\r\n  actualCat : Category = null;\r\n  openCatAccordion = null;\r\n  public modal = new NgbdModalFocus(this.modalS);\r\n  constructor(private modalS : NgbModal,private storageService:StorageService, private router:Router,private route:ActivatedRoute)\r\n  {\r\n  }\r\n\r\n  async ionViewDidEnter(){\r\n    this.artList = await this.storageService.get('Articles');\r\n\r\n    this.catList = await this.storageService.get('Categories');\r\n    if(this.catList!=null)\r\n    {\r\n      this.actualCat =this.catList.find(a => a.categoryId === this.route.snapshot.paramMap.get('actualCat'));\r\n      this.EnterCategory(this.actualCat);\r\n    }\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.storageService.init();\r\n    this.artList = [];\r\n    this.catList = await this.storageService.get('Categories');\r\n    if(this.catList!=null)\r\n    {\r\n      this.catList = this.catList.filter(a => a.categoryParent == null);\r\n      this.openCatAccordion = 'categories';\r\n    }else this.openCatAccordion = '';\r\n    this.catList.forEach(element => {\r\n      if(element.categoryImage==null)\r\n        element.categoryImage='..//resources//White-square.jpg';\r\n      \r\n    });\r\n  }\r\n  CreateCategory()\r\n  {\r\n    console.log('Bouton nv cat');\r\n    if(this.actualCat!=null)\r\n      this.router.navigate(['category-form',{actualCat : this.actualCat.categoryId}],{replaceUrl:true});\r\n    else this.router.navigate(['category-form']);\r\n  }\r\n  ModifyCategory(c : Category)\r\n  {\r\n    console.log(c);\r\n    if(c!=null)\r\n      this.router.navigate(['category-form',\r\n                          {actualCat : this.actualCat?.categoryId,modifCat: c?.categoryId, modif: 'YES'}],\r\n                          {replaceUrl:true});\r\n    else this.router.navigate(['category-form',{modif: 'YES'}],{replaceUrl:true});\r\n\r\n  }\r\n  async EnterCategory(c : Category)\r\n  {\r\n    this.actualCat = c;\r\n    this.artList = await this.storageService.get('Articles'); // Dans les 2 cas on a besoin de la liste complete et actualisée\r\n    if(this.actualCat==null)\r\n    {\r\n      this.catList = await this.storageService.get('Categories');\r\n      if(this.catList!=null)\r\n        this.catList = this.catList.filter(a => a.categoryParent == null);\r\n    }else\r\n    {\r\n      this.catList = this.actualCat.subCategories;\r\n      if(this.artList!=null)\r\n        this.artList = this.artList.filter(a => a.categoryId === this.actualCat.categoryId);\r\n    }\r\n    // + refresh la liste en dessous avec les articles filtrés AUSSI\r\n  }\r\n  async BackCategory()\r\n  {\r\n    if(this.actualCat==null)\r\n      this.EnterCategory(null);\r\n    else this.EnterCategory(this.actualCat.categoryParent);\r\n    // REfresh articles\r\n  }\r\n  CreateProduct()\r\n  {\r\n    if(this.actualCat!=null)\r\n      this.router.navigate(['article-form',{actualCat : this.actualCat.categoryId}],{replaceUrl:true});\r\n    else this.router.navigate(['article-form']);\r\n  }\r\n  ModifyProduct(p : Product)\r\n  {\r\n    console.log(p);\r\n    if(p!=null)\r\n      this.router.navigate(['article-form',{modifArt: p.productId, modif: 'YES'}],{replaceUrl:true});\r\n    else this.router.navigate(['article-form',{modif: 'YES'}],{replaceUrl:true});\r\n  }\r\n  async DeleteProduct(p : Product)\r\n  {\r\n    let res : string =null;\r\n    await this.modal.open('delArt',p.productName)\r\n    .then(result => result.result\r\n      .then((data) => {\r\n        res='OK';\r\n      }, (reason) => {\r\n      res='DISMISS' }\r\n      ));\r\n\r\n    if(res==='DISMISS')\r\n        return ;\r\n\r\n  }\r\n  async DeleteCategory(c : Category)\r\n  {\r\n    let res : string =null;\r\n    await this.modal.open('delCat',c.categoryName)\r\n    .then(result => result.result\r\n      .then((data) => {\r\n        res='OK';\r\n      }, (reason) => {\r\n      res='DISMISS' }\r\n      ));\r\n\r\n    if(res==='DISMISS')\r\n        return ;\r\n\r\n  }\r\n}"],"names":["Component","ActivatedRoute","Router","NgbModal","NgbdModalFocus","StorageService","Articles","constructor","modalS","storageService","router","route","ionViewDidEnter","artList","get","catList","actualCat","find","a","categoryId","snapshot","paramMap","EnterCategory","ngOnInit","init","filter","categoryParent","openCatAccordion","forEach","element","categoryImage","CreateCategory","console","log","navigate","replaceUrl","ModifyCategory","c","modifCat","modif","subCategories","BackCategory","CreateProduct","ModifyProduct","p","modifArt","productId","DeleteProduct","res","modal","open","productName","then","result","data","reason","DeleteCategory","categoryName","selector","template"],"sourceRoot":"webpack:///"}