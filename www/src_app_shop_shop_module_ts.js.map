{"version":3,"file":"src_app_shop_shop_module_ts.js","mappings":"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","sources":["./src/app/models/shoppingCart.ts","./src/app/services/methods.service.ts","./src/app/shop/shop-routing.module.ts","./src/app/shop/shop.module.ts","./src/app/shop/shop.ts","./node_modules/angular2-uuid/index.js"],"sourcesContent":["import { Product } from \"./product\";\r\n\r\nexport interface IShoppingCart\r\n{\r\n    cartId : string;\r\n    product : Product;\r\n    quantity : number;\r\n}\r\n\r\nexport class ShoppingCart implements IShoppingCart {\r\n    constructor(\r\n        public cartId : string,\r\n        public product : Product,\r\n        public quantity : number,\r\n    ) {\r\n    }\r\n  }","import { Injectable } from '@angular/core';\r\nimport { Directory, Filesystem } from '@capacitor/filesystem';\r\nimport jsPDF from 'jspdf';\r\nimport { Chantier } from '../models/chantier';\r\nimport { Facture } from '../models/facture';\r\nimport { User } from '../models/user';\r\nimport { StorageService } from './storage.service';\r\nimport { ToastController} from '@ionic/angular';\r\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MethodsService {\r\n\r\n  constructor() { }\r\n    isNullOrEmpty(text : string) {\r\n    if(text === '' || text === null || text === undefined)\r\n        return true;\r\n    else return false;\r\n  }\r\n  equals(text1 : string, text2 : string) {\r\n    console.log(text1,text2);\r\n    if(text1 === '' || text1 === null || text1 === undefined)\r\n    {\r\n        if(text2 === '' || text2 === null || text2 === undefined)\r\n        {\r\n            return true;\r\n        }\r\n    }else\r\n    {\r\n        if(text1 === text2)\r\n        {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { Shop } from './shop';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Shop\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ShopRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ShopRoutingModule } from './shop-routing.module';\n\nimport { Shop } from './shop';\nimport { SharedModule } from '../shared/shared.module';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ShopRoutingModule,\n    SharedModule,\n    MatCardModule,\n    MatIconModule,\n    MatMenuModule,\n  ],\n  declarations: [Shop]\n})\nexport class ShopModule {}\n","import { Component, OnInit } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, ActivatedRouteSnapshot, Router } from '@angular/router';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport list from 'devextreme/ui/list';\r\nimport { NgbdModalFocus } from '../modal/modal-focus';\r\nimport { Category } from '../models/category';\r\nimport { Chantier } from '../models/chantier';\r\nimport { Facture } from '../models/facture';\r\nimport { Product } from '../models/product';\r\nimport { ShoppingCart } from '../models/shoppingCart';\r\nimport { MethodsService } from '../services/methods.service';\r\nimport { StorageService } from '../services/storage.service';\r\nimport { UUID } from 'angular2-uuid';\r\nimport { NavController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-shop',\r\n  templateUrl: './shop.html',\r\n  styleUrls: ['./shop.scss'],\r\n})\r\nexport class Shop implements OnInit {\r\n  uuidValue: string;\r\n\r\n  public allowedPageSizes = [5, 10, 15];\r\n  displayMode = 'full';\r\n  showPageSizeSelector = true;\r\n  showInfo = true;\r\n  showNavButtons = true;\r\n\r\n  headElementsArt = ['Nom article', 'Description','Prix Unitaire',''];\r\n  headElementsArtCart = ['Nom article', 'Description','Prix Unitaire','Quantité','Prix total',''];\r\n  artList : Array<Product> = [];\r\n  panierList : Array<ShoppingCart> = [];\r\n  catList : Array<Category> = [];\r\n  actualCat : Category = null;\r\n  openCatAccordion = '';\r\n  invoiceId : string;\r\n  chantierId : string;\r\n  type : string;\r\n\r\n  invName : string;\r\n  invRemise : string;\r\n  invTypePay : string;\r\n  invTva : string;\r\n  invDescription : string;\r\n  panierEmpty = 'YES';\r\n  numericNumberReg= '^-?[0-9]\\\\d*(\\\\.\\\\d{1,2})?$';\r\n  formArt = new UntypedFormGroup({\r\n    productName: new UntypedFormControl('',Validators.required),\r\n    description: new UntypedFormControl(''),\r\n    priceHtva: new UntypedFormControl('',Validators.pattern(this.numericNumberReg)),\r\n  });\r\n  initialPanier :Array<ShoppingCart> = [];\r\n  public modal = new NgbdModalFocus(this.modalS);\r\n  constructor(private modalS :NgbModal,private storageService:StorageService,\r\n    private router:Router,private route:ActivatedRoute, private methodsService : MethodsService\r\n    , private navController : NavController)\r\n  {\r\n  }\r\n  generateUUID()\r\n  {\r\n      this.uuidValue=UUID.UUID();\r\n      return this.uuidValue;\r\n  }\r\n  async ionViewDidEnter(){\r\n    this.catList = await this.storageService.get('Categories');\r\n    this.actualCat =this.catList.find(a => a.categoryId === this.route.snapshot.paramMap.get('actualCat'));\r\n\r\n    this.EnterCategory(this.actualCat);\r\n\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.storageService.init();\r\n    this.artList = await this.storageService.get('Articles');\r\n    this.catList = await this.storageService.get('Categories');\r\n\r\n    this.chantierId = this.route.snapshot.paramMap.get('chantierId');\r\n    console.log(this.chantierId);\r\n    this.invoiceId = this.route.snapshot.paramMap.get('invoiceId');\r\n    this.type = this.route.snapshot.paramMap.get('type');\r\n\r\n    this.invName = this.route.snapshot.paramMap.get('factureName');\r\n    this.invTva = this.route.snapshot.paramMap.get('tva');\r\n    this.invTypePay = this.route.snapshot.paramMap.get('typePay');\r\n    this.invRemise = this.route.snapshot.paramMap.get('remise');\r\n    this.invDescription = this.route.snapshot.paramMap.get('description');\r\n\r\n    if(this.chantierId != null && this.chantierId != 'null' && this.invoiceId != null)\r\n    {\r\n      let chantierList : Chantier[] = await this.storageService.get('Chantiers');\r\n      if(chantierList?.find(a => a.chantierId === this.chantierId).factures?.find(b => b.factureId === this.invoiceId)?.cart != null)\r\n      {\r\n        this.panierList = chantierList.find(a => a.chantierId === this.chantierId).factures.find(b => b.factureId === this.invoiceId).cart;\r\n        this.panierList.forEach(a => this.initialPanier.push(a));\r\n        this.panierEmpty = 'NO';\r\n      }\r\n    }else if(this.chantierId === 'null')\r\n    {\r\n      let invoicesList : Facture[] = await this.storageService.get('NAfactures');\r\n      if(invoicesList.find(a => a.factureId === this.invoiceId).cart != null)\r\n      {\r\n        this.panierList = invoicesList.find(a => a.factureId === this.invoiceId).cart;\r\n        console.log(this.panierList, invoicesList, this.invoiceId);\r\n        this.panierList.forEach(a => this.initialPanier.push(a));\r\n        this.panierEmpty = 'NO';\r\n      }\r\n    }\r\n    if(this.panierList == null)\r\n    {\r\n      this.panierList = new Array<ShoppingCart>();\r\n      this.initialPanier = new Array<ShoppingCart>();\r\n      this.panierEmpty = 'YES';\r\n    }\r\n\r\n    if(this.catList!=null)\r\n      this.catList = this.catList.filter(a => a.categoryParent == null);\r\n    this.openCatAccordion = this.catList == null ? '' : 'categories';\r\n    }\r\n  async EnterCategory(c : Category)\r\n  {\r\n    this.actualCat = c;\r\n    this.artList = await this.storageService.get('Articles'); // Dans les 2 cas on a besoin de la liste complete et actualisée\r\n    this.catList = await this.storageService.get('Categories');\r\n    if(this.actualCat==null)\r\n    {\r\n      if(this.catList!=null)\r\n        this.catList = this.catList.filter(a => a.catLevel === 0);\r\n    }else\r\n    {\r\n      this.catList = this.catList.filter(a => c.categoryParent === a.categoryParent && a.catLevel === c.catLevel + 1);\r\n      if(this.artList!=null)\r\n        this.artList = this.artList.filter(a => a.categoryParent.categoryId === this.actualCat.categoryId);\r\n    }\r\n    // + refresh la liste en dessous avec les articles filtrés AUSSI\r\n  }\r\n  async BackCategory()\r\n  {\r\n    if(this.actualCat==null)\r\n      this.EnterCategory(null);\r\n    else this.EnterCategory(this.actualCat.categoryParent);\r\n    // REfresh articles\r\n  }\r\n  CreateProduct()\r\n  {\r\n    if(this.actualCat!=null)\r\n      this.navController.navigateBack(['article-form',{actualCat : this.actualCat.categoryId}],{replaceUrl:true});\r\n    else this.navController.navigateBack(['article-form']);\r\n  }\r\n\r\n  AddProduct(p : Product)\r\n  {\r\n    const indexExist = this.panierList.findIndex(a => a.product.productId === p.productId);\r\n    if(indexExist === -1)\r\n    {\r\n      this.panierList.push(new ShoppingCart(this.generateUUID(),p,1));\r\n    }else\r\n    {\r\n      this.panierList[indexExist].quantity += 1;\r\n    }\r\n  }\r\n  RemoveProduct(p : ShoppingCart)\r\n  {\r\n    const indexExist = this.panierList.findIndex(a => a.product.productId === p.product.productId);\r\n    if(this.panierList[indexExist].quantity === 1)\r\n    {\r\n      this.panierList.splice(this.panierList.findIndex(a => a.product.productId === p.product.productId),1);\r\n    }else\r\n    {\r\n      this.panierList[indexExist].quantity -= 1;\r\n    }\r\n  }\r\n  async SavePanier()\r\n  {\r\n    let listInv : Array<Facture>;\r\n    console.log('ID chantier : ',this.chantierId);\r\n    if(this.chantierId !== null && this.chantierId !== 'null')\r\n    {\r\n      const chantierl : Array<Chantier> = await this.storageService.get('Chantiers');\r\n      const chantier = chantierl.find(a => a.chantierId === this.chantierId);\r\n      const chantierIndex = chantierl.findIndex(a => a.chantierId === this.chantierId);\r\n      console.log('chantier :', chantier);\r\n      if(this.type === 'facture')\r\n        listInv= chantier.factures;\r\n      else listInv = chantier.devis;\r\n    }else\r\n    {\r\n      listInv = await this.storageService.get('NAfactures');\r\n    }\r\n    // let listInv : Array<Facture> = await this.storageService.get(\"Invoices=\"+this.chantierId);\r\n    let newInv : Facture;\r\n    console.log('listInv :',listInv,this.invoiceId);\r\n    if(listInv!=null)\r\n    {\r\n      const inv = listInv.find(a => a.factureId === this.invoiceId);\r\n      let invIndex : number;\r\n      if(inv!=null)\r\n      {\r\n        invIndex= listInv.findIndex(a => a.factureId === this.invoiceId);\r\n        console.log('old panier : ',inv.cart);\r\n        console.log('new panier :', this.panierList);\r\n        inv.cart= this.panierList;\r\n        newInv = inv;\r\n        listInv[invIndex]= inv;\r\n        console.log('new ListInv',listInv,inv,invIndex);\r\n      }else\r\n      {\r\n        newInv = new Facture(this.invoiceId,\r\n                                  null,\r\n                                  null,\r\n                                  null,\r\n                                  null,\r\n                                  null,\r\n                                  null,\r\n                                  null,\r\n                                  null,\r\n                                  null,\r\n                                  null,\r\n                                  this.panierList,\r\n                                  'creation',\r\n                                  this.type);\r\n        listInv.push(newInv);\r\n      }\r\n    }\r\n    else\r\n    {\r\n      listInv = new Array<Facture>();\r\n      newInv = new Facture(this.invoiceId,\r\n        null,\r\n        null,\r\n        null,\r\n        null,\r\n        null,\r\n        null,\r\n        null,\r\n        null,\r\n        null,\r\n        null,\r\n        this.panierList,\r\n        'creation',\r\n        this.type);\r\n      listInv.push(newInv);\r\n    }\r\n    if(this.chantierId !== null && this.chantierId !== 'null')\r\n    {\r\n      const chantierl : Array<Chantier> = await this.storageService.get('Chantiers');\r\n      const chantier = chantierl.find(a => a.chantierId === this.chantierId);\r\n      const chantierIndex = chantierl.findIndex(a => a.chantierId === this.chantierId);\r\n\r\n      if(this.type === 'facture')\r\n        chantier.factures= listInv;\r\n      else chantier.devis= listInv;\r\n      chantierl[chantierIndex] = chantier;\r\n      console.log('saving panier for chantier :',chantier,listInv);\r\n      this.storageService.set('Chantiers',chantierl);\r\n      this.navController.navigateBack(['/invoice',\r\n                          {invoiceId: this.invoiceId,type: this.type, chantierId : this.chantierId, mode:'false', comeFromShop : 'true'\r\n                          ,factureName : this.invName, remise : this.invRemise,\r\n                          tva : this.invTva, description : this.invDescription,\r\n                          typePay : this.invTypePay}],\r\n                          {replaceUrl:true});\r\n    }else\r\n    {\r\n      let invs : Array<Facture> = await this.storageService.get('NAfactures');\r\n      if(invs === null)\r\n      {\r\n        invs = new Array<Facture>();\r\n      }\r\n      invs = listInv;\r\n      console.log('saving new List :',listInv,invs);\r\n      this.storageService.set('NAfactures',invs);\r\n      this.navController.navigateBack(['/invoice',\r\n                          {invoiceId: this.invoiceId,type: this.type, chantierId : this.chantierId, mode:'false', comeFromShop : 'true'\r\n                          ,factureName : this.invName, remise : this.invRemise,\r\n                          tva : this.invTva, description : this.invDescription,\r\n                          typePay : this.invTypePay}],\r\n                          {replaceUrl:true});    }\r\n  }\r\n\r\n  async GoBack()\r\n  {\r\n    var result : string | undefined;\r\n    if(this.panierEmpty === 'YES')\r\n    {\r\n      let cpt = 0;\r\n      console.log(this.initialPanier,this.panierList);\r\n      if(this.initialPanier.length !== this.panierList.length)\r\n      {\r\n        cpt ++;\r\n      }\r\n      console.log(cpt);\r\n      if(cpt > 0)\r\n      {\r\n        result = await this.GoBackModal();\r\n      }\r\n    }else\r\n    {\r\n      let samePanier = true;\r\n      console.log(this.initialPanier,this.panierList);\r\n      this.panierList.forEach(a =>\r\n        {\r\n          if(!this.initialPanier.includes(a))\r\n          {\r\n            samePanier = false;\r\n            console.log(a,this.initialPanier);\r\n          }\r\n        });\r\n      if(!samePanier)\r\n      {\r\n        result = await this.GoBackModal();\r\n      }\r\n    }\r\n    console.log(result);\r\n    if(result !== null)\r\n      this.navController.navigateBack(['invoice',\r\n    {invoiceId: this.invoiceId,type: this.type, chantierId : this.chantierId, mode:'false', comeFromShop : 'true'\r\n    ,factureName : this.invName, remise : this.invRemise,\r\n    tva : this.invTva, description : this.invDescription,\r\n    typePay : this.invTypePay}],\r\n    {replaceUrl:true});\r\n}\r\n  async GoBackModal() : Promise<string>\r\n  {\r\n    let res : string =null;\r\n    await this.modal.open('exitPage','')\r\n    .then(result => result.result\r\n      .then((data) => {\r\n        res='OK';\r\n      }, (reason) => {\r\n      res='DISMISS'; }\r\n      ));\r\n    if(res === 'DISMISS')\r\n        return null;\r\n    return '';\r\n  }\r\n  async AddFastProduct()\r\n  {\r\n    const invalid = [];\r\n    const controls = this.formArt.controls;\r\n    for (const name in controls) {\r\n      if (controls[name].invalid) {\r\n        let nom='';\r\n        if(name==='productName')\r\n          nom='Nom article';\r\n        if(name==='priceHtva')\r\n          nom='Prix HTVA';\r\n        invalid.push(nom);\r\n      }\r\n    }\r\n    var priceString : string = this.formArt.get('priceHtva').value;\r\n    while(priceString.includes(','))\r\n    {\r\n      priceString = priceString.replace(',','.');\r\n    }\r\n    this.formArt.get('priceHtva').setValue(priceString);\r\n    var price = Number.parseFloat(priceString);\r\n\r\n    console.log(price);\r\n    if (!this.formArt.valid || Number.isNaN(price))\r\n    {\r\n      let res : string =null;\r\n      await this.modal.open('field',invalid.toString())\r\n      .then(result => result.result\r\n        .then((data) => {\r\n          res='OK';\r\n        }, (reason) => {\r\n        res='DISMISS' }\r\n        ));\r\n        return;\r\n    }else console.log(this.formArt.get('priceHtva').value);\r\n    let p = new Product(\r\n      '-1',\r\n      this.formArt.get('productName').value,\r\n      this.formArt.get('description').value,\r\n      this.formArt.get('priceHtva').value,\r\n      null,\r\n      null,\r\n      0\r\n    );\r\n    this.panierList.push(new ShoppingCart(this.generateUUID(),p,1));\r\n\r\n  }\r\n}","\"use strict\";\nvar UUID = (function () {\n    function UUID() {\n        // no-op\n    }\n    UUID.UUID = function () {\n        if (typeof (window) !== \"undefined\" && typeof (window.crypto) !== \"undefined\" && typeof (window.crypto.getRandomValues) !== \"undefined\") {\n            // If we have a cryptographically secure PRNG, use that\n            // http://stackoverflow.com/questions/6906916/collisions-when-generating-uuids-in-javascript\n            var buf = new Uint16Array(8);\n            window.crypto.getRandomValues(buf);\n            return (this.pad4(buf[0]) + this.pad4(buf[1]) + \"-\" + this.pad4(buf[2]) + \"-\" + this.pad4(buf[3]) + \"-\" + this.pad4(buf[4]) + \"-\" + this.pad4(buf[5]) + this.pad4(buf[6]) + this.pad4(buf[7]));\n        }\n        else {\n            // Otherwise, just use Math.random\n            // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n            // https://stackoverflow.com/questions/11605068/why-does-jshint-argue-against-bitwise-operators-how-should-i-express-this-code\n            return this.random4() + this.random4() + \"-\" + this.random4() + \"-\" + this.random4() + \"-\" +\n                this.random4() + \"-\" + this.random4() + this.random4() + this.random4();\n        }\n    };\n    UUID.pad4 = function (num) {\n        var ret = num.toString(16);\n        while (ret.length < 4) {\n            ret = \"0\" + ret;\n        }\n        return ret;\n    };\n    UUID.random4 = function () {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    };\n    return UUID;\n}());\nexports.UUID = UUID;\n"],"names":["Component","UntypedFormControl","UntypedFormGroup","Validators","ActivatedRoute","Router","NgbModal","NgbdModalFocus","Facture","Product","ShoppingCart","MethodsService","StorageService","UUID","NavController","Shop","constructor","modalS","storageService","router","route","methodsService","navController","productName","required","description","priceHtva","pattern","numericNumberReg","generateUUID","uuidValue","ionViewDidEnter","catList","get","actualCat","find","a","categoryId","snapshot","paramMap","EnterCategory","ngOnInit","init","artList","chantierId","console","log","invoiceId","type","invName","invTva","invTypePay","invRemise","invDescription","chantierList","factures","b","factureId","cart","panierList","forEach","initialPanier","push","panierEmpty","invoicesList","Array","filter","categoryParent","openCatAccordion","c","catLevel","BackCategory","CreateProduct","navigateBack","replaceUrl","AddProduct","p","indexExist","findIndex","product","productId","quantity","RemoveProduct","splice","SavePanier","listInv","chantierl","chantier","chantierIndex","devis","newInv","inv","invIndex","set","mode","comeFromShop","factureName","remise","tva","typePay","invs","GoBack","result","cpt","length","GoBackModal","samePanier","includes","res","modal","open","then","data","reason","AddFastProduct","invalid","controls","formArt","name","nom","priceString","value","replace","setValue","price","Number","parseFloat","valid","isNaN","toString","selector","template","window","crypto","getRandomValues","buf","Uint16Array","pad4","random4","num","ret","Math","floor","random","substring","exports"],"sourceRoot":"webpack:///"}