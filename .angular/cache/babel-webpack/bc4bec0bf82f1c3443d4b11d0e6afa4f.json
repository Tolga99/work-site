{"ast":null,"code":"/**\r\n * DevExtreme (ui/toolbar/ui.toolbar.base.js)\r\n * Version: 19.1.15\r\n * Build date: Tue Apr 26 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _uiCollection_widget = require(\"../collection/ui.collection_widget.async\");\n\nvar _uiCollection_widget2 = _interopRequireDefault(_uiCollection_widget);\n\nvar _promise = require(\"../../core/polyfills/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _bindable_template = require(\"../widget/bindable_template\");\n\nvar _bindable_template2 = _interopRequireDefault(_bindable_template);\n\nvar _fx = require(\"../../animation/fx\");\n\nvar _fx2 = _interopRequireDefault(_fx);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar TOOLBAR_CLASS = \"dx-toolbar\";\nvar TOOLBAR_BEFORE_CLASS = \"dx-toolbar-before\";\nvar TOOLBAR_CENTER_CLASS = \"dx-toolbar-center\";\nvar TOOLBAR_AFTER_CLASS = \"dx-toolbar-after\";\nvar TOOLBAR_BOTTOM_CLASS = \"dx-toolbar-bottom\";\nvar TOOLBAR_MINI_CLASS = \"dx-toolbar-mini\";\nvar TOOLBAR_ITEM_CLASS = \"dx-toolbar-item\";\nvar TOOLBAR_LABEL_CLASS = \"dx-toolbar-label\";\nvar TOOLBAR_BUTTON_CLASS = \"dx-toolbar-button\";\nvar TOOLBAR_ITEMS_CONTAINER_CLASS = \"dx-toolbar-items-container\";\nvar TOOLBAR_GROUP_CLASS = \"dx-toolbar-group\";\nvar TOOLBAR_COMPACT_CLASS = \"dx-toolbar-compact\";\nvar TOOLBAR_LABEL_SELECTOR = \".\" + TOOLBAR_LABEL_CLASS;\nvar TEXT_BUTTON_MODE = \"text\";\nvar DEFAULT_BUTTON_TYPE = \"default\";\nvar TOOLBAR_ITEM_DATA_KEY = \"dxToolbarItemDataKey\";\n\nvar ToolbarBase = _uiCollection_widget2.default.inherit({\n  compactMode: false,\n  ctor: function (element, options) {\n    this._userOptions = options || {};\n    this.callBase(element, options);\n  },\n  _getSynchronizableOptionsForCreateComponent: function () {\n    return this.callBase().filter(function (item) {\n      return \"disabled\" !== item;\n    });\n  },\n  _initTemplates: function () {\n    this.callBase();\n    var template = new _bindable_template2.default(function ($container, data, rawModel) {\n      if ((0, _type.isPlainObject)(data)) {\n        if (data.text) {\n          $container.text(data.text).wrapInner(\"<div>\");\n        }\n\n        if (data.html) {\n          $container.html(data.html);\n        }\n\n        if (\"dxButton\" === data.widget) {\n          if (this.option(\"useFlatButtons\")) {\n            data.options = data.options || {};\n            data.options.stylingMode = data.options.stylingMode || TEXT_BUTTON_MODE;\n          }\n\n          if (this.option(\"useDefaultButtons\")) {\n            data.options = data.options || {};\n            data.options.type = data.options.type || DEFAULT_BUTTON_TYPE;\n          }\n        }\n      } else {\n        $container.text(String(data));\n      }\n\n      this._getTemplate(\"dx-polymorph-widget\").render({\n        container: $container,\n        model: rawModel,\n        parent: this\n      });\n    }.bind(this), [\"text\", \"html\", \"widget\", \"options\"], this.option(\"integrationOptions.watchMethod\"));\n    this._defaultTemplates.item = template;\n    this._defaultTemplates.menuItem = template;\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      renderAs: \"topToolbar\",\n      grouped: false,\n      useFlatButtons: false,\n      useDefaultButtons: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return _themes2.default.isMaterial();\n      },\n      options: {\n        useFlatButtons: true\n      }\n    }]);\n  },\n  _itemContainer: function () {\n    return this._$toolbarItemsContainer.find([\".\" + TOOLBAR_BEFORE_CLASS, \".\" + TOOLBAR_CENTER_CLASS, \".\" + TOOLBAR_AFTER_CLASS].join(\",\"));\n  },\n  _itemClass: function () {\n    return TOOLBAR_ITEM_CLASS;\n  },\n  _itemDataKey: function () {\n    return TOOLBAR_ITEM_DATA_KEY;\n  },\n  _buttonClass: function () {\n    return TOOLBAR_BUTTON_CLASS;\n  },\n  _dimensionChanged: function () {\n    this._arrangeItems();\n\n    this._applyCompactMode();\n  },\n  _initMarkup: function () {\n    this._renderToolbar();\n\n    this._renderSections();\n\n    this.callBase();\n    this.setAria(\"role\", \"toolbar\");\n  },\n  _waitParentAnimationFinished: function () {\n    var $element = this.$element();\n    var timeout = 15;\n    return new _promise2.default(function (resolve) {\n      var check = function () {\n        var readyToResolve = true;\n        $element.parents().each(function (_, parent) {\n          if (_fx2.default.isAnimating((0, _renderer2.default)(parent))) {\n            readyToResolve = false;\n            return false;\n          }\n        });\n\n        if (readyToResolve) {\n          resolve();\n        }\n\n        return readyToResolve;\n      };\n\n      var runCheck = function runCheck() {\n        setTimeout(function () {\n          return check() || runCheck();\n        }, timeout);\n      };\n\n      $element.width() > 0 && check() || runCheck();\n    });\n  },\n  _render: function () {\n    this.callBase();\n\n    this._renderItemsAsync();\n\n    if (_themes2.default.isMaterial()) {\n      _promise2.default.all([this._waitParentAnimationFinished(), this._checkWebFontForLabelsLoaded()]).then(this._dimensionChanged.bind(this));\n    }\n  },\n  _postProcessRenderItems: function () {\n    this._arrangeItems();\n  },\n  _renderToolbar: function () {\n    this.$element().addClass(TOOLBAR_CLASS).toggleClass(TOOLBAR_BOTTOM_CLASS, \"bottomToolbar\" === this.option(\"renderAs\"));\n    this._$toolbarItemsContainer = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_ITEMS_CONTAINER_CLASS).appendTo(this.$element());\n  },\n  _renderSections: function () {\n    var $container = this._$toolbarItemsContainer;\n    var that = this;\n    (0, _iterator.each)([\"before\", \"center\", \"after\"], function () {\n      var sectionClass = \"dx-toolbar-\" + this;\n      var $section = $container.find(\".\" + sectionClass);\n\n      if (!$section.length) {\n        that[\"_$\" + this + \"Section\"] = $section = (0, _renderer2.default)(\"<div>\").addClass(sectionClass).appendTo($container);\n      }\n    });\n  },\n  _checkWebFontForLabelsLoaded: function () {\n    var $labels = this.$element().find(TOOLBAR_LABEL_SELECTOR);\n    var promises = [];\n    $labels.each(function (_, label) {\n      var text = (0, _renderer2.default)(label).text();\n      var fontWeight = (0, _renderer2.default)(label).css(\"fontWeight\");\n      promises.push(_themes2.default.waitWebFont(text, fontWeight));\n    });\n    return _promise2.default.all(promises);\n  },\n  _arrangeItems: function (elementWidth) {\n    elementWidth = elementWidth || this.$element().width();\n\n    this._$centerSection.css({\n      margin: \"0 auto\",\n      \"float\": \"none\"\n    });\n\n    var beforeRect = this._$beforeSection.get(0).getBoundingClientRect();\n\n    var afterRect = this._$afterSection.get(0).getBoundingClientRect();\n\n    this._alignCenterSection(beforeRect, afterRect, elementWidth);\n\n    var $label = this._$toolbarItemsContainer.find(TOOLBAR_LABEL_SELECTOR).eq(0);\n\n    var $section = $label.parent();\n\n    if (!$label.length) {\n      return;\n    }\n\n    var labelOffset = beforeRect.width ? beforeRect.width : $label.position().left;\n    var widthBeforeSection = $section.hasClass(TOOLBAR_BEFORE_CLASS) ? 0 : labelOffset;\n    var widthAfterSection = $section.hasClass(TOOLBAR_AFTER_CLASS) ? 0 : afterRect.width;\n    var elemsAtSectionWidth = 0;\n    $section.children().not(TOOLBAR_LABEL_SELECTOR).each(function () {\n      elemsAtSectionWidth += (0, _renderer2.default)(this).outerWidth();\n    });\n    var freeSpace = elementWidth - elemsAtSectionWidth;\n    var sectionMaxWidth = Math.max(freeSpace - widthBeforeSection - widthAfterSection, 0);\n\n    if ($section.hasClass(TOOLBAR_BEFORE_CLASS)) {\n      this._alignSection(this._$beforeSection, sectionMaxWidth);\n    } else {\n      var labelPaddings = $label.outerWidth() - $label.width();\n      $label.css(\"maxWidth\", sectionMaxWidth - labelPaddings);\n    }\n  },\n  _alignCenterSection: function (beforeRect, afterRect, elementWidth) {\n    this._alignSection(this._$centerSection, elementWidth - beforeRect.width - afterRect.width);\n\n    var isRTL = this.option(\"rtlEnabled\");\n    var leftRect = isRTL ? afterRect : beforeRect;\n    var rightRect = isRTL ? beforeRect : afterRect;\n\n    var centerRect = this._$centerSection.get(0).getBoundingClientRect();\n\n    if (leftRect.right > centerRect.left || centerRect.right > rightRect.left) {\n      this._$centerSection.css({\n        marginLeft: leftRect.width,\n        marginRight: rightRect.width,\n        \"float\": leftRect.width > rightRect.width ? \"none\" : \"right\"\n      });\n    }\n  },\n  _alignSection: function ($section, maxWidth) {\n    var $labels = $section.find(TOOLBAR_LABEL_SELECTOR);\n    var labels = $labels.toArray();\n    maxWidth -= this._getCurrentLabelsPaddings(labels);\n\n    var currentWidth = this._getCurrentLabelsWidth(labels);\n\n    var difference = Math.abs(currentWidth - maxWidth);\n\n    if (maxWidth < currentWidth) {\n      labels = labels.reverse();\n\n      this._alignSectionLabels(labels, difference, false);\n    } else {\n      this._alignSectionLabels(labels, difference, true);\n    }\n  },\n  _alignSectionLabels: function (labels, difference, expanding) {\n    var getRealLabelWidth = function (label) {\n      return label.getBoundingClientRect().width;\n    };\n\n    for (var i = 0; i < labels.length; i++) {\n      var $label = (0, _renderer2.default)(labels[i]);\n      var currentLabelWidth = Math.ceil(getRealLabelWidth(labels[i]));\n      var labelMaxWidth;\n\n      if (expanding) {\n        $label.css(\"maxWidth\", \"inherit\");\n      }\n\n      var possibleLabelWidth = Math.ceil(expanding ? getRealLabelWidth(labels[i]) : currentLabelWidth);\n\n      if (possibleLabelWidth < difference) {\n        labelMaxWidth = expanding ? possibleLabelWidth : 0;\n        difference -= possibleLabelWidth;\n      } else {\n        labelMaxWidth = expanding ? currentLabelWidth + difference : currentLabelWidth - difference;\n        $label.css(\"maxWidth\", labelMaxWidth);\n        break;\n      }\n\n      $label.css(\"maxWidth\", labelMaxWidth);\n    }\n  },\n  _applyCompactMode: function () {\n    var $element = this.$element();\n    $element.removeClass(TOOLBAR_COMPACT_CLASS);\n\n    if (this.option(\"compactMode\") && this._getSummaryItemsWidth(this.itemElements(), true) > $element.width()) {\n      $element.addClass(TOOLBAR_COMPACT_CLASS);\n    }\n  },\n  _getCurrentLabelsWidth: function (labels) {\n    var width = 0;\n    labels.forEach(function (label, index) {\n      width += (0, _renderer2.default)(label).outerWidth();\n    });\n    return width;\n  },\n  _getCurrentLabelsPaddings: function (labels) {\n    var padding = 0;\n    labels.forEach(function (label, index) {\n      padding += (0, _renderer2.default)(label).outerWidth() - (0, _renderer2.default)(label).width();\n    });\n    return padding;\n  },\n  _renderItem: function (index, item, itemContainer, $after) {\n    var location = item.location || \"center\";\n    var container = itemContainer || this[\"_$\" + location + \"Section\"];\n    var itemHasText = !!(item.text || item.html);\n    var itemElement = this.callBase(index, item, container, $after);\n    itemElement.toggleClass(this._buttonClass(), !itemHasText).toggleClass(TOOLBAR_LABEL_CLASS, itemHasText).addClass(item.cssClass);\n    return itemElement;\n  },\n  _renderGroupedItems: function () {\n    var that = this;\n    (0, _iterator.each)(this.option(\"items\"), function (groupIndex, group) {\n      var groupItems = group.items;\n      var $container = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_GROUP_CLASS);\n      var location = group.location || \"center\";\n\n      if (!groupItems || !groupItems.length) {\n        return;\n      }\n\n      (0, _iterator.each)(groupItems, function (itemIndex, item) {\n        that._renderItem(itemIndex, item, $container, null);\n      });\n\n      that._$toolbarItemsContainer.find(\".dx-toolbar-\" + location).append($container);\n    });\n  },\n  _renderItems: function (items) {\n    var grouped = this.option(\"grouped\") && items.length && items[0].items;\n    grouped ? this._renderGroupedItems() : this.callBase(items);\n  },\n  _getToolbarItems: function () {\n    return this.option(\"items\") || [];\n  },\n  _renderContentImpl: function () {\n    var items = this._getToolbarItems();\n\n    this.$element().toggleClass(TOOLBAR_MINI_CLASS, 0 === items.length);\n\n    if (this._renderedItemsCount) {\n      this._renderItems(items.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(items);\n    }\n\n    this._applyCompactMode();\n  },\n  _renderEmptyMessage: _common2.default.noop,\n  _clean: function () {\n    this._$toolbarItemsContainer.children().empty();\n\n    this.$element().empty();\n  },\n  _visibilityChanged: function (visible) {\n    if (visible) {\n      this._arrangeItems();\n    }\n  },\n  _isVisible: function () {\n    return this.$element().width() > 0 && this.$element().height() > 0;\n  },\n  _getIndexByItem: function (item) {\n    return (0, _array.inArray)(item, this._getToolbarItems());\n  },\n  _itemOptionChanged: function (item, property, value) {\n    this.callBase.apply(this, [item, property, value]);\n\n    this._arrangeItems();\n  },\n  _optionChanged: function (args) {\n    var name = args.name;\n\n    switch (name) {\n      case \"width\":\n        this.callBase.apply(this, arguments);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"renderAs\":\n      case \"useFlatButtons\":\n      case \"useDefaultButtons\":\n        this._invalidate();\n\n        break;\n\n      case \"compactMode\":\n        this._applyCompactMode();\n\n        break;\n\n      case \"grouped\":\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  }\n});\n\n(0, _component_registrator2.default)(\"dxToolbarBase\", ToolbarBase);\nmodule.exports = ToolbarBase;","map":{"version":3,"sources":["C:/Users/t_olg/Desktop/Tolga/Ov/Projets/DevisApp/work-site/node_modules/devextreme/ui/toolbar/ui.toolbar.base.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_themes","_themes2","_common","_common2","_type","_component_registrator","_component_registrator2","_array","_extend","_iterator","_uiCollection_widget","_uiCollection_widget2","_promise","_promise2","_bindable_template","_bindable_template2","_fx","_fx2","obj","__esModule","TOOLBAR_CLASS","TOOLBAR_BEFORE_CLASS","TOOLBAR_CENTER_CLASS","TOOLBAR_AFTER_CLASS","TOOLBAR_BOTTOM_CLASS","TOOLBAR_MINI_CLASS","TOOLBAR_ITEM_CLASS","TOOLBAR_LABEL_CLASS","TOOLBAR_BUTTON_CLASS","TOOLBAR_ITEMS_CONTAINER_CLASS","TOOLBAR_GROUP_CLASS","TOOLBAR_COMPACT_CLASS","TOOLBAR_LABEL_SELECTOR","TEXT_BUTTON_MODE","DEFAULT_BUTTON_TYPE","TOOLBAR_ITEM_DATA_KEY","ToolbarBase","default","inherit","compactMode","ctor","element","options","_userOptions","callBase","_getSynchronizableOptionsForCreateComponent","filter","item","_initTemplates","template","$container","data","rawModel","isPlainObject","text","wrapInner","html","widget","option","stylingMode","type","String","_getTemplate","render","container","model","parent","bind","_defaultTemplates","menuItem","_getDefaultOptions","extend","renderAs","grouped","useFlatButtons","useDefaultButtons","_defaultOptionsRules","concat","device","isMaterial","_itemContainer","_$toolbarItemsContainer","find","join","_itemClass","_itemDataKey","_buttonClass","_dimensionChanged","_arrangeItems","_applyCompactMode","_initMarkup","_renderToolbar","_renderSections","setAria","_waitParentAnimationFinished","$element","timeout","resolve","check","readyToResolve","parents","each","_","isAnimating","runCheck","setTimeout","width","_render","_renderItemsAsync","all","_checkWebFontForLabelsLoaded","then","_postProcessRenderItems","addClass","toggleClass","appendTo","that","sectionClass","$section","length","$labels","promises","label","fontWeight","css","push","waitWebFont","elementWidth","_$centerSection","margin","beforeRect","_$beforeSection","get","getBoundingClientRect","afterRect","_$afterSection","_alignCenterSection","$label","eq","labelOffset","position","left","widthBeforeSection","hasClass","widthAfterSection","elemsAtSectionWidth","children","not","outerWidth","freeSpace","sectionMaxWidth","Math","max","_alignSection","labelPaddings","isRTL","leftRect","rightRect","centerRect","right","marginLeft","marginRight","maxWidth","labels","toArray","_getCurrentLabelsPaddings","currentWidth","_getCurrentLabelsWidth","difference","abs","reverse","_alignSectionLabels","expanding","getRealLabelWidth","i","currentLabelWidth","ceil","labelMaxWidth","possibleLabelWidth","removeClass","_getSummaryItemsWidth","itemElements","forEach","index","padding","_renderItem","itemContainer","$after","location","itemHasText","itemElement","cssClass","_renderGroupedItems","groupIndex","group","groupItems","items","itemIndex","append","_renderItems","_getToolbarItems","_renderContentImpl","_renderedItemsCount","slice","_renderEmptyMessage","noop","_clean","empty","_visibilityChanged","visible","_isVisible","height","_getIndexByItem","inArray","_itemOptionChanged","property","value","apply","_optionChanged","args","name","arguments","_invalidate","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/toolbar/ui.toolbar.base.js)\r\n * Version: 19.1.15\r\n * Build date: Tue Apr 26 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _common2 = _interopRequireDefault(_common);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _uiCollection_widget = require(\"../collection/ui.collection_widget.async\");\r\nvar _uiCollection_widget2 = _interopRequireDefault(_uiCollection_widget);\r\nvar _promise = require(\"../../core/polyfills/promise\");\r\nvar _promise2 = _interopRequireDefault(_promise);\r\nvar _bindable_template = require(\"../widget/bindable_template\");\r\nvar _bindable_template2 = _interopRequireDefault(_bindable_template);\r\nvar _fx = require(\"../../animation/fx\");\r\nvar _fx2 = _interopRequireDefault(_fx);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar TOOLBAR_CLASS = \"dx-toolbar\";\r\nvar TOOLBAR_BEFORE_CLASS = \"dx-toolbar-before\";\r\nvar TOOLBAR_CENTER_CLASS = \"dx-toolbar-center\";\r\nvar TOOLBAR_AFTER_CLASS = \"dx-toolbar-after\";\r\nvar TOOLBAR_BOTTOM_CLASS = \"dx-toolbar-bottom\";\r\nvar TOOLBAR_MINI_CLASS = \"dx-toolbar-mini\";\r\nvar TOOLBAR_ITEM_CLASS = \"dx-toolbar-item\";\r\nvar TOOLBAR_LABEL_CLASS = \"dx-toolbar-label\";\r\nvar TOOLBAR_BUTTON_CLASS = \"dx-toolbar-button\";\r\nvar TOOLBAR_ITEMS_CONTAINER_CLASS = \"dx-toolbar-items-container\";\r\nvar TOOLBAR_GROUP_CLASS = \"dx-toolbar-group\";\r\nvar TOOLBAR_COMPACT_CLASS = \"dx-toolbar-compact\";\r\nvar TOOLBAR_LABEL_SELECTOR = \".\" + TOOLBAR_LABEL_CLASS;\r\nvar TEXT_BUTTON_MODE = \"text\";\r\nvar DEFAULT_BUTTON_TYPE = \"default\";\r\nvar TOOLBAR_ITEM_DATA_KEY = \"dxToolbarItemDataKey\";\r\nvar ToolbarBase = _uiCollection_widget2.default.inherit({\r\n    compactMode: false,\r\n    ctor: function(element, options) {\r\n        this._userOptions = options || {};\r\n        this.callBase(element, options)\r\n    },\r\n    _getSynchronizableOptionsForCreateComponent: function() {\r\n        return this.callBase().filter(function(item) {\r\n            return \"disabled\" !== item\r\n        })\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        var template = new _bindable_template2.default(function($container, data, rawModel) {\r\n            if ((0, _type.isPlainObject)(data)) {\r\n                if (data.text) {\r\n                    $container.text(data.text).wrapInner(\"<div>\")\r\n                }\r\n                if (data.html) {\r\n                    $container.html(data.html)\r\n                }\r\n                if (\"dxButton\" === data.widget) {\r\n                    if (this.option(\"useFlatButtons\")) {\r\n                        data.options = data.options || {};\r\n                        data.options.stylingMode = data.options.stylingMode || TEXT_BUTTON_MODE\r\n                    }\r\n                    if (this.option(\"useDefaultButtons\")) {\r\n                        data.options = data.options || {};\r\n                        data.options.type = data.options.type || DEFAULT_BUTTON_TYPE\r\n                    }\r\n                }\r\n            } else {\r\n                $container.text(String(data))\r\n            }\r\n            this._getTemplate(\"dx-polymorph-widget\").render({\r\n                container: $container,\r\n                model: rawModel,\r\n                parent: this\r\n            })\r\n        }.bind(this), [\"text\", \"html\", \"widget\", \"options\"], this.option(\"integrationOptions.watchMethod\"));\r\n        this._defaultTemplates.item = template;\r\n        this._defaultTemplates.menuItem = template\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            renderAs: \"topToolbar\",\r\n            grouped: false,\r\n            useFlatButtons: false,\r\n            useDefaultButtons: false\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return _themes2.default.isMaterial()\r\n            },\r\n            options: {\r\n                useFlatButtons: true\r\n            }\r\n        }])\r\n    },\r\n    _itemContainer: function() {\r\n        return this._$toolbarItemsContainer.find([\".\" + TOOLBAR_BEFORE_CLASS, \".\" + TOOLBAR_CENTER_CLASS, \".\" + TOOLBAR_AFTER_CLASS].join(\",\"))\r\n    },\r\n    _itemClass: function() {\r\n        return TOOLBAR_ITEM_CLASS\r\n    },\r\n    _itemDataKey: function() {\r\n        return TOOLBAR_ITEM_DATA_KEY\r\n    },\r\n    _buttonClass: function() {\r\n        return TOOLBAR_BUTTON_CLASS\r\n    },\r\n    _dimensionChanged: function() {\r\n        this._arrangeItems();\r\n        this._applyCompactMode()\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderToolbar();\r\n        this._renderSections();\r\n        this.callBase();\r\n        this.setAria(\"role\", \"toolbar\")\r\n    },\r\n    _waitParentAnimationFinished: function() {\r\n        var $element = this.$element();\r\n        var timeout = 15;\r\n        return new _promise2.default(function(resolve) {\r\n            var check = function() {\r\n                var readyToResolve = true;\r\n                $element.parents().each(function(_, parent) {\r\n                    if (_fx2.default.isAnimating((0, _renderer2.default)(parent))) {\r\n                        readyToResolve = false;\r\n                        return false\r\n                    }\r\n                });\r\n                if (readyToResolve) {\r\n                    resolve()\r\n                }\r\n                return readyToResolve\r\n            };\r\n            var runCheck = function runCheck() {\r\n                setTimeout(function() {\r\n                    return check() || runCheck()\r\n                }, timeout)\r\n            };\r\n            $element.width() > 0 && check() || runCheck()\r\n        })\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._renderItemsAsync();\r\n        if (_themes2.default.isMaterial()) {\r\n            _promise2.default.all([this._waitParentAnimationFinished(), this._checkWebFontForLabelsLoaded()]).then(this._dimensionChanged.bind(this))\r\n        }\r\n    },\r\n    _postProcessRenderItems: function() {\r\n        this._arrangeItems()\r\n    },\r\n    _renderToolbar: function() {\r\n        this.$element().addClass(TOOLBAR_CLASS).toggleClass(TOOLBAR_BOTTOM_CLASS, \"bottomToolbar\" === this.option(\"renderAs\"));\r\n        this._$toolbarItemsContainer = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_ITEMS_CONTAINER_CLASS).appendTo(this.$element())\r\n    },\r\n    _renderSections: function() {\r\n        var $container = this._$toolbarItemsContainer;\r\n        var that = this;\r\n        (0, _iterator.each)([\"before\", \"center\", \"after\"], function() {\r\n            var sectionClass = \"dx-toolbar-\" + this;\r\n            var $section = $container.find(\".\" + sectionClass);\r\n            if (!$section.length) {\r\n                that[\"_$\" + this + \"Section\"] = $section = (0, _renderer2.default)(\"<div>\").addClass(sectionClass).appendTo($container)\r\n            }\r\n        })\r\n    },\r\n    _checkWebFontForLabelsLoaded: function() {\r\n        var $labels = this.$element().find(TOOLBAR_LABEL_SELECTOR);\r\n        var promises = [];\r\n        $labels.each(function(_, label) {\r\n            var text = (0, _renderer2.default)(label).text();\r\n            var fontWeight = (0, _renderer2.default)(label).css(\"fontWeight\");\r\n            promises.push(_themes2.default.waitWebFont(text, fontWeight))\r\n        });\r\n        return _promise2.default.all(promises)\r\n    },\r\n    _arrangeItems: function(elementWidth) {\r\n        elementWidth = elementWidth || this.$element().width();\r\n        this._$centerSection.css({\r\n            margin: \"0 auto\",\r\n            \"float\": \"none\"\r\n        });\r\n        var beforeRect = this._$beforeSection.get(0).getBoundingClientRect();\r\n        var afterRect = this._$afterSection.get(0).getBoundingClientRect();\r\n        this._alignCenterSection(beforeRect, afterRect, elementWidth);\r\n        var $label = this._$toolbarItemsContainer.find(TOOLBAR_LABEL_SELECTOR).eq(0);\r\n        var $section = $label.parent();\r\n        if (!$label.length) {\r\n            return\r\n        }\r\n        var labelOffset = beforeRect.width ? beforeRect.width : $label.position().left;\r\n        var widthBeforeSection = $section.hasClass(TOOLBAR_BEFORE_CLASS) ? 0 : labelOffset;\r\n        var widthAfterSection = $section.hasClass(TOOLBAR_AFTER_CLASS) ? 0 : afterRect.width;\r\n        var elemsAtSectionWidth = 0;\r\n        $section.children().not(TOOLBAR_LABEL_SELECTOR).each(function() {\r\n            elemsAtSectionWidth += (0, _renderer2.default)(this).outerWidth()\r\n        });\r\n        var freeSpace = elementWidth - elemsAtSectionWidth;\r\n        var sectionMaxWidth = Math.max(freeSpace - widthBeforeSection - widthAfterSection, 0);\r\n        if ($section.hasClass(TOOLBAR_BEFORE_CLASS)) {\r\n            this._alignSection(this._$beforeSection, sectionMaxWidth)\r\n        } else {\r\n            var labelPaddings = $label.outerWidth() - $label.width();\r\n            $label.css(\"maxWidth\", sectionMaxWidth - labelPaddings)\r\n        }\r\n    },\r\n    _alignCenterSection: function(beforeRect, afterRect, elementWidth) {\r\n        this._alignSection(this._$centerSection, elementWidth - beforeRect.width - afterRect.width);\r\n        var isRTL = this.option(\"rtlEnabled\");\r\n        var leftRect = isRTL ? afterRect : beforeRect;\r\n        var rightRect = isRTL ? beforeRect : afterRect;\r\n        var centerRect = this._$centerSection.get(0).getBoundingClientRect();\r\n        if (leftRect.right > centerRect.left || centerRect.right > rightRect.left) {\r\n            this._$centerSection.css({\r\n                marginLeft: leftRect.width,\r\n                marginRight: rightRect.width,\r\n                \"float\": leftRect.width > rightRect.width ? \"none\" : \"right\"\r\n            })\r\n        }\r\n    },\r\n    _alignSection: function($section, maxWidth) {\r\n        var $labels = $section.find(TOOLBAR_LABEL_SELECTOR);\r\n        var labels = $labels.toArray();\r\n        maxWidth -= this._getCurrentLabelsPaddings(labels);\r\n        var currentWidth = this._getCurrentLabelsWidth(labels);\r\n        var difference = Math.abs(currentWidth - maxWidth);\r\n        if (maxWidth < currentWidth) {\r\n            labels = labels.reverse();\r\n            this._alignSectionLabels(labels, difference, false)\r\n        } else {\r\n            this._alignSectionLabels(labels, difference, true)\r\n        }\r\n    },\r\n    _alignSectionLabels: function(labels, difference, expanding) {\r\n        var getRealLabelWidth = function(label) {\r\n            return label.getBoundingClientRect().width\r\n        };\r\n        for (var i = 0; i < labels.length; i++) {\r\n            var $label = (0, _renderer2.default)(labels[i]);\r\n            var currentLabelWidth = Math.ceil(getRealLabelWidth(labels[i]));\r\n            var labelMaxWidth;\r\n            if (expanding) {\r\n                $label.css(\"maxWidth\", \"inherit\")\r\n            }\r\n            var possibleLabelWidth = Math.ceil(expanding ? getRealLabelWidth(labels[i]) : currentLabelWidth);\r\n            if (possibleLabelWidth < difference) {\r\n                labelMaxWidth = expanding ? possibleLabelWidth : 0;\r\n                difference -= possibleLabelWidth\r\n            } else {\r\n                labelMaxWidth = expanding ? currentLabelWidth + difference : currentLabelWidth - difference;\r\n                $label.css(\"maxWidth\", labelMaxWidth);\r\n                break\r\n            }\r\n            $label.css(\"maxWidth\", labelMaxWidth)\r\n        }\r\n    },\r\n    _applyCompactMode: function() {\r\n        var $element = this.$element();\r\n        $element.removeClass(TOOLBAR_COMPACT_CLASS);\r\n        if (this.option(\"compactMode\") && this._getSummaryItemsWidth(this.itemElements(), true) > $element.width()) {\r\n            $element.addClass(TOOLBAR_COMPACT_CLASS)\r\n        }\r\n    },\r\n    _getCurrentLabelsWidth: function(labels) {\r\n        var width = 0;\r\n        labels.forEach(function(label, index) {\r\n            width += (0, _renderer2.default)(label).outerWidth()\r\n        });\r\n        return width\r\n    },\r\n    _getCurrentLabelsPaddings: function(labels) {\r\n        var padding = 0;\r\n        labels.forEach(function(label, index) {\r\n            padding += (0, _renderer2.default)(label).outerWidth() - (0, _renderer2.default)(label).width()\r\n        });\r\n        return padding\r\n    },\r\n    _renderItem: function(index, item, itemContainer, $after) {\r\n        var location = item.location || \"center\";\r\n        var container = itemContainer || this[\"_$\" + location + \"Section\"];\r\n        var itemHasText = !!(item.text || item.html);\r\n        var itemElement = this.callBase(index, item, container, $after);\r\n        itemElement.toggleClass(this._buttonClass(), !itemHasText).toggleClass(TOOLBAR_LABEL_CLASS, itemHasText).addClass(item.cssClass);\r\n        return itemElement\r\n    },\r\n    _renderGroupedItems: function() {\r\n        var that = this;\r\n        (0, _iterator.each)(this.option(\"items\"), function(groupIndex, group) {\r\n            var groupItems = group.items;\r\n            var $container = (0, _renderer2.default)(\"<div>\").addClass(TOOLBAR_GROUP_CLASS);\r\n            var location = group.location || \"center\";\r\n            if (!groupItems || !groupItems.length) {\r\n                return\r\n            }(0, _iterator.each)(groupItems, function(itemIndex, item) {\r\n                that._renderItem(itemIndex, item, $container, null)\r\n            });\r\n            that._$toolbarItemsContainer.find(\".dx-toolbar-\" + location).append($container)\r\n        })\r\n    },\r\n    _renderItems: function(items) {\r\n        var grouped = this.option(\"grouped\") && items.length && items[0].items;\r\n        grouped ? this._renderGroupedItems() : this.callBase(items)\r\n    },\r\n    _getToolbarItems: function() {\r\n        return this.option(\"items\") || []\r\n    },\r\n    _renderContentImpl: function() {\r\n        var items = this._getToolbarItems();\r\n        this.$element().toggleClass(TOOLBAR_MINI_CLASS, 0 === items.length);\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(items.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(items)\r\n        }\r\n        this._applyCompactMode()\r\n    },\r\n    _renderEmptyMessage: _common2.default.noop,\r\n    _clean: function() {\r\n        this._$toolbarItemsContainer.children().empty();\r\n        this.$element().empty()\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        if (visible) {\r\n            this._arrangeItems()\r\n        }\r\n    },\r\n    _isVisible: function() {\r\n        return this.$element().width() > 0 && this.$element().height() > 0\r\n    },\r\n    _getIndexByItem: function(item) {\r\n        return (0, _array.inArray)(item, this._getToolbarItems())\r\n    },\r\n    _itemOptionChanged: function(item, property, value) {\r\n        this.callBase.apply(this, [item, property, value]);\r\n        this._arrangeItems()\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        switch (name) {\r\n            case \"width\":\r\n                this.callBase.apply(this, arguments);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"renderAs\":\r\n            case \"useFlatButtons\":\r\n            case \"useDefaultButtons\":\r\n                this._invalidate();\r\n                break;\r\n            case \"compactMode\":\r\n                this._applyCompactMode();\r\n                break;\r\n            case \"grouped\":\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxToolbarBase\", ToolbarBase);\r\nmodule.exports = ToolbarBase;\r\n"]},"metadata":{},"sourceType":"script"}