{"ast":null,"code":"/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.js)\r\n * Version: 19.1.15\r\n * Build date: Tue Apr 26 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _callbacks = require(\"../../core/utils/callbacks\");\n\nvar _callbacks2 = _interopRequireDefault(_callbacks);\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _translator2 = _interopRequireDefault(_translator);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _dialog = require(\"../dialog\");\n\nvar _dialog2 = _interopRequireDefault(_dialog);\n\nvar _utils = require(\"./utils.recurrence\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _dom2 = _interopRequireDefault(_dom);\n\nvar _date = require(\"../../core/utils/date\");\n\nvar _date2 = _interopRequireDefault(_date);\n\nvar _object = require(\"../../core/utils/object\");\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _devices = require(\"../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _config = require(\"../../core/config\");\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _date_serialization = require(\"../../core/utils/date_serialization\");\n\nvar _date_serialization2 = _interopRequireDefault(_date_serialization);\n\nvar _date3 = require(\"../../localization/date\");\n\nvar _date4 = _interopRequireDefault(_date3);\n\nvar _ui3 = require(\"../widget/ui.widget\");\n\nvar _ui4 = _interopRequireDefault(_ui3);\n\nvar _uiScheduler = require(\"./ui.scheduler.subscribes\");\n\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\n\nvar _function_template = require(\"../widget/function_template\");\n\nvar _function_template2 = _interopRequireDefault(_function_template);\n\nvar _desktopTooltipStrategy = require(\"./tooltip_strategies/desktopTooltipStrategy\");\n\nvar _mobileTooltipStrategy = require(\"./tooltip_strategies/mobileTooltipStrategy\");\n\nvar _uiScheduler3 = require(\"./ui.scheduler.header\");\n\nvar _uiScheduler4 = _interopRequireDefault(_uiScheduler3);\n\nvar _uiScheduler5 = require(\"./workspaces/ui.scheduler.work_space_day\");\n\nvar _uiScheduler6 = _interopRequireDefault(_uiScheduler5);\n\nvar _uiScheduler7 = require(\"./workspaces/ui.scheduler.work_space_week\");\n\nvar _uiScheduler8 = _interopRequireDefault(_uiScheduler7);\n\nvar _uiScheduler9 = require(\"./workspaces/ui.scheduler.work_space_work_week\");\n\nvar _uiScheduler10 = _interopRequireDefault(_uiScheduler9);\n\nvar _uiScheduler11 = require(\"./workspaces/ui.scheduler.work_space_month\");\n\nvar _uiScheduler12 = _interopRequireDefault(_uiScheduler11);\n\nvar _uiScheduler13 = require(\"./workspaces/ui.scheduler.timeline_day\");\n\nvar _uiScheduler14 = _interopRequireDefault(_uiScheduler13);\n\nvar _uiScheduler15 = require(\"./workspaces/ui.scheduler.timeline_week\");\n\nvar _uiScheduler16 = _interopRequireDefault(_uiScheduler15);\n\nvar _uiScheduler17 = require(\"./workspaces/ui.scheduler.timeline_work_week\");\n\nvar _uiScheduler18 = _interopRequireDefault(_uiScheduler17);\n\nvar _uiScheduler19 = require(\"./workspaces/ui.scheduler.timeline_month\");\n\nvar _uiScheduler20 = _interopRequireDefault(_uiScheduler19);\n\nvar _uiScheduler21 = require(\"./workspaces/ui.scheduler.agenda\");\n\nvar _uiScheduler22 = _interopRequireDefault(_uiScheduler21);\n\nvar _uiScheduler23 = require(\"./ui.scheduler.resource_manager\");\n\nvar _uiScheduler24 = _interopRequireDefault(_uiScheduler23);\n\nvar _uiScheduler25 = require(\"./ui.scheduler.appointment_model\");\n\nvar _uiScheduler26 = _interopRequireDefault(_uiScheduler25);\n\nvar _uiScheduler27 = require(\"./ui.scheduler.appointments\");\n\nvar _uiScheduler28 = _interopRequireDefault(_uiScheduler27);\n\nvar _uiSchedulerAppointments = require(\"./ui.scheduler.appointments.layout_manager\");\n\nvar _uiSchedulerAppointments2 = _interopRequireDefault(_uiSchedulerAppointments);\n\nvar _compactAppointmentsHelper = require(\"./compactAppointmentsHelper\");\n\nvar _uiScheduler29 = require(\"./timezones/ui.scheduler.timezones\");\n\nvar _uiScheduler30 = _interopRequireDefault(_uiScheduler29);\n\nvar _async_template_mixin = require(\"../shared/async_template_mixin\");\n\nvar _async_template_mixin2 = _interopRequireDefault(_async_template_mixin);\n\nvar _data_helper = require(\"../../data_helper\");\n\nvar _data_helper2 = _interopRequireDefault(_data_helper);\n\nvar _ui5 = require(\"./ui.loading\");\n\nvar _ui6 = _interopRequireDefault(_ui5);\n\nvar _uiScheduler31 = require(\"./ui.scheduler.appointment_form\");\n\nvar _uiScheduler32 = _interopRequireDefault(_uiScheduler31);\n\nvar _popup = require(\"../popup\");\n\nvar _popup2 = _interopRequireDefault(_popup);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _deferred2 = _interopRequireDefault(_deferred);\n\nvar _empty_template = require(\"../widget/empty_template\");\n\nvar _empty_template2 = _interopRequireDefault(_empty_template);\n\nvar _bindable_template = require(\"../widget/bindable_template\");\n\nvar _bindable_template2 = _interopRequireDefault(_bindable_template);\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _browser = require(\"../../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _support = require(\"../../core/utils/support\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar when = _deferred2.default.when;\nvar Deferred = _deferred2.default.Deferred;\nvar toMs = _date2.default.dateToMilliseconds;\nvar WIDGET_CLASS = \"dx-scheduler\";\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\nvar WIDGET_WIN_NO_TOUCH_CLASS = \"\".concat(WIDGET_CLASS, \"-win-no-touch\");\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\nvar APPOINTMENT_POPUP_CLASS = \"\".concat(WIDGET_CLASS, \"-appointment-popup\");\nvar RECURRENCE_EDITOR_ITEM_CLASS = \"\".concat(WIDGET_CLASS, \"-recurrence-rule-item\");\nvar RECURRENCE_EDITOR_OPENED_ITEM_CLASS = \"\".concat(WIDGET_CLASS, \"-recurrence-rule-item-opened\");\nvar WIDGET_SMALL_WIDTH = 400;\nvar APPOINTMENT_POPUP_WIDTH = 610;\nvar APPOINTMENT_POPUP_FULLSCREEN_WINDOW_WIDTH = 768;\nvar TOOLBAR_ITEM_AFTER_LOCATION = \"after\";\nvar TOOLBAR_ITEM_BEFORE_LOCATION = \"before\";\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\nvar VIEWS_CONFIG = {\n  day: {\n    workSpace: _uiScheduler6.default,\n    renderingStrategy: \"vertical\"\n  },\n  week: {\n    workSpace: _uiScheduler8.default,\n    renderingStrategy: \"vertical\"\n  },\n  workWeek: {\n    workSpace: _uiScheduler10.default,\n    renderingStrategy: \"vertical\"\n  },\n  month: {\n    workSpace: _uiScheduler12.default,\n    renderingStrategy: \"horizontalMonth\"\n  },\n  timelineDay: {\n    workSpace: _uiScheduler14.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWeek: {\n    workSpace: _uiScheduler16.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineWorkWeek: {\n    workSpace: _uiScheduler18.default,\n    renderingStrategy: \"horizontal\"\n  },\n  timelineMonth: {\n    workSpace: _uiScheduler20.default,\n    renderingStrategy: \"horizontalMonthLine\"\n  },\n  agenda: {\n    workSpace: _uiScheduler22.default,\n    renderingStrategy: \"agenda\"\n  }\n};\n\nvar Scheduler = _ui4.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      views: [\"day\", \"week\"],\n      currentView: \"day\",\n      currentDate: _date2.default.trimTime(new Date()),\n      min: void 0,\n      max: void 0,\n      dateSerializationFormat: void 0,\n      firstDayOfWeek: void 0,\n      groups: [],\n      resources: [],\n      dataSource: null,\n      customizeDateNavigatorText: void 0,\n      appointmentTemplate: \"item\",\n      dropDownAppointmentTemplate: \"dropDownAppointment\",\n      appointmentCollectorTemplate: \"appointmentCollector\",\n      dataCellTemplate: null,\n      timeCellTemplate: null,\n      resourceCellTemplate: null,\n      dateCellTemplate: null,\n      startDayHour: 0,\n      endDayHour: 24,\n      editing: {\n        allowAdding: true,\n        allowDeleting: true,\n        allowDragging: true,\n        allowResizing: true,\n        allowUpdating: true\n      },\n      showAllDayPanel: true,\n      showCurrentTimeIndicator: true,\n      shadeUntilCurrentTime: false,\n      indicatorUpdateInterval: 3e5,\n      indicatorTime: void 0,\n      recurrenceEditMode: \"dialog\",\n      cellDuration: 30,\n      maxAppointmentsPerCell: \"auto\",\n      selectedCellData: [],\n      groupByDate: false,\n      onAppointmentRendered: null,\n      onAppointmentClick: null,\n      onAppointmentDblClick: null,\n      onAppointmentContextMenu: null,\n      onCellClick: null,\n      onCellContextMenu: null,\n      onAppointmentAdding: null,\n      onAppointmentAdded: null,\n      onAppointmentUpdating: null,\n      onAppointmentUpdated: null,\n      onAppointmentDeleting: null,\n      onAppointmentDeleted: null,\n      onAppointmentFormOpening: null,\n      appointmentTooltipTemplate: \"appointmentTooltip\",\n      appointmentPopupTemplate: \"appointmentPopup\",\n      crossScrollingEnabled: false,\n      useDropDownViewSwitcher: false,\n      startDateExpr: \"startDate\",\n      endDateExpr: \"endDate\",\n      textExpr: \"text\",\n      descriptionExpr: \"description\",\n      allDayExpr: \"allDay\",\n      recurrenceRuleExpr: \"recurrenceRule\",\n      recurrenceExceptionExpr: \"recurrenceException\",\n      remoteFiltering: false,\n      timeZone: \"\",\n      startDateTimeZoneExpr: \"startDateTimeZone\",\n      endDateTimeZoneExpr: \"endDateTimeZone\",\n      noDataText: _message2.default.format(\"dxCollectionWidget-noDataText\"),\n      adaptivityEnabled: false,\n      allowMultipleCellSelection: true,\n      _appointmentTooltipOffset: {\n        x: 0,\n        y: 0\n      },\n      _appointmentTooltipButtonsPosition: \"bottom\",\n      _appointmentTooltipOpenButtonText: _message2.default.format(\"dxScheduler-openAppointment\"),\n      _dropDownButtonIcon: \"overflow\",\n      _appointmentCountPerCell: 2,\n      _collectorOffset: 0,\n      _appointmentOffset: 26\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function () {\n        return !_devices2.default.current().generic;\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        editing: {\n          allowDragging: false,\n          allowResizing: false\n        }\n      }\n    }, {\n      device: function () {\n        return _themes2.default.isMaterial();\n      },\n      options: {\n        useDropDownViewSwitcher: true,\n        dateCellTemplate: function (data, index, element) {\n          var text = data.text;\n          text.split(\" \").forEach(function (text, index) {\n            var span = (0, _renderer2.default)(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\n            (0, _renderer2.default)(element).append(span);\n\n            if (!index) {\n              (0, _renderer2.default)(element).append(\" \");\n            }\n          });\n        },\n        _appointmentTooltipOffset: {\n          x: 0,\n          y: 11\n        },\n        _appointmentTooltipButtonsPosition: \"top\",\n        _appointmentTooltipOpenButtonText: null,\n        _dropDownButtonIcon: \"chevrondown\",\n        _appointmentCountPerCell: 1,\n        _collectorOffset: 20,\n        _appointmentOffset: 30\n      }\n    }]);\n  },\n  _setDeprecatedOptions: function () {\n    this.callBase();\n    (0, _extend.extend)(this._deprecatedOptions, {\n      onAppointmentFormCreated: {\n        since: \"18.2\",\n        alias: \"onAppointmentFormOpening\"\n      }\n    });\n  },\n  _postponeDataSourceLoading: function (promise) {\n    this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise);\n  },\n  _postponeResourceLoading: function () {\n    var _this = this;\n\n    var whenLoaded = this.postponedOperations.add(\"_loadResources\", function () {\n      return _this._loadResources();\n    });\n    var resolveCallbacks = new Deferred();\n    whenLoaded.done(function (resources) {\n      resolveCallbacks.resolve(resources);\n    });\n\n    this._postponeDataSourceLoading(whenLoaded);\n\n    return resolveCallbacks.promise();\n  },\n  _optionChanged: function (args) {\n    var _this2 = this;\n\n    var value = args.value;\n    var name = args.name;\n\n    switch (args.name) {\n      case \"customizeDateNavigatorText\":\n        this._updateOption(\"header\", name, value);\n\n        break;\n\n      case \"firstDayOfWeek\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this._updateOption(\"header\", name, value);\n\n        break;\n\n      case \"currentDate\":\n        value = this._dateOption(name);\n        value = _date2.default.trimTime(new Date(value));\n        this.option(\"selectedCellData\", []);\n\n        this._workSpace.option(name, new Date(value));\n\n        this._header.option(name, new Date(value));\n\n        this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\n\n        this._appointments.option(\"items\", []);\n\n        this._filterAppointmentsByDate();\n\n        this._postponeDataSourceLoading();\n\n        break;\n\n      case \"dataSource\":\n        this._initDataSource();\n\n        this._customizeStoreLoadOptions();\n\n        this._appointmentModel.setDataSource(this._dataSource);\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._filterAppointmentsByDate();\n\n          _this2._updateOption(\"workSpace\", \"showAllDayPanel\", _this2.option(\"showAllDayPanel\"));\n        });\n\n        break;\n\n      case \"min\":\n      case \"max\":\n        value = this._dateOption(name);\n\n        this._updateOption(\"header\", name, new Date(value));\n\n        this._updateOption(\"workSpace\", name, new Date(value));\n\n        break;\n\n      case \"views\":\n        this._processCurrentView();\n\n        if (this._getCurrentViewOptions()) {\n          this.repaint();\n        } else {\n          this._header.option(name, value);\n        }\n\n        break;\n\n      case \"useDropDownViewSwitcher\":\n        this._header.option(name, value);\n\n        break;\n\n      case \"currentView\":\n        this._processCurrentView();\n\n        this.getLayoutManager().initRenderingStrategy(this._getAppointmentsRenderingStrategy());\n\n        this._appointments.option({\n          items: [],\n          allowDrag: this._allowDragging(),\n          allowResize: this._allowResizing(),\n          itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\n        });\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._refreshWorkSpace(resources);\n\n          _this2._updateHeader();\n\n          _this2._filterAppointmentsByDate();\n\n          _this2._appointments.option(\"allowAllDayResize\", \"day\" !== value);\n        });\n\n        break;\n\n      case \"appointmentTemplate\":\n        this._appointments.option(\"itemTemplate\", value);\n\n        break;\n\n      case \"dateCellTemplate\":\n      case \"resourceCellTemplate\":\n      case \"dataCellTemplate\":\n      case \"timeCellTemplate\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this.repaint();\n        break;\n\n      case \"groups\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._refreshWorkSpace(resources);\n\n          _this2._filterAppointmentsByDate();\n        });\n\n        break;\n\n      case \"resources\":\n        this._resourcesManager.setResources(this.option(\"resources\"));\n\n        this._appointmentModel.setDataAccessors(this._combineDataAccessors());\n\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._appointments.option(\"items\", []);\n\n          _this2._refreshWorkSpace(resources);\n\n          _this2._filterAppointmentsByDate();\n        });\n\n        break;\n\n      case \"startDayHour\":\n      case \"endDayHour\":\n        this._appointments.option(\"items\", []);\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.repaint();\n\n        this._filterAppointmentsByDate();\n\n        this._postponeDataSourceLoading();\n\n        break;\n\n      case \"onAppointmentAdding\":\n      case \"onAppointmentAdded\":\n      case \"onAppointmentUpdating\":\n      case \"onAppointmentUpdated\":\n      case \"onAppointmentDeleting\":\n      case \"onAppointmentDeleted\":\n      case \"onAppointmentFormOpening\":\n        this._actions[name] = this._createActionByOption(name);\n        break;\n\n      case \"onAppointmentRendered\":\n        this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\n\n        break;\n\n      case \"onAppointmentClick\":\n        this._appointments.option(\"onItemClick\", this._createActionByOption(name));\n\n        break;\n\n      case \"onAppointmentDblClick\":\n        this._appointments.option(name, this._createActionByOption(name));\n\n        break;\n\n      case \"onAppointmentContextMenu\":\n        this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\n\n        break;\n\n      case \"noDataText\":\n      case \"allowMultipleCellSelection\":\n      case \"selectedCellData\":\n      case \"accessKey\":\n      case \"onCellClick\":\n        this._workSpace.option(name, value);\n\n        break;\n\n      case \"onCellContextMenu\":\n        this._workSpace.option(name, value);\n\n        break;\n\n      case \"crossScrollingEnabled\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._appointments.option(\"items\", []);\n\n          _this2._refreshWorkSpace(resources);\n\n          if (_this2._readyToRenderAppointments) {\n            _this2._appointments.option(\"items\", _this2._getAppointmentsToRepaint());\n          }\n        });\n\n        break;\n\n      case \"cellDuration\":\n        this._appointments.option(\"items\", []);\n\n        if (this._readyToRenderAppointments) {\n          this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\n\n          this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n        }\n\n        break;\n\n      case \"tabIndex\":\n      case \"focusStateEnabled\":\n        this._updateOption(\"header\", name, value);\n\n        this._updateOption(\"workSpace\", name, value);\n\n        this._appointments.option(name, value);\n\n        this.callBase(args);\n        break;\n\n      case \"width\":\n        this._updateOption(\"header\", name, value);\n\n        if (this.option(\"crossScrollingEnabled\")) {\n          this._updateOption(\"workSpace\", \"width\", value);\n        }\n\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"height\":\n        this.callBase(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"editing\":\n        this._initEditing();\n\n        var editing = this._editing;\n\n        this._bringEditingModeToAppointments(editing);\n\n        this.hideAppointmentTooltip();\n\n        this._cleanPopup();\n\n        break;\n\n      case \"showAllDayPanel\":\n        this._postponeResourceLoading().done(function (resources) {\n          _this2._filterAppointmentsByDate();\n\n          _this2._updateOption(\"workSpace\", \"allDayExpanded\", value);\n\n          _this2._updateOption(\"workSpace\", name, value);\n        });\n\n        break;\n\n      case \"showCurrentTimeIndicator\":\n      case \"indicatorTime\":\n      case \"indicatorUpdateInterval\":\n      case \"shadeUntilCurrentTime\":\n      case \"groupByDate\":\n        this._updateOption(\"workSpace\", name, value);\n\n        this.repaint();\n        break;\n\n      case \"appointmentTooltipTemplate\":\n      case \"appointmentPopupTemplate\":\n      case \"recurrenceEditMode\":\n      case \"remoteFiltering\":\n      case \"timeZone\":\n      case \"dropDownAppointmentTemplate\":\n      case \"appointmentCollectorTemplate\":\n      case \"_appointmentTooltipOffset\":\n      case \"_appointmentTooltipButtonsPosition\":\n      case \"_appointmentTooltipOpenButtonText\":\n      case \"_dropDownButtonIcon\":\n      case \"_appointmentCountPerCell\":\n      case \"_collectorOffset\":\n      case \"_appointmentOffset\":\n        this.repaint();\n        break;\n\n      case \"dateSerializationFormat\":\n        break;\n\n      case \"maxAppointmentsPerCell\":\n        break;\n\n      case \"startDateExpr\":\n      case \"endDateExpr\":\n      case \"startDateTimeZoneExpr\":\n      case \"endDateTimeZoneExpr\":\n      case \"textExpr\":\n      case \"descriptionExpr\":\n      case \"allDayExpr\":\n      case \"recurrenceRuleExpr\":\n      case \"recurrenceExceptionExpr\":\n        this._updateExpression(name, value);\n\n        this._appointmentModel.setDataAccessors(this._combineDataAccessors());\n\n        this._initAppointmentTemplate();\n\n        this.repaint();\n        break;\n\n      case \"adaptivityEnabled\":\n        this._toggleAdaptiveClass();\n\n        this.repaint();\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _updateHeader: function () {\n    var viewCountConfig = this._getViewCountConfig();\n\n    this._header.option(\"intervalCount\", viewCountConfig.intervalCount);\n\n    this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\n\n    this._header.option(\"min\", this._dateOption(\"min\"));\n\n    this._header.option(\"max\", this._dateOption(\"max\"));\n\n    this._header.option(\"currentDate\", this._dateOption(\"currentDate\"));\n\n    this._header.option(\"firstDayOfWeek\", this._getCurrentViewOption(\"firstDayOfWeek\"));\n\n    this._header.option(\"currentView\", this._currentView);\n  },\n  _dateOption: function (optionName) {\n    var optionValue = this._getCurrentViewOption(optionName);\n\n    return _date_serialization2.default.deserializeDate(optionValue);\n  },\n  _getSerializationFormat: function (optionName) {\n    var value = this._getCurrentViewOption(optionName);\n\n    if (\"number\" === typeof value) {\n      return \"number\";\n    }\n\n    if (!_type2.default.isString(value)) {\n      return;\n    }\n\n    return _date_serialization2.default.getDateSerializationFormat(value);\n  },\n  _bringEditingModeToAppointments: function (editing) {\n    var editingConfig = {\n      allowDelete: editing.allowUpdating && editing.allowDeleting\n    };\n\n    if (!this._isAgenda()) {\n      editingConfig.allowDrag = editing.allowDragging;\n      editingConfig.allowResize = editing.allowResizing;\n      editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing();\n    }\n\n    this._appointments.option(editingConfig);\n  },\n  _isAgenda: function () {\n    return \"agenda\" === this._getAppointmentsRenderingStrategy();\n  },\n  _allowDragging: function () {\n    return this._editing.allowDragging && !this._isAgenda();\n  },\n  _allowResizing: function () {\n    return this._editing.allowResizing && !this._isAgenda();\n  },\n  _allowAllDayResizing: function () {\n    return this._editing.allowResizing && this._supportAllDayResizing();\n  },\n  _supportAllDayResizing: function () {\n    return \"day\" !== this._getCurrentViewType() || this._currentView.intervalCount > 1;\n  },\n  _isAllDayExpanded: function (items) {\n    return this.option(\"showAllDayPanel\") && this._appointmentModel.hasAllDayAppointments(items, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"));\n  },\n  _getTimezoneOffsetByOption: function (date) {\n    return this._calculateTimezoneByValue(this.option(\"timeZone\"), date);\n  },\n  _calculateTimezoneByValue: function (timezone, date) {\n    var result = timezone;\n\n    if (\"string\" === typeof timezone) {\n      date = date || new Date();\n      var dateUtc = Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes());\n      result = _uiScheduler30.default.getTimezoneOffsetById(timezone, dateUtc);\n    }\n\n    return result;\n  },\n  _filterAppointmentsByDate: function () {\n    var dateRange = this._workSpace.getDateRange();\n\n    this._appointmentModel.filterByDate(dateRange[0], dateRange[1], this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"));\n  },\n  _loadResources: function () {\n    var groups = this._getCurrentViewOption(\"groups\");\n\n    var result = new Deferred();\n\n    this._resourcesManager.loadResources(groups).done(function (resources) {\n      this._loadedResources = resources;\n      result.resolve(resources);\n    }.bind(this));\n\n    return result.promise();\n  },\n  _dataSourceLoadedCallback: (0, _callbacks2.default)(),\n  _reloadDataSource: function () {\n    var result = new Deferred();\n\n    if (this._dataSource) {\n      this._dataSource.load().done(function () {\n        _ui6.default.hide();\n\n        this._fireContentReadyAction(result);\n      }.bind(this)).fail(function () {\n        _ui6.default.hide();\n\n        result.reject();\n      });\n\n      this._dataSource.isLoading() && _ui6.default.show({\n        container: this.$element(),\n        position: {\n          of: this.$element()\n        }\n      });\n    } else {\n      this._fireContentReadyAction(result);\n    }\n\n    return result.promise();\n  },\n  _fireContentReadyAction: function (result) {\n    this.callBase();\n    result && result.resolve();\n  },\n  _dimensionChanged: function () {\n    var filteredItems = this.getFilteredItems();\n\n    this._toggleSmallClass();\n\n    if (!this._isAgenda() && filteredItems && this._isVisible()) {\n      this._workSpace._cleanAllowedPositions();\n\n      this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(filteredItems));\n\n      this._workSpace._dimensionChanged();\n\n      var appointments = this._layoutManager.createAppointmentsMap(filteredItems);\n\n      this._appointments.option(\"items\", appointments);\n    }\n\n    this.hideAppointmentTooltip();\n    this.resizePopup();\n\n    this._updatePopupFullScreenMode();\n  },\n  _clean: function () {\n    this._cleanPopup();\n\n    this.callBase();\n  },\n  _toggleSmallClass: function () {\n    var width = this.$element().get(0).getBoundingClientRect().width;\n    this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH);\n  },\n  _toggleAdaptiveClass: function () {\n    this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"));\n  },\n  _visibilityChanged: function (visible) {\n    visible && this._dimensionChanged();\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _init: function () {\n    this._initExpressions({\n      startDate: this.option(\"startDateExpr\"),\n      endDate: this.option(\"endDateExpr\"),\n      startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\n      endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\n      allDay: this.option(\"allDayExpr\"),\n      text: this.option(\"textExpr\"),\n      description: this.option(\"descriptionExpr\"),\n      recurrenceRule: this.option(\"recurrenceRuleExpr\"),\n      recurrenceException: this.option(\"recurrenceExceptionExpr\")\n    });\n\n    this.callBase();\n\n    this._initDataSource();\n\n    this._loadedResources = [];\n    this._proxiedCustomizeStoreLoadOptionsHandler = this._customizeStoreLoadOptionsHandler.bind(this);\n\n    this._customizeStoreLoadOptions();\n\n    this.$element().addClass(WIDGET_CLASS).toggleClass(WIDGET_WIN_NO_TOUCH_CLASS, !!(_browser2.default.msie && _support.touch));\n\n    this._initEditing();\n\n    this._resourcesManager = new _uiScheduler24.default(this.option(\"resources\"));\n\n    var combinedDataAccessors = this._combineDataAccessors();\n\n    this._appointmentModel = new _uiScheduler26.default(this._dataSource, combinedDataAccessors, this.getAppointmentDurationInMinutes());\n\n    this._initActions();\n\n    this._compactAppointmentsHelper = new _compactAppointmentsHelper.CompactAppointmentsHelper(this);\n    this._subscribes = _uiScheduler2.default;\n  },\n  _initTemplates: function () {\n    this.callBase();\n\n    this._initAppointmentTemplate();\n\n    this._defaultTemplates.appointmentTooltip = new _empty_template2.default(this);\n    this._defaultTemplates.appointmentPopup = new _empty_template2.default(this);\n    this._defaultTemplates.dropDownAppointment = new _empty_template2.default(this);\n  },\n  _initAppointmentTemplate: function () {\n    var that = this;\n    this._defaultTemplates.item = new _bindable_template2.default(function ($container, data, model) {\n      var appointmentsInst = that.getAppointmentsInstance();\n\n      appointmentsInst._renderAppointmentTemplate.call(appointmentsInst, $container, data, model);\n    }, [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\n      text: this._dataAccessors.getter.text,\n      startDate: this._dataAccessors.getter.startDate,\n      endDate: this._dataAccessors.getter.endDate,\n      startDateTimeZone: this._dataAccessors.getter.startDateTimeZone,\n      endDateTimeZone: this._dataAccessors.getter.endDateTimeZone,\n      allDay: this._dataAccessors.getter.allDay,\n      recurrenceRule: this._dataAccessors.getter.recurrenceRule\n    });\n  },\n  _combineDataAccessors: function () {\n    var resourcesDataAccessors = this._resourcesManager._dataAccessors;\n    var result = (0, _extend.extend)(true, {}, this._dataAccessors);\n    (0, _iterator.each)(resourcesDataAccessors, function (type, accessor) {\n      result[type].resources = accessor;\n    }.bind(this));\n    return result;\n  },\n  _renderContent: function () {\n    this._renderContentImpl();\n  },\n  _dataSourceChangedHandler: function (result) {\n    if (this._readyToRenderAppointments) {\n      this._workSpaceRecalculation.done(function () {\n        this._filteredItems = this.fire(\"prerenderFilter\");\n\n        this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(this._filteredItems));\n\n        if (this._isAgenda()) {\n          this.getRenderingStrategyInstance().calculateRows(this._filteredItems, 7, this.option(\"currentDate\"), true);\n        }\n\n        if (this._filteredItems.length && this._isVisible()) {\n          this._appointments.option(\"items\", this._getAppointmentsToRepaint());\n\n          this._appointmentModel.cleanModelState();\n        } else {\n          this._appointments.option(\"items\", []);\n        }\n\n        if (this._isAgenda()) {\n          this._workSpace._renderView();\n\n          this._dataSourceLoadedCallback.fireWith(this, [result]);\n        }\n      }.bind(this));\n    }\n  },\n  _getAppointmentsToRepaint: function () {\n    var appointments = this._layoutManager.createAppointmentsMap(this._filteredItems);\n\n    return this._layoutManager.getRepaintedAppointments(appointments, this.getAppointmentsInstance().option(\"items\"));\n  },\n  _initExpressions: function (fields) {\n    var dataCoreUtils = require(\"../../core/utils/data\");\n\n    var isDateField = function (field) {\n      return \"startDate\" === field || \"endDate\" === field;\n    };\n\n    if (!this._dataAccessors) {\n      this._dataAccessors = {\n        getter: {},\n        setter: {},\n        expr: {}\n      };\n    }\n\n    (0, _iterator.each)(fields, function (name, expr) {\n      if (expr) {\n        var getter = dataCoreUtils.compileGetter(expr);\n        var setter = dataCoreUtils.compileSetter(expr);\n        var dateGetter;\n        var dateSetter;\n\n        if (isDateField(name)) {\n          var that = this;\n\n          dateGetter = function () {\n            var value = getter.apply(this, arguments);\n\n            if ((0, _config2.default)().forceIsoDateParsing) {\n              if (!that.option(\"dateSerializationFormat\")) {\n                var format = _date_serialization2.default.getDateSerializationFormat(value);\n\n                if (format) {\n                  that.option(\"dateSerializationFormat\", format);\n                }\n              }\n\n              value = _date_serialization2.default.deserializeDate(value);\n            }\n\n            return value;\n          };\n\n          dateSetter = function (object, value) {\n            if ((0, _config2.default)().forceIsoDateParsing || that.option(\"dateSerializationFormat\")) {\n              value = _date_serialization2.default.serializeDate(value, that.option(\"dateSerializationFormat\"));\n            }\n\n            setter.call(this, object, value);\n          };\n        }\n\n        this._dataAccessors.getter[name] = dateGetter || getter;\n        this._dataAccessors.setter[name] = dateSetter || setter;\n        this._dataAccessors.expr[name + \"Expr\"] = expr;\n      } else {\n        delete this._dataAccessors.getter[name];\n        delete this._dataAccessors.setter[name];\n        delete this._dataAccessors.expr[name + \"Expr\"];\n      }\n    }.bind(this));\n  },\n  _updateExpression: function (name, value) {\n    var exprObj = {};\n    exprObj[name.replace(\"Expr\", \"\")] = value;\n\n    this._initExpressions(exprObj);\n  },\n  _initEditing: function () {\n    var editing = this.option(\"editing\");\n    this._editing = {\n      allowAdding: !!editing,\n      allowUpdating: !!editing,\n      allowDeleting: !!editing,\n      allowResizing: !!editing,\n      allowDragging: !!editing\n    };\n\n    if (_type2.default.isObject(editing)) {\n      this._editing = (0, _extend.extend)(this._editing, editing);\n    }\n\n    this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\n    this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\n    this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly());\n  },\n  _isReadOnly: function () {\n    var result = true;\n    var editing = this._editing;\n\n    for (var prop in editing) {\n      if (Object.prototype.hasOwnProperty.call(editing, prop)) {\n        result = result && !editing[prop];\n      }\n    }\n\n    return result;\n  },\n  _customizeStoreLoadOptions: function () {\n    this._dataSource && this._dataSource.on(\"customizeStoreLoadOptions\", this._proxiedCustomizeStoreLoadOptionsHandler);\n  },\n  _dispose: function () {\n    this._appointmentTooltip && this._appointmentTooltip.dispose();\n    this.hideAppointmentPopup();\n    this.hideAppointmentTooltip();\n\n    this._cleanAsyncTemplatesTimer();\n\n    this._dataSource && this._dataSource.off(\"customizeStoreLoadOptions\", this._proxiedCustomizeStoreLoadOptionsHandler);\n    this.callBase();\n  },\n  _customizeStoreLoadOptionsHandler: function (options) {\n    options.storeLoadOptions.dxScheduler = {\n      startDate: this.getStartViewDate(),\n      endDate: this.getEndViewDate(),\n      resources: this.option(\"resources\")\n    };\n  },\n  _initActions: function () {\n    this._actions = {\n      onAppointmentAdding: this._createActionByOption(\"onAppointmentAdding\"),\n      onAppointmentAdded: this._createActionByOption(\"onAppointmentAdded\"),\n      onAppointmentUpdating: this._createActionByOption(\"onAppointmentUpdating\"),\n      onAppointmentUpdated: this._createActionByOption(\"onAppointmentUpdated\"),\n      onAppointmentDeleting: this._createActionByOption(\"onAppointmentDeleting\"),\n      onAppointmentDeleted: this._createActionByOption(\"onAppointmentDeleted\"),\n      onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\")\n    };\n  },\n  _getAppointmentRenderedAction: function () {\n    return this._createActionByOption(\"onAppointmentRendered\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _renderFocusTarget: _common.noop,\n  _initMarkup: function () {\n    this.callBase();\n\n    this._processCurrentView();\n\n    this._renderHeader();\n\n    this._layoutManager = new _uiSchedulerAppointments2.default(this, this._getAppointmentsRenderingStrategy());\n    this._appointments = this._createComponent(\"<div>\", _uiScheduler28.default, this._appointmentsConfig());\n\n    this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\n\n    this._appointmentTooltip = this.option(\"adaptivityEnabled\") ? new _mobileTooltipStrategy.MobileTooltipStrategy(this) : new _desktopTooltipStrategy.DesktopTooltipStrategy(this);\n\n    if (this._isLoaded()) {\n      this._initMarkupCore(this._loadedResources);\n\n      this._dataSourceChangedHandler(this._dataSource.items());\n\n      this._fireContentReadyAction();\n    } else {\n      this._loadResources().done(function (resources) {\n        this._initMarkupCore(resources);\n\n        this._reloadDataSource();\n      }.bind(this));\n    }\n  },\n  _initMarkupCore: function (resources) {\n    var _this3 = this;\n\n    this._readyToRenderAppointments = _window2.default.hasWindow();\n    this._workSpace && this._cleanWorkspace();\n\n    this._renderWorkSpace(resources);\n\n    this._appointments.option({\n      fixedContainer: this._workSpace.getFixedContainer(),\n      allDayContainer: this._workSpace.getAllDayContainer()\n    });\n\n    this._waitAsyncTemplates(function () {\n      _this3._workSpaceRecalculation && _this3._workSpaceRecalculation.resolve();\n    });\n\n    this._filterAppointmentsByDate();\n  },\n  _isLoaded: function () {\n    return this._isResourcesLoaded() && this._isDataSourceLoaded();\n  },\n  _isResourcesLoaded: function () {\n    return _type2.default.isDefined(this._loadedResources);\n  },\n  _isDataSourceLoaded: function () {\n    return this._dataSource && this._dataSource.isLoaded();\n  },\n  _render: function () {\n    this._toggleSmallClass();\n\n    this._toggleAdaptiveClass();\n\n    this.callBase();\n  },\n  _renderHeader: function () {\n    var $header = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n    this._header = this._createComponent($header, _uiScheduler4.default, this._headerConfig());\n  },\n  _headerConfig: function () {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var countConfig = this._getViewCountConfig();\n\n    var result = (0, _extend.extend)({\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      currentView: this._currentView,\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      width: this.option(\"width\"),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\n      _dropDownButtonIcon: this.option(\"_dropDownButtonIcon\"),\n      customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\")\n    }, currentViewOptions);\n    result.observer = this;\n    result.intervalCount = countConfig.intervalCount;\n    result.views = this.option(\"views\");\n    result.min = new Date(this._dateOption(\"min\"));\n    result.max = new Date(this._dateOption(\"max\"));\n    result.currentDate = _date2.default.trimTime(new Date(this._dateOption(\"currentDate\")));\n    return result;\n  },\n  _appointmentsConfig: function () {\n    var that = this;\n    var config = {\n      observer: this,\n      onItemRendered: this._getAppointmentRenderedAction(),\n      onItemClick: this._createActionByOption(\"onAppointmentClick\"),\n      onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\n      onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\n      tabIndex: this.option(\"tabIndex\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      allowDrag: this._allowDragging(),\n      allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\n      allowResize: this._allowResizing(),\n      allowAllDayResize: this._allowAllDayResizing(),\n      rtlEnabled: this.option(\"rtlEnabled\"),\n      onContentReady: function () {\n        that._workSpace && that._workSpace.option(\"allDayExpanded\", that._isAllDayExpanded(that.getFilteredItems()));\n      }\n    };\n    return config;\n  },\n  getCollectorOffset: function () {\n    if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\n      return this.option(\"_collectorOffset\");\n    } else {\n      return 0;\n    }\n  },\n  getAppointmentDurationInMinutes: function () {\n    return this._getCurrentViewOption(\"cellDuration\");\n  },\n  _processCurrentView: function () {\n    var views = this.option(\"views\");\n    var currentView = this.option(\"currentView\");\n    var that = this;\n    this._currentView = currentView;\n    (0, _iterator.each)(views, function (_, view) {\n      var isViewIsObject = _type2.default.isObject(view);\n\n      var viewName = isViewIsObject ? view.name : view;\n      var viewType = view.type;\n\n      if (currentView === viewName || currentView === viewType) {\n        that._currentView = view;\n        return false;\n      }\n    });\n  },\n  _getCurrentViewType: function () {\n    return this._currentView.type || this._currentView;\n  },\n  _getAppointmentsRenderingStrategy: function () {\n    return VIEWS_CONFIG[this._getCurrentViewType()].renderingStrategy;\n  },\n  _renderWorkSpace: function (groups) {\n    this._readyToRenderAppointments && this._toggleSmallClass();\n    var $workSpace = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\n\n    var countConfig = this._getViewCountConfig();\n\n    this._workSpace = this._createComponent($workSpace, VIEWS_CONFIG[this._getCurrentViewType()].workSpace, this._workSpaceConfig(groups, countConfig));\n\n    this._workSpace.getWorkArea().append(this._appointments.$element());\n\n    this._recalculateWorkspace();\n\n    countConfig.startDate && this._header && this._header.option(\"currentDate\", this._workSpace._getHeaderDate());\n\n    this._appointments.option(\"_collectorOffset\", this.getCollectorOffset());\n  },\n  _getViewCountConfig: function () {\n    var currentView = this.option(\"currentView\");\n\n    var view = this._getViewByName(currentView);\n\n    var viewCount = view && view.intervalCount || 1;\n    var startDate = view && view.startDate || null;\n    return {\n      intervalCount: viewCount,\n      startDate: startDate\n    };\n  },\n  _getViewByName: function (name) {\n    var views = this.option(\"views\");\n\n    for (var i = 0; i < views.length; i++) {\n      if (views[i].name === name || views[i].type === name || views[i] === name) {\n        return views[i];\n      }\n    }\n  },\n  _recalculateWorkspace: function () {\n    var _this4 = this;\n\n    this._workSpaceRecalculation = new Deferred();\n\n    this._waitAsyncTemplates(function () {\n      _dom2.default.triggerResizeEvent(_this4._workSpace.$element());\n\n      _this4._workSpace._refreshDateTimeIndication();\n    });\n  },\n  _workSpaceConfig: function (groups, countConfig) {\n    var _this5 = this;\n\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    var result = (0, _extend.extend)({\n      noDataText: this.option(\"noDataText\"),\n      firstDayOfWeek: this.option(\"firstDayOfWeek\"),\n      startDayHour: this.option(\"startDayHour\"),\n      endDayHour: this.option(\"endDayHour\"),\n      tabIndex: this.option(\"tabIndex\"),\n      accessKey: this.option(\"accessKey\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      cellDuration: this.option(\"cellDuration\"),\n      showAllDayPanel: this.option(\"showAllDayPanel\"),\n      showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\n      indicatorTime: this.option(\"indicatorTime\"),\n      indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\n      shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\n      allDayExpanded: this._appointments.option(\"items\"),\n      crossScrollingEnabled: this.option(\"crossScrollingEnabled\"),\n      dataCellTemplate: this.option(\"dataCellTemplate\"),\n      timeCellTemplate: this.option(\"timeCellTemplate\"),\n      resourceCellTemplate: this.option(\"resourceCellTemplate\"),\n      dateCellTemplate: this.option(\"dateCellTemplate\"),\n      allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\n      selectedCellData: this.option(\"selectedCellData\"),\n      onSelectionChanged: function (args) {\n        _this5.option(\"selectedCellData\", args.selectedCellData);\n      },\n      groupByDate: this._getCurrentViewOption(\"groupByDate\")\n    }, currentViewOptions);\n    result.observer = this;\n    result.intervalCount = countConfig.intervalCount;\n    result.startDate = countConfig.startDate;\n    result.groups = groups;\n    result.onCellClick = this._createActionByOption(\"onCellClick\");\n    result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\n    result.min = new Date(this._dateOption(\"min\"));\n    result.max = new Date(this._dateOption(\"max\"));\n    result.currentDate = _date2.default.trimTime(new Date(this._dateOption(\"currentDate\")));\n    result.hoursInterval = result.cellDuration / 60;\n    result.allDayExpanded = this._isAllDayExpanded(this.getFilteredItems());\n    result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\n    result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\n    result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\n    result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\n    return result;\n  },\n  _getCurrentViewOptions: function () {\n    return this._currentView;\n  },\n  _getCurrentViewOption: function (optionName) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (currentViewOptions && void 0 !== currentViewOptions[optionName]) {\n      return currentViewOptions[optionName];\n    }\n\n    return this.option(optionName);\n  },\n  _getAppointmentTemplate: function (optionName) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (currentViewOptions && currentViewOptions[optionName]) {\n      return this._getTemplate(currentViewOptions[optionName]);\n    }\n\n    return this._getTemplateByOption(optionName);\n  },\n  _updateOption: function (viewName, optionName, value) {\n    var currentViewOptions = this._getCurrentViewOptions();\n\n    if (!currentViewOptions || !_type2.default.isDefined(currentViewOptions[optionName])) {\n      this[\"_\" + viewName].option(optionName, value);\n    }\n  },\n  _refreshWorkSpace: function (groups) {\n    var _this6 = this;\n\n    this._cleanWorkspace();\n\n    delete this._workSpace;\n\n    this._renderWorkSpace(groups);\n\n    if (this._readyToRenderAppointments) {\n      this._appointments.option({\n        fixedContainer: this._workSpace.getFixedContainer(),\n        allDayContainer: this._workSpace.getAllDayContainer()\n      });\n\n      this._waitAsyncTemplates(function () {\n        _this6._workSpaceRecalculation.resolve();\n      });\n    }\n  },\n  _cleanWorkspace: function () {\n    this._appointments.$element().detach();\n\n    this._workSpace._dispose();\n\n    this._workSpace.$element().remove();\n\n    this.option(\"selectedCellData\", []);\n  },\n  getWorkSpaceScrollable: function () {\n    return this._workSpace.getScrollable();\n  },\n  getWorkSpaceScrollableScrollTop: function (allDay) {\n    return this._workSpace.getGroupedScrollableScrollTop(allDay);\n  },\n  getWorkSpaceScrollableScrollLeft: function () {\n    return this._workSpace.getScrollableScrollLeft();\n  },\n  getWorkSpaceScrollableContainer: function () {\n    return this._workSpace.getScrollableContainer();\n  },\n  getWorkSpaceAllDayHeight: function () {\n    return this._workSpace.getAllDayHeight();\n  },\n  getWorkSpaceAllDayOffset: function () {\n    return this._workSpace.getAllDayOffset();\n  },\n  getWorkSpaceHeaderPanelHeight: function () {\n    return this._workSpace.getHeaderPanelHeight();\n  },\n  getWorkSpaceDateTableOffset: function () {\n    return !this.option(\"crossScrollingEnabled\") || this.option(\"rtlEnabled\") ? this._workSpace.getWorkSpaceLeftOffset() : 0;\n  },\n  getWorkSpace: function () {\n    return this._workSpace;\n  },\n  getAppointmentModel: function () {\n    return this._appointmentModel;\n  },\n  getHeader: function () {\n    return this._header;\n  },\n  getMaxAppointmentsPerCell: function () {\n    return this._getCurrentViewOption(\"maxAppointmentsPerCell\");\n  },\n  _createPopup: function (appointmentData, processTimeZone) {\n    this._$popup = (0, _renderer2.default)(\"<div>\").addClass(APPOINTMENT_POPUP_CLASS).appendTo(this.$element());\n\n    this._initDynamicPopupTemplate(appointmentData, processTimeZone);\n\n    this._popup = this._createComponent(this._$popup, _popup2.default, this._popupConfig(appointmentData));\n  },\n  _popupContent: function (appointmentData, processTimeZone) {\n    var $popupContent = this._popup.$content();\n\n    var $form = (0, _renderer2.default)(\"<div>\").appendTo($popupContent);\n\n    this._createOrUpdateForm(appointmentData, processTimeZone, $form);\n\n    return $popupContent;\n  },\n  _createAppointmentForm: function (formData, $content) {\n    var allDay = this.fire(\"getField\", \"allDay\", formData);\n    var resources = this.option(\"resources\");\n\n    _uiScheduler32.default.prepareAppointmentFormEditors(allDay, {\n      textExpr: this._dataAccessors.expr.textExpr,\n      allDayExpr: this._dataAccessors.expr.allDayExpr,\n      startDateExpr: this._dataAccessors.expr.startDateExpr,\n      endDateExpr: this._dataAccessors.expr.endDateExpr,\n      descriptionExpr: this._dataAccessors.expr.descriptionExpr,\n      recurrenceRuleExpr: this._dataAccessors.expr.recurrenceRuleExpr,\n      startDateTimeZoneExpr: this._dataAccessors.expr.startDateTimeZoneExpr,\n      endDateTimeZoneExpr: this._dataAccessors.expr.endDateTimeZoneExpr\n    }, this);\n\n    if (resources && resources.length) {\n      this._resourcesManager.setResources(this.option(\"resources\"));\n\n      _uiScheduler32.default.concatResources(this._resourcesManager.getEditors());\n    }\n\n    this._appointmentForm = _uiScheduler32.default.create(this._createComponent.bind(this), $content, this._editAppointmentData ? !this._editing.allowUpdating : false, formData);\n  },\n  _createOrUpdateForm: function (appointmentData, processTimeZone, $content) {\n    var allDay = this.fire(\"getField\", \"allDay\", appointmentData);\n    var startDate = this.fire(\"getField\", \"startDate\", appointmentData);\n    var endDate = this.fire(\"getField\", \"endDate\", appointmentData);\n    (0, _iterator.each)(this._resourcesManager.getResourcesFromItem(appointmentData, true) || {}, function (resourceName, resourceValue) {\n      appointmentData[resourceName] = resourceValue;\n    });\n    var formData = (0, _extend.extend)(true, {}, appointmentData);\n\n    if (processTimeZone) {\n      startDate = this.fire(\"convertDateByTimezone\", startDate);\n      endDate = this.fire(\"convertDateByTimezone\", endDate);\n      this.fire(\"setField\", \"startDate\", formData, startDate);\n      this.fire(\"setField\", \"endDate\", formData, endDate);\n    }\n\n    if (this._appointmentForm) {\n      var startDateExpr = this._dataAccessors.expr.startDateExpr;\n      var endDateExpr = this._dataAccessors.expr.endDateExpr;\n      formData.recurrenceRule = formData.recurrenceRule || null;\n\n      _uiScheduler32.default.updateFormData(this._appointmentForm, formData);\n\n      this._appointmentForm.option(\"readOnly\", this._editAppointmentData ? !this._editing.allowUpdating : false);\n\n      _uiScheduler32.default.checkEditorsType(this._appointmentForm, startDateExpr, endDateExpr, allDay);\n    } else {\n      this._createAppointmentForm(formData, $content);\n    }\n\n    var recurrenceRuleExpr = this._dataAccessors.expr.recurrenceRuleExpr;\n    var recurrentEditorItem = recurrenceRuleExpr ? this._appointmentForm.itemOption(recurrenceRuleExpr) : null;\n\n    if (recurrentEditorItem) {\n      var options = recurrentEditorItem.editorOptions || {};\n      options.startDate = startDate;\n\n      this._appointmentForm.itemOption(recurrenceRuleExpr, \"editorOptions\", options);\n    }\n\n    this._actions.onAppointmentFormOpening({\n      form: this._appointmentForm,\n      appointmentData: appointmentData\n    });\n  },\n  _initDynamicPopupTemplate: function (appointmentData, processTimeZone) {\n    var that = this;\n    this._defaultTemplates.appointmentPopup = new _function_template2.default(function (options) {\n      var $popupContent = that._popupContent(appointmentData, processTimeZone);\n\n      (0, _renderer2.default)(options.container).append($popupContent);\n      return (0, _renderer2.default)(options.container);\n    });\n  },\n  _isPopupFullScreenNeeded: function () {\n    if (_window2.default.hasWindow()) {\n      var window = _window2.default.getWindow();\n\n      return (0, _renderer2.default)(window).width() < APPOINTMENT_POPUP_FULLSCREEN_WINDOW_WIDTH;\n    }\n\n    return false;\n  },\n  _updatePopupFullScreenMode: function () {\n    if (this._popup && this._popup.option(\"visible\")) {\n      var isFullScreen = this._isPopupFullScreenNeeded();\n\n      this._popup.option({\n        maxWidth: isFullScreen ? \"100%\" : APPOINTMENT_POPUP_WIDTH,\n        fullScreen: isFullScreen\n      });\n    }\n  },\n  _popupConfig: function (appointmentData) {\n    var _this7 = this;\n\n    var template = this._getTemplateByOption(\"appointmentPopupTemplate\");\n\n    return {\n      height: \"auto\",\n      maxHeight: \"100%\",\n      onHiding: function () {\n        return _this7.focus();\n      },\n      contentTemplate: new _function_template2.default(function (options) {\n        return template.render({\n          model: appointmentData,\n          container: options.container\n        });\n      }),\n      onShowing: function () {\n        return _this7._updatePopupFullScreenMode();\n      },\n      defaultOptionsRules: [{\n        device: function () {\n          return _devices2.default.current().android;\n        },\n        options: {\n          showTitle: false\n        }\n      }]\n    };\n  },\n  _getPopupToolbarItems: function () {\n    var isIOs = \"ios\" === _devices2.default.current().platform;\n\n    return [{\n      shortcut: \"done\",\n      location: TOOLBAR_ITEM_AFTER_LOCATION,\n      onClick: this._doneButtonClickHandler.bind(this)\n    }, {\n      shortcut: \"cancel\",\n      location: isIOs ? TOOLBAR_ITEM_BEFORE_LOCATION : TOOLBAR_ITEM_AFTER_LOCATION\n    }];\n  },\n  _cleanPopup: function () {\n    if (this._$popup) {\n      this._popup.$element().remove();\n\n      delete this._$popup;\n      delete this._popup;\n      delete this._appointmentForm;\n    }\n  },\n  _doneButtonClickHandler: function (args) {\n    args.cancel = true;\n\n    this._saveChanges(true);\n\n    if (this._lastEditData) {\n      var startDate = this.fire(\"getField\", \"startDate\", this._lastEditData);\n\n      this._workSpace.updateScrollPosition(startDate);\n\n      delete this._lastEditData;\n    }\n  },\n  _saveChanges: function (disableButton) {\n    var validation = this._appointmentForm.validate();\n\n    if (validation && !validation.isValid) {\n      return false;\n    }\n\n    disableButton && this._disableDoneButton();\n\n    var formData = _object2.default.deepExtendArraySafe({}, this._getFormData(), true);\n\n    var oldData = this._editAppointmentData;\n    var recData = this._updatedRecAppointment;\n\n    function convert(obj, dateFieldName) {\n      var date = new Date(this.fire(\"getField\", dateFieldName, obj));\n      var tzDiff = this._getTimezoneOffsetByOption() * toMs(\"hour\") + this.fire(\"getClientTimezoneOffset\", date);\n      return new Date(date.getTime() + tzDiff);\n    }\n\n    if (oldData) {\n      this._convertDatesByTimezoneBack(false, formData);\n    }\n\n    if (oldData && !recData) {\n      this.updateAppointment(oldData, formData);\n    } else {\n      if (recData) {\n        this.updateAppointment(oldData, recData);\n        delete this._updatedRecAppointment;\n\n        if (\"number\" === typeof this._getTimezoneOffsetByOption()) {\n          this.fire(\"setField\", \"startDate\", formData, convert.call(this, formData, \"startDate\"));\n          this.fire(\"setField\", \"endDate\", formData, convert.call(this, formData, \"endDate\"));\n        }\n      }\n\n      this.addAppointment(formData);\n    }\n\n    this._enableDoneButton();\n\n    this._lastEditData = formData;\n    return true;\n  },\n  _getFormData: function () {\n    var formData = this._appointmentForm.option(\"formData\");\n\n    var startDate = this.fire(\"getField\", \"startDate\", formData);\n    var endDate = this.fire(\"getField\", \"endDate\", formData);\n    this.fire(\"setField\", \"startDate\", formData, startDate);\n    this.fire(\"setField\", \"endDate\", formData, endDate);\n    return formData;\n  },\n  _convertDatesByTimezoneBack: function (applyAppointmentTimezone, sourceAppointmentData, targetAppointmentData) {\n    targetAppointmentData = targetAppointmentData || sourceAppointmentData;\n    var processedStartDate = this.fire(\"convertDateByTimezoneBack\", this.fire(\"getField\", \"startDate\", sourceAppointmentData), applyAppointmentTimezone && this.fire(\"getField\", \"startDateTimeZone\", sourceAppointmentData));\n    var processedEndDate = this.fire(\"convertDateByTimezoneBack\", this.fire(\"getField\", \"endDate\", sourceAppointmentData), applyAppointmentTimezone && this.fire(\"getField\", \"endDateTimeZone\", sourceAppointmentData));\n    this.fire(\"setField\", \"startDate\", targetAppointmentData, processedStartDate);\n    this.fire(\"setField\", \"endDate\", targetAppointmentData, processedEndDate);\n  },\n  _disableDoneButton: function () {\n    var toolbarItems = this._popup.option(\"toolbarItems\");\n\n    toolbarItems[0].options = (0, _extend.extend)(toolbarItems[0].options, {\n      disabled: true\n    });\n\n    this._popup.option(\"toolbarItems\", toolbarItems);\n  },\n  _enableDoneButton: function () {\n    var toolbarItems = this._popup.option(\"toolbarItems\");\n\n    toolbarItems[0].options = (0, _extend.extend)(toolbarItems[0].options, {\n      disabled: false\n    });\n\n    this._popup.option(\"toolbarItems\", toolbarItems);\n  },\n  _checkRecurringAppointment: function (targetAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing) {\n    delete this._updatedRecAppointment;\n    var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", targetAppointment);\n\n    if (!_utils2.default.getRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\n      callback();\n      return;\n    }\n\n    var editMode = this.option(\"recurrenceEditMode\");\n\n    switch (editMode) {\n      case \"series\":\n        callback();\n        break;\n\n      case \"occurrence\":\n        this._singleAppointmentChangesHandler(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing);\n\n        break;\n\n      default:\n        this._showRecurrenceChangeConfirm(isDeleted).done(function (result) {\n          result && callback();\n          !result && this._singleAppointmentChangesHandler(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing);\n        }.bind(this)).fail(function () {\n          this._appointments.moveAppointmentBack();\n        }.bind(this));\n\n    }\n  },\n  _singleAppointmentChangesHandler: function (targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing) {\n    exceptionDate = new Date(exceptionDate);\n\n    function processAppointmentDates(appointment, commonTimezoneOffset) {\n      var startDate = this.fire(\"getField\", \"startDate\", appointment);\n      var processedStartDate = this.fire(\"convertDateByTimezoneBack\", startDate, this.fire(\"getField\", \"startDateTimeZone\", appointment));\n      var endDate = this.fire(\"getField\", \"endDate\", appointment);\n      var processedEndDate = this.fire(\"convertDateByTimezoneBack\", endDate, this.fire(\"getField\", \"endDateTimeZone\", appointment));\n\n      if (\"number\" === typeof commonTimezoneOffset && !isNaN(commonTimezoneOffset)) {\n        var startDateClientTzOffset = -(this._subscribes.getClientTimezoneOffset(startDate) / toMs(\"hour\"));\n        var endDateClientTzOffset = -(this._subscribes.getClientTimezoneOffset(endDate) / toMs(\"hour\"));\n        var processedStartDateInUTC = processedStartDate.getTime() - startDateClientTzOffset * toMs(\"hour\");\n        var processedEndDateInUTC = processedEndDate.getTime() - endDateClientTzOffset * toMs(\"hour\");\n        processedStartDate = new Date(processedStartDateInUTC + commonTimezoneOffset * toMs(\"hour\"));\n        processedEndDate = new Date(processedEndDateInUTC + commonTimezoneOffset * toMs(\"hour\"));\n      }\n\n      this.fire(\"setField\", \"startDate\", appointment, processedStartDate);\n      this.fire(\"setField\", \"endDate\", appointment, processedEndDate);\n    }\n\n    this.fire(\"setField\", \"recurrenceRule\", singleAppointment, \"\");\n    this.fire(\"setField\", \"recurrenceException\", singleAppointment, \"\");\n\n    if (!isDeleted && !isPopupEditing) {\n      processAppointmentDates.call(this, singleAppointment, this._getTimezoneOffsetByOption());\n      this.addAppointment(singleAppointment);\n    }\n\n    var recurrenceException = this._makeDateAsRecurrenceException(exceptionDate, targetAppointment);\n\n    var updatedAppointment = (0, _extend.extend)({}, targetAppointment);\n    this.fire(\"setField\", \"recurrenceException\", updatedAppointment, recurrenceException);\n\n    if (isPopupEditing) {\n      this._updatedRecAppointment = updatedAppointment;\n      processAppointmentDates.call(this, singleAppointment);\n\n      this._showAppointmentPopup(singleAppointment, true, true);\n\n      this._editAppointmentData = targetAppointment;\n    } else {\n      this._updateAppointment(targetAppointment, updatedAppointment, function () {\n        this._appointments.moveAppointmentBack();\n      });\n    }\n  },\n  _makeDateAsRecurrenceException: function (exceptionDate, targetAppointment) {\n    var startDate = this._getStartDate(targetAppointment, true);\n\n    var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", targetAppointment);\n\n    var exceptionByDate = this._getRecurrenceExceptionDate(exceptionDate, startDate, startDateTimeZone);\n\n    var recurrenceException = this.fire(\"getField\", \"recurrenceException\", targetAppointment);\n    return recurrenceException ? recurrenceException + \",\" + exceptionByDate : exceptionByDate;\n  },\n  _getRecurrenceExceptionDate: function (exceptionStartDate, targetStartDate, startDateTimeZone) {\n    exceptionStartDate = this.fire(\"convertDateByTimezoneBack\", exceptionStartDate, startDateTimeZone);\n    var appointmentStartDate = this.fire(\"convertDateByTimezoneBack\", targetStartDate, startDateTimeZone);\n    exceptionStartDate.setHours(appointmentStartDate.getHours(), appointmentStartDate.getMinutes(), appointmentStartDate.getSeconds(), appointmentStartDate.getMilliseconds());\n    var timezoneDiff = targetStartDate.getTimezoneOffset() - exceptionStartDate.getTimezoneOffset();\n    exceptionStartDate = new Date(exceptionStartDate.getTime() - timezoneDiff * toMs(\"minute\"));\n    return _date_serialization2.default.serializeDate(exceptionStartDate, UTC_FULL_DATE_FORMAT);\n  },\n  _showRecurrenceChangeConfirm: function (isDeleted) {\n    var message = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\n\n    var seriesText = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\n\n    var occurrenceText = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\n\n    return _dialog2.default.custom({\n      messageHtml: message,\n      showCloseButton: true,\n      showTitle: true,\n      buttons: [{\n        text: seriesText,\n        onClick: function () {\n          return true;\n        }\n      }, {\n        text: occurrenceText,\n        onClick: function () {\n          return false;\n        }\n      }]\n    }).show();\n  },\n  _getUpdatedData: function (options) {\n    var target = options.data || options;\n    var cellData = this.getTargetCellData();\n    var targetAllDay = this.fire(\"getField\", \"allDay\", target);\n    var targetStartDate = new Date(this.fire(\"getField\", \"startDate\", target));\n    var targetEndDate = new Date(this.fire(\"getField\", \"endDate\", target));\n    var date = cellData.date || targetStartDate;\n    var duration = targetEndDate.getTime() - targetStartDate.getTime();\n\n    if (this._workSpace.keepOriginalHours()) {\n      var diff = targetStartDate.getTime() - _date2.default.trimTime(targetStartDate).getTime();\n\n      date = new Date(_date2.default.trimTime(date).getTime() + diff);\n    }\n\n    var updatedData = {};\n    var allDay = cellData.allDay;\n    this.fire(\"setField\", \"allDay\", updatedData, allDay);\n    this.fire(\"setField\", \"startDate\", updatedData, date);\n    var endDate = new Date(date.getTime() + duration);\n\n    if (this.appointmentTakesAllDay(target) && !updatedData.allDay && this._workSpace.supportAllDayRow()) {\n      endDate = this._workSpace.calculateEndDate(date);\n    }\n\n    if (targetAllDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\n      var dateCopy = new Date(date);\n      dateCopy.setHours(0);\n      endDate = new Date(dateCopy.getTime() + duration);\n\n      if (0 !== endDate.getHours()) {\n        endDate.setHours(this._getCurrentViewOption(\"endDayHour\"));\n      }\n    }\n\n    this.fire(\"setField\", \"endDate\", updatedData, endDate);\n\n    this._resourcesManager.setResourcesToItem(updatedData, cellData.groups);\n\n    return updatedData;\n  },\n  _getCoordinates: function (initialDates, dates, appointmentResources, allDay) {\n    var result = [];\n\n    for (var i = 0; i < dates.length; i++) {\n      var currentCoords = this._workSpace.getCoordinatesByDateInGroup(dates[i], appointmentResources, allDay);\n\n      for (var j = 0; j < currentCoords.length; j++) {\n        (0, _extend.extend)(currentCoords[j], {\n          startDate: dates[i],\n          initialStartDate: initialDates[i]\n        });\n      }\n\n      result = result.concat(currentCoords);\n    }\n\n    return result;\n  },\n  _isAppointmentRecurrence: function (appointmentData) {\n    var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", appointmentData);\n    return recurrenceRule && _utils2.default.getRecurrenceRule(recurrenceRule).isValid;\n  },\n  _getSingleAppointmentData: function (appointmentData, options) {\n    options = options || {};\n    var $appointment = options.$appointment;\n    var updatedData = options.skipDateCalculation ? {} : this._getUpdatedData(options);\n    var resultAppointmentData = (0, _extend.extend)({}, appointmentData, updatedData);\n    var allDay = this.fire(\"getField\", \"allDay\", appointmentData);\n    var isAllDay = this._workSpace.supportAllDayRow() && allDay;\n    var startDate = new Date(this.fire(\"getField\", \"startDate\", resultAppointmentData));\n    var endDate = new Date(this.fire(\"getField\", \"endDate\", resultAppointmentData));\n    var appointmentDuration = endDate.getTime() - startDate.getTime();\n    var updatedStartDate;\n    var appointmentStartDate;\n\n    if (_type2.default.isDefined($appointment) && this._needUpdateAppointmentData($appointment)) {\n      var apptDataCalculator = this.getRenderingStrategyInstance().getAppointmentDataCalculator();\n\n      if (_type2.default.isFunction(apptDataCalculator)) {\n        updatedStartDate = apptDataCalculator($appointment, startDate).startDate;\n      } else {\n        var coordinates = _translator2.default.locate($appointment);\n\n        updatedStartDate = new Date(this._workSpace.getCellDataByCoordinates(coordinates, isAllDay).startDate);\n\n        if ($appointment.hasClass(\"dx-scheduler-appointment-reduced\")) {\n          appointmentStartDate = $appointment.data(\"dxAppointmentStartDate\");\n\n          if (appointmentStartDate) {\n            updatedStartDate = appointmentStartDate;\n          }\n        }\n\n        if (this._isAppointmentRecurrence(appointmentData)) {\n          appointmentStartDate = $appointment.data(\"dxAppointmentSettings\") && $appointment.data(\"dxAppointmentSettings\").startDate;\n\n          if (appointmentStartDate) {\n            updatedStartDate = appointmentStartDate;\n          }\n        }\n\n        if (!options.skipHoursProcessing) {\n          this.fire(\"convertDateByTimezoneBack\", updatedStartDate, this.fire(\"getField\", \"startDateTimeZone\", appointmentData));\n        }\n      }\n    }\n\n    if (!updatedStartDate && options.startDate) {\n      updatedStartDate = options.startDate;\n    }\n\n    if (updatedStartDate) {\n      this.fire(\"setField\", \"startDate\", resultAppointmentData, updatedStartDate);\n      this.fire(\"setField\", \"endDate\", resultAppointmentData, new Date(updatedStartDate.getTime() + appointmentDuration));\n    }\n\n    return resultAppointmentData;\n  },\n  _needUpdateAppointmentData: function ($appointment) {\n    return $appointment.hasClass(\"dx-scheduler-appointment-compact\") || $appointment.hasClass(\"dx-scheduler-appointment-recurrence\");\n  },\n  _getNormalizedTemplateArgs: function (options) {\n    var args = this.callBase(options);\n\n    if (\"targetedAppointmentData\" in options) {\n      args.push(options.targetedAppointmentData);\n    }\n\n    if (\"currentIndex\" in options) {\n      args.push(options.currentIndex);\n    }\n\n    return args;\n  },\n  subscribe: function (subject, action) {\n    this._subscribes[subject] = _uiScheduler2.default[subject] = action;\n  },\n  fire: function (subject) {\n    var callback = this._subscribes[subject];\n    var args = Array.prototype.slice.call(arguments);\n\n    if (!_type2.default.isFunction(callback)) {\n      throw _ui2.default.Error(\"E1031\", subject);\n    }\n\n    return callback.apply(this, args.slice(1));\n  },\n  getTargetCellData: function () {\n    return this._workSpace.getDataByDroppableCell();\n  },\n  _updateAppointment: function (target, appointment, onUpdatePrevented) {\n    var updatingOptions = {\n      newData: appointment,\n      oldData: (0, _extend.extend)({}, target),\n      cancel: false\n    };\n\n    var performFailAction = function (err) {\n      if (_type2.default.isFunction(onUpdatePrevented)) {\n        onUpdatePrevented.call(this);\n      }\n\n      if (err && \"Error\" === err.name) {\n        throw err;\n      }\n    }.bind(this);\n\n    this._actions.onAppointmentUpdating(updatingOptions);\n\n    this._processActionResult(updatingOptions, function (canceled) {\n      if (!canceled) {\n        this._expandAllDayPanel(appointment);\n\n        try {\n          this._appointmentModel.update(target, appointment).always(function (e) {\n            this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentUpdated, appointment, e);\n          }.bind(this)).fail(function () {\n            performFailAction();\n          });\n        } catch (err) {\n          performFailAction(err);\n        }\n      } else {\n        performFailAction();\n      }\n    });\n  },\n  _processActionResult: function (actionOptions, callback) {\n    var _this8 = this;\n\n    if (_type2.default.isPromise(actionOptions.cancel)) {\n      when(_deferred2.default.fromPromise(actionOptions.cancel)).always(function (cancel) {\n        if (!_type2.default.isDefined(cancel)) {\n          cancel = \"rejected\" === actionOptions.cancel.state();\n        }\n\n        callback.call(_this8, cancel);\n      });\n    } else {\n      callback.call(this, actionOptions.cancel);\n    }\n  },\n  _expandAllDayPanel: function (appointment) {\n    if (!this._isAllDayExpanded(this.getFilteredItems()) && this.appointmentTakesAllDay(appointment)) {\n      this._workSpace.option(\"allDayExpanded\", true);\n    }\n  },\n  _executeActionWhenOperationIsCompleted: function (action, appointment, e) {\n    var options = {\n      appointmentData: appointment\n    };\n    var isError = e && \"Error\" === e.name;\n\n    if (isError) {\n      options.error = e;\n    } else {\n      if (this._popup && this._popup.option(\"visible\")) {\n        this._popup.hide();\n      }\n    }\n\n    action(options);\n\n    this._fireContentReadyAction();\n  },\n  _showAppointmentPopup: function (data, showButtons, processTimeZone) {\n    if (!this._popup) {\n      this._createPopup(data, processTimeZone);\n    }\n\n    var toolbarItems = [];\n    var showCloseButton = true;\n\n    if (!_type2.default.isDefined(showButtons) || showButtons) {\n      toolbarItems = this._getPopupToolbarItems();\n      showCloseButton = this._popup.initialOption(\"showCloseButton\");\n    }\n\n    this._popup.option({\n      toolbarItems: toolbarItems,\n      showCloseButton: showCloseButton\n    });\n\n    if (this._appointmentForm) {\n      this._createOrUpdateForm(data, processTimeZone);\n    } else {\n      this._initDynamicPopupTemplate(data, processTimeZone);\n\n      this._popup.option(this._popupConfig(data));\n    }\n\n    this._popup.show();\n  },\n  getAppointmentPopup: function () {\n    return this._popup;\n  },\n  getAppointmentDetailsForm: function () {\n    return this._appointmentForm;\n  },\n  getUpdatedAppointment: function () {\n    return this._appointmentModel.getUpdatedAppointment();\n  },\n  getUpdatedAppointmentKeys: function () {\n    return this._appointmentModel.getUpdatedAppointmentKeys();\n  },\n  getAppointmentsInstance: function () {\n    return this._appointments;\n  },\n  getResourceManager: function () {\n    return this._resourcesManager;\n  },\n  getLayoutManager: function () {\n    return this._layoutManager;\n  },\n  getRenderingStrategyInstance: function () {\n    return this._layoutManager.getRenderingStrategyInstance();\n  },\n  getFilteredItems: function () {\n    return this._filteredItems;\n  },\n  getActions: function () {\n    return this._actions;\n  },\n  appointmentTakesAllDay: function (appointment) {\n    return this._appointmentModel.appointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"));\n  },\n  _getStartDate: function (appointment, skipNormalize) {\n    var startDate = this.fire(\"getField\", \"startDate\", appointment);\n    var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointment);\n    startDate = _date2.default.makeDate(startDate);\n    startDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\n    !skipNormalize && this.fire(\"updateAppointmentStartDate\", {\n      startDate: startDate,\n      appointment: appointment,\n      callback: function (result) {\n        startDate = result;\n      }\n    });\n    return startDate;\n  },\n  _getEndDate: function (appointment, skipNormalize) {\n    var endDate = new Date(this.fire(\"getField\", \"endDate\", appointment));\n    var startDate = new Date(this.fire(\"getField\", \"startDate\", appointment));\n\n    var isSameDate = _date2.default.sameDate(startDate, endDate);\n\n    if (endDate) {\n      var endDateTimeZone = this.fire(\"getField\", \"endDateTimeZone\", appointment);\n      endDate = _date2.default.makeDate(endDate);\n      endDate = this.fire(\"convertDateByTimezone\", endDate, endDateTimeZone);\n      !skipNormalize && this.fire(\"updateAppointmentEndDate\", {\n        endDate: endDate,\n        isSameDate: isSameDate,\n        callback: function (result) {\n          endDate = result;\n        }\n      });\n    }\n\n    return endDate;\n  },\n  _getRecurrenceException: function (appointmentData) {\n    var recurrenceException = this.fire(\"getField\", \"recurrenceException\", appointmentData);\n\n    if (recurrenceException) {\n      var startDate = this.fire(\"getField\", \"startDate\", appointmentData);\n      var exceptions = recurrenceException.split(\",\");\n      var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointmentData);\n      var exceptionByStartDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\n\n      for (var i = 0; i < exceptions.length; i++) {\n        exceptions[i] = this._convertRecurrenceException(exceptions[i], exceptionByStartDate, startDateTimeZone);\n      }\n\n      recurrenceException = exceptions.join();\n    }\n\n    return recurrenceException;\n  },\n  _convertRecurrenceException: function (exception, exceptionByStartDate, startDateTimeZone) {\n    exception = exception.replace(/\\s/g, \"\");\n    exception = _date_serialization2.default.deserializeDate(exception);\n    exception = this.fire(\"convertDateByTimezone\", exception, startDateTimeZone);\n    exception.setHours(exceptionByStartDate.getHours());\n    exception = _date_serialization2.default.serializeDate(exception, FULL_DATE_FORMAT);\n    return exception;\n  },\n  recurrenceEditorVisibilityChanged: function (visible) {\n    if (this._appointmentForm) {\n      this._appointmentForm.$element().find(\".\" + RECURRENCE_EDITOR_ITEM_CLASS).toggleClass(RECURRENCE_EDITOR_OPENED_ITEM_CLASS, visible);\n    }\n  },\n  resizePopup: function () {\n    if (this.getAppointmentPopup()) {\n      _dom2.default.triggerResizeEvent(this.getAppointmentPopup().$element());\n    }\n  },\n  dayHasAppointment: function (day, appointment, trimTime) {\n    var startDate = new Date(this.fire(\"getField\", \"startDate\", appointment));\n    var endDate = new Date(this.fire(\"getField\", \"endDate\", appointment));\n    var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointment);\n    var endDateTimeZone = this.fire(\"getField\", \"endDateTimeZone\", appointment);\n    startDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\n    endDate = this.fire(\"convertDateByTimezone\", endDate, endDateTimeZone);\n\n    if (day.getTime() === endDate.getTime()) {\n      return startDate.getTime() === endDate.getTime();\n    }\n\n    if (trimTime) {\n      day = _date2.default.trimTime(day);\n      startDate = _date2.default.trimTime(startDate);\n      endDate = _date2.default.trimTime(endDate);\n    }\n\n    var dayTimeStamp = day.getTime();\n    var startDateTimeStamp = startDate.getTime();\n    var endDateTimeStamp = endDate.getTime();\n    return (0, _array.inArray)(dayTimeStamp, [startDateTimeStamp, endDateTimeStamp]) > -1 || startDateTimeStamp < dayTimeStamp && endDateTimeStamp > dayTimeStamp;\n  },\n  setTargetedAppointmentResources: function (targetedAppointment, appointmentElement, appointmentIndex) {\n    var groups = this._getCurrentViewOption(\"groups\");\n\n    if (groups && groups.length) {\n      var resourcesSetter = this._resourcesManager._dataAccessors.setter;\n      var workSpace = this._workSpace;\n      var getGroups;\n      var setResourceCallback;\n\n      if (this._isAgenda()) {\n        getGroups = function () {\n          var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\n\n          return workSpace._getCellGroups(apptSettings[0].groupIndex);\n        };\n\n        setResourceCallback = function (_, group) {\n          resourcesSetter[group.name](targetedAppointment, group.id);\n        };\n      } else {\n        getGroups = function () {\n          var setting = (0, _renderer2.default)(appointmentElement).data(\"dxAppointmentSettings\") || {};\n          return workSpace.getCellDataByCoordinates({\n            left: setting.left,\n            top: setting.top\n          }).groups;\n        };\n\n        setResourceCallback = function (field, value) {\n          resourcesSetter[field](targetedAppointment, value);\n        };\n      }\n\n      (0, _iterator.each)(getGroups.call(this), setResourceCallback);\n    }\n  },\n  getStartViewDate: function () {\n    return this._workSpace.getStartViewDate();\n  },\n  getEndViewDate: function () {\n    return this._workSpace.getEndViewDate();\n  },\n  showAppointmentPopup: function (appointmentData, createNewAppointment, currentAppointmentData) {\n    var singleAppointment = currentAppointmentData || this._getSingleAppointmentData(appointmentData, {\n      skipDateCalculation: true\n    });\n\n    var startDate = this.fire(\"getField\", \"startDate\", currentAppointmentData || appointmentData);\n\n    this._checkRecurringAppointment(appointmentData, singleAppointment, startDate, function () {\n      if (createNewAppointment || _type2.default.isEmptyObject(appointmentData)) {\n        delete this._editAppointmentData;\n        this._editing.allowAdding && this._showAppointmentPopup(appointmentData, true, false);\n      } else {\n        this._editAppointmentData = appointmentData;\n\n        this._showAppointmentPopup(appointmentData, this._editing.allowUpdating, true);\n      }\n    }.bind(this), false, true);\n  },\n  hideAppointmentPopup: function (saveChanges) {\n    if (!this._popup || !this._popup.option(\"visible\")) {\n      return;\n    }\n\n    if (saveChanges) {\n      this._saveChanges();\n    }\n\n    this._popup.hide();\n  },\n  showAppointmentTooltip: function (appointmentData, target, currentAppointmentData) {\n    if (appointmentData) {\n      this.showAppointmentTooltipCore(target, [{\n        color: this._appointments._tryGetAppointmentColor(target),\n        data: appointmentData,\n        currentData: currentAppointmentData\n      }], true);\n    }\n  },\n  showAppointmentTooltipCore: function (target, data, isSingleBehavior) {\n    this._appointmentTooltip.show(target, data, isSingleBehavior);\n  },\n  hideAppointmentTooltip: function () {\n    this._appointmentTooltip.hide();\n  },\n  scrollToTime: function (hours, minutes, date) {\n    this._workSpace.scrollToTime(hours, minutes, date);\n  },\n  addAppointment: function (appointment) {\n    var text = this.fire(\"getField\", \"text\", appointment);\n\n    if (!text) {\n      this.fire(\"setField\", \"text\", appointment, \"\");\n    }\n\n    this._convertDatesByTimezoneBack(true, appointment);\n\n    var addingOptions = {\n      appointmentData: appointment,\n      cancel: false\n    };\n\n    this._actions.onAppointmentAdding(addingOptions);\n\n    this._processActionResult(addingOptions, function (canceled) {\n      if (!canceled) {\n        this._expandAllDayPanel(appointment);\n\n        this._appointmentModel.add(appointment, {\n          value: this._getTimezoneOffsetByOption(),\n          clientOffset: this.fire(\"getClientTimezoneOffset\")\n        }).always(function (e) {\n          this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentAdded, appointment, e);\n        }.bind(this));\n      }\n    });\n  },\n  updateAppointment: function (target, appointment) {\n    this._updateAppointment(target, appointment);\n  },\n  deleteAppointment: function (appointment) {\n    var deletingOptions = {\n      appointmentData: appointment,\n      cancel: false\n    };\n\n    this._actions.onAppointmentDeleting(deletingOptions);\n\n    this._processActionResult(deletingOptions, function (canceled) {\n      if (!canceled) {\n        this._appointmentModel.remove(appointment).always(function (e) {\n          this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentDeleted, appointment, e);\n        }.bind(this));\n      }\n    });\n  },\n  focus: function () {\n    if (this._editAppointmentData) {\n      this._appointments.focus();\n    } else {\n      this._workSpace.focus();\n    }\n  },\n  getFirstDayOfWeek: function () {\n    return _type2.default.isDefined(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : _date4.default.firstDayOfWeekIndex();\n  }\n}).include(_async_template_mixin2.default, _data_helper2.default);\n\n(0, _component_registrator2.default)(\"dxScheduler\", Scheduler);\nmodule.exports = Scheduler;","map":{"version":3,"sources":["C:/Users/t_olg/Desktop/Tolga/Ov/Projets/DevisApp/work-site/node_modules/devextreme/ui/scheduler/ui.scheduler.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_callbacks","_callbacks2","_translator","_translator2","_ui","_ui2","_window","_window2","_dialog","_dialog2","_utils","_utils2","_dom","_dom2","_date","_date2","_object","_object2","_iterator","_extend","_array","_common","_type","_type2","_devices","_devices2","_config","_config2","_component_registrator","_component_registrator2","_message","_message2","_date_serialization","_date_serialization2","_date3","_date4","_ui3","_ui4","_uiScheduler","_uiScheduler2","_function_template","_function_template2","_desktopTooltipStrategy","_mobileTooltipStrategy","_uiScheduler3","_uiScheduler4","_uiScheduler5","_uiScheduler6","_uiScheduler7","_uiScheduler8","_uiScheduler9","_uiScheduler10","_uiScheduler11","_uiScheduler12","_uiScheduler13","_uiScheduler14","_uiScheduler15","_uiScheduler16","_uiScheduler17","_uiScheduler18","_uiScheduler19","_uiScheduler20","_uiScheduler21","_uiScheduler22","_uiScheduler23","_uiScheduler24","_uiScheduler25","_uiScheduler26","_uiScheduler27","_uiScheduler28","_uiSchedulerAppointments","_uiSchedulerAppointments2","_compactAppointmentsHelper","_uiScheduler29","_uiScheduler30","_async_template_mixin","_async_template_mixin2","_data_helper","_data_helper2","_ui5","_ui6","_uiScheduler31","_uiScheduler32","_popup","_popup2","_deferred","_deferred2","_empty_template","_empty_template2","_bindable_template","_bindable_template2","_themes","_themes2","_browser","_browser2","_support","obj","__esModule","when","default","Deferred","toMs","dateToMilliseconds","WIDGET_CLASS","WIDGET_SMALL_CLASS","concat","WIDGET_ADAPTIVE_CLASS","WIDGET_WIN_NO_TOUCH_CLASS","WIDGET_READONLY_CLASS","APPOINTMENT_POPUP_CLASS","RECURRENCE_EDITOR_ITEM_CLASS","RECURRENCE_EDITOR_OPENED_ITEM_CLASS","WIDGET_SMALL_WIDTH","APPOINTMENT_POPUP_WIDTH","APPOINTMENT_POPUP_FULLSCREEN_WINDOW_WIDTH","TOOLBAR_ITEM_AFTER_LOCATION","TOOLBAR_ITEM_BEFORE_LOCATION","FULL_DATE_FORMAT","UTC_FULL_DATE_FORMAT","VIEWS_CONFIG","day","workSpace","renderingStrategy","week","workWeek","month","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","agenda","Scheduler","inherit","_getDefaultOptions","extend","callBase","views","currentView","currentDate","trimTime","Date","min","max","dateSerializationFormat","firstDayOfWeek","groups","resources","dataSource","customizeDateNavigatorText","appointmentTemplate","dropDownAppointmentTemplate","appointmentCollectorTemplate","dataCellTemplate","timeCellTemplate","resourceCellTemplate","dateCellTemplate","startDayHour","endDayHour","editing","allowAdding","allowDeleting","allowDragging","allowResizing","allowUpdating","showAllDayPanel","showCurrentTimeIndicator","shadeUntilCurrentTime","indicatorUpdateInterval","indicatorTime","recurrenceEditMode","cellDuration","maxAppointmentsPerCell","selectedCellData","groupByDate","onAppointmentRendered","onAppointmentClick","onAppointmentDblClick","onAppointmentContextMenu","onCellClick","onCellContextMenu","onAppointmentAdding","onAppointmentAdded","onAppointmentUpdating","onAppointmentUpdated","onAppointmentDeleting","onAppointmentDeleted","onAppointmentFormOpening","appointmentTooltipTemplate","appointmentPopupTemplate","crossScrollingEnabled","useDropDownViewSwitcher","startDateExpr","endDateExpr","textExpr","descriptionExpr","allDayExpr","recurrenceRuleExpr","recurrenceExceptionExpr","remoteFiltering","timeZone","startDateTimeZoneExpr","endDateTimeZoneExpr","noDataText","format","adaptivityEnabled","allowMultipleCellSelection","_appointmentTooltipOffset","x","y","_appointmentTooltipButtonsPosition","_appointmentTooltipOpenButtonText","_dropDownButtonIcon","_appointmentCountPerCell","_collectorOffset","_appointmentOffset","_defaultOptionsRules","device","real","deviceType","isSimulator","options","focusStateEnabled","current","generic","isMaterial","data","index","element","text","split","forEach","span","addClass","append","_setDeprecatedOptions","_deprecatedOptions","onAppointmentFormCreated","since","alias","_postponeDataSourceLoading","promise","postponedOperations","add","_reloadDataSource","bind","_postponeResourceLoading","_this","whenLoaded","_loadResources","resolveCallbacks","done","resolve","_optionChanged","args","_this2","value","name","_updateOption","_dateOption","option","_workSpace","_header","_getViewStartByOptions","_appointments","_filterAppointmentsByDate","_initDataSource","_customizeStoreLoadOptions","_appointmentModel","setDataSource","_dataSource","_processCurrentView","_getCurrentViewOptions","repaint","getLayoutManager","initRenderingStrategy","_getAppointmentsRenderingStrategy","items","allowDrag","_allowDragging","allowResize","_allowResizing","itemTemplate","_getAppointmentTemplate","_refreshWorkSpace","_updateHeader","_resourcesManager","setResources","setDataAccessors","_combineDataAccessors","_actions","_createActionByOption","_getAppointmentRenderedAction","_readyToRenderAppointments","_getAppointmentsToRepaint","_dimensionChanged","_initEditing","_editing","_bringEditingModeToAppointments","hideAppointmentTooltip","_cleanPopup","_updateExpression","_initAppointmentTemplate","_toggleAdaptiveClass","viewCountConfig","_getViewCountConfig","intervalCount","_getCurrentViewOption","_currentView","optionName","optionValue","deserializeDate","_getSerializationFormat","isString","getDateSerializationFormat","editingConfig","allowDelete","_isAgenda","allowAllDayResize","_supportAllDayResizing","_allowAllDayResizing","_getCurrentViewType","_isAllDayExpanded","hasAllDayAppointments","_getTimezoneOffsetByOption","date","_calculateTimezoneByValue","timezone","result","dateUtc","UTC","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getTimezoneOffsetById","dateRange","getDateRange","filterByDate","loadResources","_loadedResources","_dataSourceLoadedCallback","load","hide","_fireContentReadyAction","fail","reject","isLoading","show","container","$element","position","of","filteredItems","getFilteredItems","_toggleSmallClass","_isVisible","_cleanAllowedPositions","appointments","_layoutManager","createAppointmentsMap","resizePopup","_updatePopupFullScreenMode","_clean","width","get","getBoundingClientRect","toggleClass","_visibilityChanged","visible","_dataSourceOptions","paginate","_init","_initExpressions","startDate","endDate","startDateTimeZone","endDateTimeZone","allDay","description","recurrenceRule","recurrenceException","_proxiedCustomizeStoreLoadOptionsHandler","_customizeStoreLoadOptionsHandler","msie","touch","combinedDataAccessors","getAppointmentDurationInMinutes","_initActions","CompactAppointmentsHelper","_subscribes","_initTemplates","_defaultTemplates","appointmentTooltip","appointmentPopup","dropDownAppointment","that","item","$container","model","appointmentsInst","getAppointmentsInstance","_renderAppointmentTemplate","call","_dataAccessors","getter","resourcesDataAccessors","each","type","accessor","_renderContent","_renderContentImpl","_dataSourceChangedHandler","_workSpaceRecalculation","_filteredItems","fire","getRenderingStrategyInstance","calculateRows","length","cleanModelState","_renderView","fireWith","getRepaintedAppointments","fields","dataCoreUtils","isDateField","field","setter","expr","compileGetter","compileSetter","dateGetter","dateSetter","apply","arguments","forceIsoDateParsing","object","serializeDate","exprObj","replace","isObject","_isReadOnly","prop","Object","prototype","hasOwnProperty","on","_dispose","_appointmentTooltip","dispose","hideAppointmentPopup","_cleanAsyncTemplatesTimer","off","storeLoadOptions","dxScheduler","getStartViewDate","getEndViewDate","excludeValidators","_renderFocusTarget","noop","_initMarkup","_renderHeader","_createComponent","_appointmentsConfig","MobileTooltipStrategy","DesktopTooltipStrategy","_isLoaded","_initMarkupCore","_this3","hasWindow","_cleanWorkspace","_renderWorkSpace","fixedContainer","getFixedContainer","allDayContainer","getAllDayContainer","_waitAsyncTemplates","_isResourcesLoaded","_isDataSourceLoaded","isDefined","isLoaded","_render","$header","appendTo","_headerConfig","currentViewOptions","countConfig","tabIndex","rtlEnabled","observer","config","onItemRendered","onItemClick","onItemContextMenu","onContentReady","getCollectorOffset","needApplyCollectorOffset","_","view","isViewIsObject","viewName","viewType","$workSpace","_workSpaceConfig","getWorkArea","_recalculateWorkspace","_getHeaderDate","_getViewByName","viewCount","i","_this4","triggerResizeEvent","_refreshDateTimeIndication","_this5","accessKey","allDayExpanded","onSelectionChanged","hoursInterval","_getTemplate","_getTemplateByOption","_this6","detach","remove","getWorkSpaceScrollable","getScrollable","getWorkSpaceScrollableScrollTop","getGroupedScrollableScrollTop","getWorkSpaceScrollableScrollLeft","getScrollableScrollLeft","getWorkSpaceScrollableContainer","getScrollableContainer","getWorkSpaceAllDayHeight","getAllDayHeight","getWorkSpaceAllDayOffset","getAllDayOffset","getWorkSpaceHeaderPanelHeight","getHeaderPanelHeight","getWorkSpaceDateTableOffset","getWorkSpaceLeftOffset","getWorkSpace","getAppointmentModel","getHeader","getMaxAppointmentsPerCell","_createPopup","appointmentData","processTimeZone","_$popup","_initDynamicPopupTemplate","_popupConfig","_popupContent","$popupContent","$content","$form","_createOrUpdateForm","_createAppointmentForm","formData","prepareAppointmentFormEditors","concatResources","getEditors","_appointmentForm","create","_editAppointmentData","getResourcesFromItem","resourceName","resourceValue","updateFormData","checkEditorsType","recurrentEditorItem","itemOption","editorOptions","form","_isPopupFullScreenNeeded","window","getWindow","isFullScreen","maxWidth","fullScreen","_this7","template","height","maxHeight","onHiding","focus","contentTemplate","render","onShowing","defaultOptionsRules","android","showTitle","_getPopupToolbarItems","isIOs","platform","shortcut","location","onClick","_doneButtonClickHandler","cancel","_saveChanges","_lastEditData","updateScrollPosition","disableButton","validation","validate","isValid","_disableDoneButton","deepExtendArraySafe","_getFormData","oldData","recData","_updatedRecAppointment","convert","dateFieldName","tzDiff","getTime","_convertDatesByTimezoneBack","updateAppointment","addAppointment","_enableDoneButton","applyAppointmentTimezone","sourceAppointmentData","targetAppointmentData","processedStartDate","processedEndDate","toolbarItems","disabled","_checkRecurringAppointment","targetAppointment","singleAppointment","exceptionDate","callback","isDeleted","isPopupEditing","getRecurrenceRule","editMode","_singleAppointmentChangesHandler","_showRecurrenceChangeConfirm","moveAppointmentBack","processAppointmentDates","appointment","commonTimezoneOffset","isNaN","startDateClientTzOffset","getClientTimezoneOffset","endDateClientTzOffset","processedStartDateInUTC","processedEndDateInUTC","_makeDateAsRecurrenceException","updatedAppointment","_showAppointmentPopup","_updateAppointment","_getStartDate","exceptionByDate","_getRecurrenceExceptionDate","exceptionStartDate","targetStartDate","appointmentStartDate","setHours","getHours","getMinutes","getSeconds","getMilliseconds","timezoneDiff","getTimezoneOffset","message","seriesText","occurrenceText","custom","messageHtml","showCloseButton","buttons","_getUpdatedData","target","cellData","getTargetCellData","targetAllDay","targetEndDate","duration","keepOriginalHours","diff","updatedData","appointmentTakesAllDay","supportAllDayRow","calculateEndDate","dateCopy","setResourcesToItem","_getCoordinates","initialDates","dates","appointmentResources","currentCoords","getCoordinatesByDateInGroup","j","initialStartDate","_isAppointmentRecurrence","_getSingleAppointmentData","$appointment","skipDateCalculation","resultAppointmentData","isAllDay","appointmentDuration","updatedStartDate","_needUpdateAppointmentData","apptDataCalculator","getAppointmentDataCalculator","isFunction","coordinates","locate","getCellDataByCoordinates","hasClass","skipHoursProcessing","_getNormalizedTemplateArgs","push","targetedAppointmentData","currentIndex","subscribe","subject","action","Array","slice","Error","getDataByDroppableCell","onUpdatePrevented","updatingOptions","newData","performFailAction","err","_processActionResult","canceled","_expandAllDayPanel","update","always","e","_executeActionWhenOperationIsCompleted","actionOptions","_this8","isPromise","fromPromise","state","isError","error","showButtons","initialOption","getAppointmentPopup","getAppointmentDetailsForm","getUpdatedAppointment","getUpdatedAppointmentKeys","getResourceManager","getActions","skipNormalize","makeDate","_getEndDate","isSameDate","sameDate","_getRecurrenceException","exceptions","exceptionByStartDate","_convertRecurrenceException","join","exception","recurrenceEditorVisibilityChanged","find","dayHasAppointment","dayTimeStamp","startDateTimeStamp","endDateTimeStamp","inArray","setTargetedAppointmentResources","targetedAppointment","appointmentElement","appointmentIndex","resourcesSetter","getGroups","setResourceCallback","apptSettings","_positionMap","_getCellGroups","groupIndex","group","id","setting","left","top","showAppointmentPopup","createNewAppointment","currentAppointmentData","isEmptyObject","saveChanges","showAppointmentTooltip","showAppointmentTooltipCore","color","_tryGetAppointmentColor","currentData","isSingleBehavior","scrollToTime","hours","minutes","addingOptions","clientOffset","deleteAppointment","deletingOptions","getFirstDayOfWeek","firstDayOfWeekIndex","include","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scheduler/ui.scheduler.js)\r\n * Version: 19.1.15\r\n * Build date: Tue Apr 26 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _callbacks = require(\"../../core/utils/callbacks\");\r\nvar _callbacks2 = _interopRequireDefault(_callbacks);\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _translator2 = _interopRequireDefault(_translator);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _dialog = require(\"../dialog\");\r\nvar _dialog2 = _interopRequireDefault(_dialog);\r\nvar _utils = require(\"./utils.recurrence\");\r\nvar _utils2 = _interopRequireDefault(_utils);\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _dom2 = _interopRequireDefault(_dom);\r\nvar _date = require(\"../../core/utils/date\");\r\nvar _date2 = _interopRequireDefault(_date);\r\nvar _object = require(\"../../core/utils/object\");\r\nvar _object2 = _interopRequireDefault(_object);\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _devices = require(\"../../core/devices\");\r\nvar _devices2 = _interopRequireDefault(_devices);\r\nvar _config = require(\"../../core/config\");\r\nvar _config2 = _interopRequireDefault(_config);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _date_serialization = require(\"../../core/utils/date_serialization\");\r\nvar _date_serialization2 = _interopRequireDefault(_date_serialization);\r\nvar _date3 = require(\"../../localization/date\");\r\nvar _date4 = _interopRequireDefault(_date3);\r\nvar _ui3 = require(\"../widget/ui.widget\");\r\nvar _ui4 = _interopRequireDefault(_ui3);\r\nvar _uiScheduler = require(\"./ui.scheduler.subscribes\");\r\nvar _uiScheduler2 = _interopRequireDefault(_uiScheduler);\r\nvar _function_template = require(\"../widget/function_template\");\r\nvar _function_template2 = _interopRequireDefault(_function_template);\r\nvar _desktopTooltipStrategy = require(\"./tooltip_strategies/desktopTooltipStrategy\");\r\nvar _mobileTooltipStrategy = require(\"./tooltip_strategies/mobileTooltipStrategy\");\r\nvar _uiScheduler3 = require(\"./ui.scheduler.header\");\r\nvar _uiScheduler4 = _interopRequireDefault(_uiScheduler3);\r\nvar _uiScheduler5 = require(\"./workspaces/ui.scheduler.work_space_day\");\r\nvar _uiScheduler6 = _interopRequireDefault(_uiScheduler5);\r\nvar _uiScheduler7 = require(\"./workspaces/ui.scheduler.work_space_week\");\r\nvar _uiScheduler8 = _interopRequireDefault(_uiScheduler7);\r\nvar _uiScheduler9 = require(\"./workspaces/ui.scheduler.work_space_work_week\");\r\nvar _uiScheduler10 = _interopRequireDefault(_uiScheduler9);\r\nvar _uiScheduler11 = require(\"./workspaces/ui.scheduler.work_space_month\");\r\nvar _uiScheduler12 = _interopRequireDefault(_uiScheduler11);\r\nvar _uiScheduler13 = require(\"./workspaces/ui.scheduler.timeline_day\");\r\nvar _uiScheduler14 = _interopRequireDefault(_uiScheduler13);\r\nvar _uiScheduler15 = require(\"./workspaces/ui.scheduler.timeline_week\");\r\nvar _uiScheduler16 = _interopRequireDefault(_uiScheduler15);\r\nvar _uiScheduler17 = require(\"./workspaces/ui.scheduler.timeline_work_week\");\r\nvar _uiScheduler18 = _interopRequireDefault(_uiScheduler17);\r\nvar _uiScheduler19 = require(\"./workspaces/ui.scheduler.timeline_month\");\r\nvar _uiScheduler20 = _interopRequireDefault(_uiScheduler19);\r\nvar _uiScheduler21 = require(\"./workspaces/ui.scheduler.agenda\");\r\nvar _uiScheduler22 = _interopRequireDefault(_uiScheduler21);\r\nvar _uiScheduler23 = require(\"./ui.scheduler.resource_manager\");\r\nvar _uiScheduler24 = _interopRequireDefault(_uiScheduler23);\r\nvar _uiScheduler25 = require(\"./ui.scheduler.appointment_model\");\r\nvar _uiScheduler26 = _interopRequireDefault(_uiScheduler25);\r\nvar _uiScheduler27 = require(\"./ui.scheduler.appointments\");\r\nvar _uiScheduler28 = _interopRequireDefault(_uiScheduler27);\r\nvar _uiSchedulerAppointments = require(\"./ui.scheduler.appointments.layout_manager\");\r\nvar _uiSchedulerAppointments2 = _interopRequireDefault(_uiSchedulerAppointments);\r\nvar _compactAppointmentsHelper = require(\"./compactAppointmentsHelper\");\r\nvar _uiScheduler29 = require(\"./timezones/ui.scheduler.timezones\");\r\nvar _uiScheduler30 = _interopRequireDefault(_uiScheduler29);\r\nvar _async_template_mixin = require(\"../shared/async_template_mixin\");\r\nvar _async_template_mixin2 = _interopRequireDefault(_async_template_mixin);\r\nvar _data_helper = require(\"../../data_helper\");\r\nvar _data_helper2 = _interopRequireDefault(_data_helper);\r\nvar _ui5 = require(\"./ui.loading\");\r\nvar _ui6 = _interopRequireDefault(_ui5);\r\nvar _uiScheduler31 = require(\"./ui.scheduler.appointment_form\");\r\nvar _uiScheduler32 = _interopRequireDefault(_uiScheduler31);\r\nvar _popup = require(\"../popup\");\r\nvar _popup2 = _interopRequireDefault(_popup);\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _deferred2 = _interopRequireDefault(_deferred);\r\nvar _empty_template = require(\"../widget/empty_template\");\r\nvar _empty_template2 = _interopRequireDefault(_empty_template);\r\nvar _bindable_template = require(\"../widget/bindable_template\");\r\nvar _bindable_template2 = _interopRequireDefault(_bindable_template);\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nvar _browser = require(\"../../core/utils/browser\");\r\nvar _browser2 = _interopRequireDefault(_browser);\r\nvar _support = require(\"../../core/utils/support\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar when = _deferred2.default.when;\r\nvar Deferred = _deferred2.default.Deferred;\r\nvar toMs = _date2.default.dateToMilliseconds;\r\nvar WIDGET_CLASS = \"dx-scheduler\";\r\nvar WIDGET_SMALL_CLASS = \"\".concat(WIDGET_CLASS, \"-small\");\r\nvar WIDGET_ADAPTIVE_CLASS = \"\".concat(WIDGET_CLASS, \"-adaptive\");\r\nvar WIDGET_WIN_NO_TOUCH_CLASS = \"\".concat(WIDGET_CLASS, \"-win-no-touch\");\r\nvar WIDGET_READONLY_CLASS = \"\".concat(WIDGET_CLASS, \"-readonly\");\r\nvar APPOINTMENT_POPUP_CLASS = \"\".concat(WIDGET_CLASS, \"-appointment-popup\");\r\nvar RECURRENCE_EDITOR_ITEM_CLASS = \"\".concat(WIDGET_CLASS, \"-recurrence-rule-item\");\r\nvar RECURRENCE_EDITOR_OPENED_ITEM_CLASS = \"\".concat(WIDGET_CLASS, \"-recurrence-rule-item-opened\");\r\nvar WIDGET_SMALL_WIDTH = 400;\r\nvar APPOINTMENT_POPUP_WIDTH = 610;\r\nvar APPOINTMENT_POPUP_FULLSCREEN_WINDOW_WIDTH = 768;\r\nvar TOOLBAR_ITEM_AFTER_LOCATION = \"after\";\r\nvar TOOLBAR_ITEM_BEFORE_LOCATION = \"before\";\r\nvar FULL_DATE_FORMAT = \"yyyyMMddTHHmmss\";\r\nvar UTC_FULL_DATE_FORMAT = FULL_DATE_FORMAT + \"Z\";\r\nvar VIEWS_CONFIG = {\r\n    day: {\r\n        workSpace: _uiScheduler6.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    week: {\r\n        workSpace: _uiScheduler8.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    workWeek: {\r\n        workSpace: _uiScheduler10.default,\r\n        renderingStrategy: \"vertical\"\r\n    },\r\n    month: {\r\n        workSpace: _uiScheduler12.default,\r\n        renderingStrategy: \"horizontalMonth\"\r\n    },\r\n    timelineDay: {\r\n        workSpace: _uiScheduler14.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWeek: {\r\n        workSpace: _uiScheduler16.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineWorkWeek: {\r\n        workSpace: _uiScheduler18.default,\r\n        renderingStrategy: \"horizontal\"\r\n    },\r\n    timelineMonth: {\r\n        workSpace: _uiScheduler20.default,\r\n        renderingStrategy: \"horizontalMonthLine\"\r\n    },\r\n    agenda: {\r\n        workSpace: _uiScheduler22.default,\r\n        renderingStrategy: \"agenda\"\r\n    }\r\n};\r\nvar Scheduler = _ui4.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            views: [\"day\", \"week\"],\r\n            currentView: \"day\",\r\n            currentDate: _date2.default.trimTime(new Date),\r\n            min: void 0,\r\n            max: void 0,\r\n            dateSerializationFormat: void 0,\r\n            firstDayOfWeek: void 0,\r\n            groups: [],\r\n            resources: [],\r\n            dataSource: null,\r\n            customizeDateNavigatorText: void 0,\r\n            appointmentTemplate: \"item\",\r\n            dropDownAppointmentTemplate: \"dropDownAppointment\",\r\n            appointmentCollectorTemplate: \"appointmentCollector\",\r\n            dataCellTemplate: null,\r\n            timeCellTemplate: null,\r\n            resourceCellTemplate: null,\r\n            dateCellTemplate: null,\r\n            startDayHour: 0,\r\n            endDayHour: 24,\r\n            editing: {\r\n                allowAdding: true,\r\n                allowDeleting: true,\r\n                allowDragging: true,\r\n                allowResizing: true,\r\n                allowUpdating: true\r\n            },\r\n            showAllDayPanel: true,\r\n            showCurrentTimeIndicator: true,\r\n            shadeUntilCurrentTime: false,\r\n            indicatorUpdateInterval: 3e5,\r\n            indicatorTime: void 0,\r\n            recurrenceEditMode: \"dialog\",\r\n            cellDuration: 30,\r\n            maxAppointmentsPerCell: \"auto\",\r\n            selectedCellData: [],\r\n            groupByDate: false,\r\n            onAppointmentRendered: null,\r\n            onAppointmentClick: null,\r\n            onAppointmentDblClick: null,\r\n            onAppointmentContextMenu: null,\r\n            onCellClick: null,\r\n            onCellContextMenu: null,\r\n            onAppointmentAdding: null,\r\n            onAppointmentAdded: null,\r\n            onAppointmentUpdating: null,\r\n            onAppointmentUpdated: null,\r\n            onAppointmentDeleting: null,\r\n            onAppointmentDeleted: null,\r\n            onAppointmentFormOpening: null,\r\n            appointmentTooltipTemplate: \"appointmentTooltip\",\r\n            appointmentPopupTemplate: \"appointmentPopup\",\r\n            crossScrollingEnabled: false,\r\n            useDropDownViewSwitcher: false,\r\n            startDateExpr: \"startDate\",\r\n            endDateExpr: \"endDate\",\r\n            textExpr: \"text\",\r\n            descriptionExpr: \"description\",\r\n            allDayExpr: \"allDay\",\r\n            recurrenceRuleExpr: \"recurrenceRule\",\r\n            recurrenceExceptionExpr: \"recurrenceException\",\r\n            remoteFiltering: false,\r\n            timeZone: \"\",\r\n            startDateTimeZoneExpr: \"startDateTimeZone\",\r\n            endDateTimeZoneExpr: \"endDateTimeZone\",\r\n            noDataText: _message2.default.format(\"dxCollectionWidget-noDataText\"),\r\n            adaptivityEnabled: false,\r\n            allowMultipleCellSelection: true,\r\n            _appointmentTooltipOffset: {\r\n                x: 0,\r\n                y: 0\r\n            },\r\n            _appointmentTooltipButtonsPosition: \"bottom\",\r\n            _appointmentTooltipOpenButtonText: _message2.default.format(\"dxScheduler-openAppointment\"),\r\n            _dropDownButtonIcon: \"overflow\",\r\n            _appointmentCountPerCell: 2,\r\n            _collectorOffset: 0,\r\n            _appointmentOffset: 26\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return !_devices2.default.current().generic\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                editing: {\r\n                    allowDragging: false,\r\n                    allowResizing: false\r\n                }\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return _themes2.default.isMaterial()\r\n            },\r\n            options: {\r\n                useDropDownViewSwitcher: true,\r\n                dateCellTemplate: function(data, index, element) {\r\n                    var text = data.text;\r\n                    text.split(\" \").forEach(function(text, index) {\r\n                        var span = (0, _renderer2.default)(\"<span>\").text(text).addClass(\"dx-scheduler-header-panel-cell-date\");\r\n                        (0, _renderer2.default)(element).append(span);\r\n                        if (!index) {\r\n                            (0, _renderer2.default)(element).append(\" \")\r\n                        }\r\n                    })\r\n                },\r\n                _appointmentTooltipOffset: {\r\n                    x: 0,\r\n                    y: 11\r\n                },\r\n                _appointmentTooltipButtonsPosition: \"top\",\r\n                _appointmentTooltipOpenButtonText: null,\r\n                _dropDownButtonIcon: \"chevrondown\",\r\n                _appointmentCountPerCell: 1,\r\n                _collectorOffset: 20,\r\n                _appointmentOffset: 30\r\n            }\r\n        }])\r\n    },\r\n    _setDeprecatedOptions: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._deprecatedOptions, {\r\n            onAppointmentFormCreated: {\r\n                since: \"18.2\",\r\n                alias: \"onAppointmentFormOpening\"\r\n            }\r\n        })\r\n    },\r\n    _postponeDataSourceLoading: function(promise) {\r\n        this.postponedOperations.add(\"_reloadDataSource\", this._reloadDataSource.bind(this), promise)\r\n    },\r\n    _postponeResourceLoading: function() {\r\n        var _this = this;\r\n        var whenLoaded = this.postponedOperations.add(\"_loadResources\", function() {\r\n            return _this._loadResources()\r\n        });\r\n        var resolveCallbacks = new Deferred;\r\n        whenLoaded.done(function(resources) {\r\n            resolveCallbacks.resolve(resources)\r\n        });\r\n        this._postponeDataSourceLoading(whenLoaded);\r\n        return resolveCallbacks.promise()\r\n    },\r\n    _optionChanged: function(args) {\r\n        var _this2 = this;\r\n        var value = args.value;\r\n        var name = args.name;\r\n        switch (args.name) {\r\n            case \"customizeDateNavigatorText\":\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"firstDayOfWeek\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._updateOption(\"header\", name, value);\r\n                break;\r\n            case \"currentDate\":\r\n                value = this._dateOption(name);\r\n                value = _date2.default.trimTime(new Date(value));\r\n                this.option(\"selectedCellData\", []);\r\n                this._workSpace.option(name, new Date(value));\r\n                this._header.option(name, new Date(value));\r\n                this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\r\n                this._appointments.option(\"items\", []);\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case \"dataSource\":\r\n                this._initDataSource();\r\n                this._customizeStoreLoadOptions();\r\n                this._appointmentModel.setDataSource(this._dataSource);\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._updateOption(\"workSpace\", \"showAllDayPanel\", _this2.option(\"showAllDayPanel\"))\r\n                });\r\n                break;\r\n            case \"min\":\r\n            case \"max\":\r\n                value = this._dateOption(name);\r\n                this._updateOption(\"header\", name, new Date(value));\r\n                this._updateOption(\"workSpace\", name, new Date(value));\r\n                break;\r\n            case \"views\":\r\n                this._processCurrentView();\r\n                if (this._getCurrentViewOptions()) {\r\n                    this.repaint()\r\n                } else {\r\n                    this._header.option(name, value)\r\n                }\r\n                break;\r\n            case \"useDropDownViewSwitcher\":\r\n                this._header.option(name, value);\r\n                break;\r\n            case \"currentView\":\r\n                this._processCurrentView();\r\n                this.getLayoutManager().initRenderingStrategy(this._getAppointmentsRenderingStrategy());\r\n                this._appointments.option({\r\n                    items: [],\r\n                    allowDrag: this._allowDragging(),\r\n                    allowResize: this._allowResizing(),\r\n                    itemTemplate: this._getAppointmentTemplate(\"appointmentTemplate\")\r\n                });\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._updateHeader();\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._appointments.option(\"allowAllDayResize\", \"day\" !== value)\r\n                });\r\n                break;\r\n            case \"appointmentTemplate\":\r\n                this._appointments.option(\"itemTemplate\", value);\r\n                break;\r\n            case \"dateCellTemplate\":\r\n            case \"resourceCellTemplate\":\r\n            case \"dataCellTemplate\":\r\n            case \"timeCellTemplate\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this.repaint();\r\n                break;\r\n            case \"groups\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._filterAppointmentsByDate()\r\n                });\r\n                break;\r\n            case \"resources\":\r\n                this._resourcesManager.setResources(this.option(\"resources\"));\r\n                this._appointmentModel.setDataAccessors(this._combineDataAccessors());\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._appointments.option(\"items\", []);\r\n                    _this2._refreshWorkSpace(resources);\r\n                    _this2._filterAppointmentsByDate()\r\n                });\r\n                break;\r\n            case \"startDayHour\":\r\n            case \"endDayHour\":\r\n                this._appointments.option(\"items\", []);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.repaint();\r\n                this._filterAppointmentsByDate();\r\n                this._postponeDataSourceLoading();\r\n                break;\r\n            case \"onAppointmentAdding\":\r\n            case \"onAppointmentAdded\":\r\n            case \"onAppointmentUpdating\":\r\n            case \"onAppointmentUpdated\":\r\n            case \"onAppointmentDeleting\":\r\n            case \"onAppointmentDeleted\":\r\n            case \"onAppointmentFormOpening\":\r\n                this._actions[name] = this._createActionByOption(name);\r\n                break;\r\n            case \"onAppointmentRendered\":\r\n                this._appointments.option(\"onItemRendered\", this._getAppointmentRenderedAction());\r\n                break;\r\n            case \"onAppointmentClick\":\r\n                this._appointments.option(\"onItemClick\", this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentDblClick\":\r\n                this._appointments.option(name, this._createActionByOption(name));\r\n                break;\r\n            case \"onAppointmentContextMenu\":\r\n                this._appointments.option(\"onItemContextMenu\", this._createActionByOption(name));\r\n                break;\r\n            case \"noDataText\":\r\n            case \"allowMultipleCellSelection\":\r\n            case \"selectedCellData\":\r\n            case \"accessKey\":\r\n            case \"onCellClick\":\r\n                this._workSpace.option(name, value);\r\n                break;\r\n            case \"onCellContextMenu\":\r\n                this._workSpace.option(name, value);\r\n                break;\r\n            case \"crossScrollingEnabled\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._appointments.option(\"items\", []);\r\n                    _this2._refreshWorkSpace(resources);\r\n                    if (_this2._readyToRenderAppointments) {\r\n                        _this2._appointments.option(\"items\", _this2._getAppointmentsToRepaint())\r\n                    }\r\n                });\r\n                break;\r\n            case \"cellDuration\":\r\n                this._appointments.option(\"items\", []);\r\n                if (this._readyToRenderAppointments) {\r\n                    this._updateOption(\"workSpace\", \"hoursInterval\", value / 60);\r\n                    this._appointments.option(\"items\", this._getAppointmentsToRepaint())\r\n                }\r\n                break;\r\n            case \"tabIndex\":\r\n            case \"focusStateEnabled\":\r\n                this._updateOption(\"header\", name, value);\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this._appointments.option(name, value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"width\":\r\n                this._updateOption(\"header\", name, value);\r\n                if (this.option(\"crossScrollingEnabled\")) {\r\n                    this._updateOption(\"workSpace\", \"width\", value)\r\n                }\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"height\":\r\n                this.callBase(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"editing\":\r\n                this._initEditing();\r\n                var editing = this._editing;\r\n                this._bringEditingModeToAppointments(editing);\r\n                this.hideAppointmentTooltip();\r\n                this._cleanPopup();\r\n                break;\r\n            case \"showAllDayPanel\":\r\n                this._postponeResourceLoading().done(function(resources) {\r\n                    _this2._filterAppointmentsByDate();\r\n                    _this2._updateOption(\"workSpace\", \"allDayExpanded\", value);\r\n                    _this2._updateOption(\"workSpace\", name, value)\r\n                });\r\n                break;\r\n            case \"showCurrentTimeIndicator\":\r\n            case \"indicatorTime\":\r\n            case \"indicatorUpdateInterval\":\r\n            case \"shadeUntilCurrentTime\":\r\n            case \"groupByDate\":\r\n                this._updateOption(\"workSpace\", name, value);\r\n                this.repaint();\r\n                break;\r\n            case \"appointmentTooltipTemplate\":\r\n            case \"appointmentPopupTemplate\":\r\n            case \"recurrenceEditMode\":\r\n            case \"remoteFiltering\":\r\n            case \"timeZone\":\r\n            case \"dropDownAppointmentTemplate\":\r\n            case \"appointmentCollectorTemplate\":\r\n            case \"_appointmentTooltipOffset\":\r\n            case \"_appointmentTooltipButtonsPosition\":\r\n            case \"_appointmentTooltipOpenButtonText\":\r\n            case \"_dropDownButtonIcon\":\r\n            case \"_appointmentCountPerCell\":\r\n            case \"_collectorOffset\":\r\n            case \"_appointmentOffset\":\r\n                this.repaint();\r\n                break;\r\n            case \"dateSerializationFormat\":\r\n                break;\r\n            case \"maxAppointmentsPerCell\":\r\n                break;\r\n            case \"startDateExpr\":\r\n            case \"endDateExpr\":\r\n            case \"startDateTimeZoneExpr\":\r\n            case \"endDateTimeZoneExpr\":\r\n            case \"textExpr\":\r\n            case \"descriptionExpr\":\r\n            case \"allDayExpr\":\r\n            case \"recurrenceRuleExpr\":\r\n            case \"recurrenceExceptionExpr\":\r\n                this._updateExpression(name, value);\r\n                this._appointmentModel.setDataAccessors(this._combineDataAccessors());\r\n                this._initAppointmentTemplate();\r\n                this.repaint();\r\n                break;\r\n            case \"adaptivityEnabled\":\r\n                this._toggleAdaptiveClass();\r\n                this.repaint();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _updateHeader: function() {\r\n        var viewCountConfig = this._getViewCountConfig();\r\n        this._header.option(\"intervalCount\", viewCountConfig.intervalCount);\r\n        this._header.option(\"displayedDate\", this._workSpace._getViewStartByOptions());\r\n        this._header.option(\"min\", this._dateOption(\"min\"));\r\n        this._header.option(\"max\", this._dateOption(\"max\"));\r\n        this._header.option(\"currentDate\", this._dateOption(\"currentDate\"));\r\n        this._header.option(\"firstDayOfWeek\", this._getCurrentViewOption(\"firstDayOfWeek\"));\r\n        this._header.option(\"currentView\", this._currentView)\r\n    },\r\n    _dateOption: function(optionName) {\r\n        var optionValue = this._getCurrentViewOption(optionName);\r\n        return _date_serialization2.default.deserializeDate(optionValue)\r\n    },\r\n    _getSerializationFormat: function(optionName) {\r\n        var value = this._getCurrentViewOption(optionName);\r\n        if (\"number\" === typeof value) {\r\n            return \"number\"\r\n        }\r\n        if (!_type2.default.isString(value)) {\r\n            return\r\n        }\r\n        return _date_serialization2.default.getDateSerializationFormat(value)\r\n    },\r\n    _bringEditingModeToAppointments: function(editing) {\r\n        var editingConfig = {\r\n            allowDelete: editing.allowUpdating && editing.allowDeleting\r\n        };\r\n        if (!this._isAgenda()) {\r\n            editingConfig.allowDrag = editing.allowDragging;\r\n            editingConfig.allowResize = editing.allowResizing;\r\n            editingConfig.allowAllDayResize = editing.allowResizing && this._supportAllDayResizing()\r\n        }\r\n        this._appointments.option(editingConfig)\r\n    },\r\n    _isAgenda: function() {\r\n        return \"agenda\" === this._getAppointmentsRenderingStrategy()\r\n    },\r\n    _allowDragging: function() {\r\n        return this._editing.allowDragging && !this._isAgenda()\r\n    },\r\n    _allowResizing: function() {\r\n        return this._editing.allowResizing && !this._isAgenda()\r\n    },\r\n    _allowAllDayResizing: function() {\r\n        return this._editing.allowResizing && this._supportAllDayResizing()\r\n    },\r\n    _supportAllDayResizing: function() {\r\n        return \"day\" !== this._getCurrentViewType() || this._currentView.intervalCount > 1\r\n    },\r\n    _isAllDayExpanded: function(items) {\r\n        return this.option(\"showAllDayPanel\") && this._appointmentModel.hasAllDayAppointments(items, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"))\r\n    },\r\n    _getTimezoneOffsetByOption: function(date) {\r\n        return this._calculateTimezoneByValue(this.option(\"timeZone\"), date)\r\n    },\r\n    _calculateTimezoneByValue: function(timezone, date) {\r\n        var result = timezone;\r\n        if (\"string\" === typeof timezone) {\r\n            date = date || new Date;\r\n            var dateUtc = Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes());\r\n            result = _uiScheduler30.default.getTimezoneOffsetById(timezone, dateUtc)\r\n        }\r\n        return result\r\n    },\r\n    _filterAppointmentsByDate: function() {\r\n        var dateRange = this._workSpace.getDateRange();\r\n        this._appointmentModel.filterByDate(dateRange[0], dateRange[1], this.option(\"remoteFiltering\"), this.option(\"dateSerializationFormat\"))\r\n    },\r\n    _loadResources: function() {\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        var result = new Deferred;\r\n        this._resourcesManager.loadResources(groups).done(function(resources) {\r\n            this._loadedResources = resources;\r\n            result.resolve(resources)\r\n        }.bind(this));\r\n        return result.promise()\r\n    },\r\n    _dataSourceLoadedCallback: (0, _callbacks2.default)(),\r\n    _reloadDataSource: function() {\r\n        var result = new Deferred;\r\n        if (this._dataSource) {\r\n            this._dataSource.load().done(function() {\r\n                _ui6.default.hide();\r\n                this._fireContentReadyAction(result)\r\n            }.bind(this)).fail(function() {\r\n                _ui6.default.hide();\r\n                result.reject()\r\n            });\r\n            this._dataSource.isLoading() && _ui6.default.show({\r\n                container: this.$element(),\r\n                position: {\r\n                    of: this.$element()\r\n                }\r\n            })\r\n        } else {\r\n            this._fireContentReadyAction(result)\r\n        }\r\n        return result.promise()\r\n    },\r\n    _fireContentReadyAction: function(result) {\r\n        this.callBase();\r\n        result && result.resolve()\r\n    },\r\n    _dimensionChanged: function() {\r\n        var filteredItems = this.getFilteredItems();\r\n        this._toggleSmallClass();\r\n        if (!this._isAgenda() && filteredItems && this._isVisible()) {\r\n            this._workSpace._cleanAllowedPositions();\r\n            this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(filteredItems));\r\n            this._workSpace._dimensionChanged();\r\n            var appointments = this._layoutManager.createAppointmentsMap(filteredItems);\r\n            this._appointments.option(\"items\", appointments)\r\n        }\r\n        this.hideAppointmentTooltip();\r\n        this.resizePopup();\r\n        this._updatePopupFullScreenMode()\r\n    },\r\n    _clean: function() {\r\n        this._cleanPopup();\r\n        this.callBase()\r\n    },\r\n    _toggleSmallClass: function() {\r\n        var width = this.$element().get(0).getBoundingClientRect().width;\r\n        this.$element().toggleClass(WIDGET_SMALL_CLASS, width < WIDGET_SMALL_WIDTH)\r\n    },\r\n    _toggleAdaptiveClass: function() {\r\n        this.$element().toggleClass(WIDGET_ADAPTIVE_CLASS, this.option(\"adaptivityEnabled\"))\r\n    },\r\n    _visibilityChanged: function(visible) {\r\n        visible && this._dimensionChanged()\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _init: function() {\r\n        this._initExpressions({\r\n            startDate: this.option(\"startDateExpr\"),\r\n            endDate: this.option(\"endDateExpr\"),\r\n            startDateTimeZone: this.option(\"startDateTimeZoneExpr\"),\r\n            endDateTimeZone: this.option(\"endDateTimeZoneExpr\"),\r\n            allDay: this.option(\"allDayExpr\"),\r\n            text: this.option(\"textExpr\"),\r\n            description: this.option(\"descriptionExpr\"),\r\n            recurrenceRule: this.option(\"recurrenceRuleExpr\"),\r\n            recurrenceException: this.option(\"recurrenceExceptionExpr\")\r\n        });\r\n        this.callBase();\r\n        this._initDataSource();\r\n        this._loadedResources = [];\r\n        this._proxiedCustomizeStoreLoadOptionsHandler = this._customizeStoreLoadOptionsHandler.bind(this);\r\n        this._customizeStoreLoadOptions();\r\n        this.$element().addClass(WIDGET_CLASS).toggleClass(WIDGET_WIN_NO_TOUCH_CLASS, !!(_browser2.default.msie && _support.touch));\r\n        this._initEditing();\r\n        this._resourcesManager = new _uiScheduler24.default(this.option(\"resources\"));\r\n        var combinedDataAccessors = this._combineDataAccessors();\r\n        this._appointmentModel = new _uiScheduler26.default(this._dataSource, combinedDataAccessors, this.getAppointmentDurationInMinutes());\r\n        this._initActions();\r\n        this._compactAppointmentsHelper = new _compactAppointmentsHelper.CompactAppointmentsHelper(this);\r\n        this._subscribes = _uiScheduler2.default\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._initAppointmentTemplate();\r\n        this._defaultTemplates.appointmentTooltip = new _empty_template2.default(this);\r\n        this._defaultTemplates.appointmentPopup = new _empty_template2.default(this);\r\n        this._defaultTemplates.dropDownAppointment = new _empty_template2.default(this)\r\n    },\r\n    _initAppointmentTemplate: function() {\r\n        var that = this;\r\n        this._defaultTemplates.item = new _bindable_template2.default(function($container, data, model) {\r\n            var appointmentsInst = that.getAppointmentsInstance();\r\n            appointmentsInst._renderAppointmentTemplate.call(appointmentsInst, $container, data, model)\r\n        }, [\"html\", \"text\", \"startDate\", \"endDate\", \"allDay\", \"description\", \"recurrenceRule\", \"recurrenceException\", \"startDateTimeZone\", \"endDateTimeZone\"], this.option(\"integrationOptions.watchMethod\"), {\r\n            text: this._dataAccessors.getter.text,\r\n            startDate: this._dataAccessors.getter.startDate,\r\n            endDate: this._dataAccessors.getter.endDate,\r\n            startDateTimeZone: this._dataAccessors.getter.startDateTimeZone,\r\n            endDateTimeZone: this._dataAccessors.getter.endDateTimeZone,\r\n            allDay: this._dataAccessors.getter.allDay,\r\n            recurrenceRule: this._dataAccessors.getter.recurrenceRule\r\n        })\r\n    },\r\n    _combineDataAccessors: function() {\r\n        var resourcesDataAccessors = this._resourcesManager._dataAccessors;\r\n        var result = (0, _extend.extend)(true, {}, this._dataAccessors);\r\n        (0, _iterator.each)(resourcesDataAccessors, function(type, accessor) {\r\n            result[type].resources = accessor\r\n        }.bind(this));\r\n        return result\r\n    },\r\n    _renderContent: function() {\r\n        this._renderContentImpl()\r\n    },\r\n    _dataSourceChangedHandler: function(result) {\r\n        if (this._readyToRenderAppointments) {\r\n            this._workSpaceRecalculation.done(function() {\r\n                this._filteredItems = this.fire(\"prerenderFilter\");\r\n                this._workSpace.option(\"allDayExpanded\", this._isAllDayExpanded(this._filteredItems));\r\n                if (this._isAgenda()) {\r\n                    this.getRenderingStrategyInstance().calculateRows(this._filteredItems, 7, this.option(\"currentDate\"), true)\r\n                }\r\n                if (this._filteredItems.length && this._isVisible()) {\r\n                    this._appointments.option(\"items\", this._getAppointmentsToRepaint());\r\n                    this._appointmentModel.cleanModelState()\r\n                } else {\r\n                    this._appointments.option(\"items\", [])\r\n                }\r\n                if (this._isAgenda()) {\r\n                    this._workSpace._renderView();\r\n                    this._dataSourceLoadedCallback.fireWith(this, [result])\r\n                }\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _getAppointmentsToRepaint: function() {\r\n        var appointments = this._layoutManager.createAppointmentsMap(this._filteredItems);\r\n        return this._layoutManager.getRepaintedAppointments(appointments, this.getAppointmentsInstance().option(\"items\"))\r\n    },\r\n    _initExpressions: function(fields) {\r\n        var dataCoreUtils = require(\"../../core/utils/data\");\r\n        var isDateField = function(field) {\r\n            return \"startDate\" === field || \"endDate\" === field\r\n        };\r\n        if (!this._dataAccessors) {\r\n            this._dataAccessors = {\r\n                getter: {},\r\n                setter: {},\r\n                expr: {}\r\n            }\r\n        }(0, _iterator.each)(fields, function(name, expr) {\r\n            if (expr) {\r\n                var getter = dataCoreUtils.compileGetter(expr);\r\n                var setter = dataCoreUtils.compileSetter(expr);\r\n                var dateGetter;\r\n                var dateSetter;\r\n                if (isDateField(name)) {\r\n                    var that = this;\r\n                    dateGetter = function() {\r\n                        var value = getter.apply(this, arguments);\r\n                        if ((0, _config2.default)().forceIsoDateParsing) {\r\n                            if (!that.option(\"dateSerializationFormat\")) {\r\n                                var format = _date_serialization2.default.getDateSerializationFormat(value);\r\n                                if (format) {\r\n                                    that.option(\"dateSerializationFormat\", format)\r\n                                }\r\n                            }\r\n                            value = _date_serialization2.default.deserializeDate(value)\r\n                        }\r\n                        return value\r\n                    };\r\n                    dateSetter = function(object, value) {\r\n                        if ((0, _config2.default)().forceIsoDateParsing || that.option(\"dateSerializationFormat\")) {\r\n                            value = _date_serialization2.default.serializeDate(value, that.option(\"dateSerializationFormat\"))\r\n                        }\r\n                        setter.call(this, object, value)\r\n                    }\r\n                }\r\n                this._dataAccessors.getter[name] = dateGetter || getter;\r\n                this._dataAccessors.setter[name] = dateSetter || setter;\r\n                this._dataAccessors.expr[name + \"Expr\"] = expr\r\n            } else {\r\n                delete this._dataAccessors.getter[name];\r\n                delete this._dataAccessors.setter[name];\r\n                delete this._dataAccessors.expr[name + \"Expr\"]\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _updateExpression: function(name, value) {\r\n        var exprObj = {};\r\n        exprObj[name.replace(\"Expr\", \"\")] = value;\r\n        this._initExpressions(exprObj)\r\n    },\r\n    _initEditing: function() {\r\n        var editing = this.option(\"editing\");\r\n        this._editing = {\r\n            allowAdding: !!editing,\r\n            allowUpdating: !!editing,\r\n            allowDeleting: !!editing,\r\n            allowResizing: !!editing,\r\n            allowDragging: !!editing\r\n        };\r\n        if (_type2.default.isObject(editing)) {\r\n            this._editing = (0, _extend.extend)(this._editing, editing)\r\n        }\r\n        this._editing.allowDragging = this._editing.allowDragging && this._editing.allowUpdating;\r\n        this._editing.allowResizing = this._editing.allowResizing && this._editing.allowUpdating;\r\n        this.$element().toggleClass(WIDGET_READONLY_CLASS, this._isReadOnly())\r\n    },\r\n    _isReadOnly: function() {\r\n        var result = true;\r\n        var editing = this._editing;\r\n        for (var prop in editing) {\r\n            if (Object.prototype.hasOwnProperty.call(editing, prop)) {\r\n                result = result && !editing[prop]\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _customizeStoreLoadOptions: function() {\r\n        this._dataSource && this._dataSource.on(\"customizeStoreLoadOptions\", this._proxiedCustomizeStoreLoadOptionsHandler)\r\n    },\r\n    _dispose: function() {\r\n        this._appointmentTooltip && this._appointmentTooltip.dispose();\r\n        this.hideAppointmentPopup();\r\n        this.hideAppointmentTooltip();\r\n        this._cleanAsyncTemplatesTimer();\r\n        this._dataSource && this._dataSource.off(\"customizeStoreLoadOptions\", this._proxiedCustomizeStoreLoadOptionsHandler);\r\n        this.callBase()\r\n    },\r\n    _customizeStoreLoadOptionsHandler: function(options) {\r\n        options.storeLoadOptions.dxScheduler = {\r\n            startDate: this.getStartViewDate(),\r\n            endDate: this.getEndViewDate(),\r\n            resources: this.option(\"resources\")\r\n        }\r\n    },\r\n    _initActions: function() {\r\n        this._actions = {\r\n            onAppointmentAdding: this._createActionByOption(\"onAppointmentAdding\"),\r\n            onAppointmentAdded: this._createActionByOption(\"onAppointmentAdded\"),\r\n            onAppointmentUpdating: this._createActionByOption(\"onAppointmentUpdating\"),\r\n            onAppointmentUpdated: this._createActionByOption(\"onAppointmentUpdated\"),\r\n            onAppointmentDeleting: this._createActionByOption(\"onAppointmentDeleting\"),\r\n            onAppointmentDeleted: this._createActionByOption(\"onAppointmentDeleted\"),\r\n            onAppointmentFormOpening: this._createActionByOption(\"onAppointmentFormOpening\")\r\n        }\r\n    },\r\n    _getAppointmentRenderedAction: function() {\r\n        return this._createActionByOption(\"onAppointmentRendered\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _renderFocusTarget: _common.noop,\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._processCurrentView();\r\n        this._renderHeader();\r\n        this._layoutManager = new _uiSchedulerAppointments2.default(this, this._getAppointmentsRenderingStrategy());\r\n        this._appointments = this._createComponent(\"<div>\", _uiScheduler28.default, this._appointmentsConfig());\r\n        this._appointments.option(\"itemTemplate\", this._getAppointmentTemplate(\"appointmentTemplate\"));\r\n        this._appointmentTooltip = this.option(\"adaptivityEnabled\") ? new _mobileTooltipStrategy.MobileTooltipStrategy(this) : new _desktopTooltipStrategy.DesktopTooltipStrategy(this);\r\n        if (this._isLoaded()) {\r\n            this._initMarkupCore(this._loadedResources);\r\n            this._dataSourceChangedHandler(this._dataSource.items());\r\n            this._fireContentReadyAction()\r\n        } else {\r\n            this._loadResources().done(function(resources) {\r\n                this._initMarkupCore(resources);\r\n                this._reloadDataSource()\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _initMarkupCore: function(resources) {\r\n        var _this3 = this;\r\n        this._readyToRenderAppointments = _window2.default.hasWindow();\r\n        this._workSpace && this._cleanWorkspace();\r\n        this._renderWorkSpace(resources);\r\n        this._appointments.option({\r\n            fixedContainer: this._workSpace.getFixedContainer(),\r\n            allDayContainer: this._workSpace.getAllDayContainer()\r\n        });\r\n        this._waitAsyncTemplates(function() {\r\n            _this3._workSpaceRecalculation && _this3._workSpaceRecalculation.resolve()\r\n        });\r\n        this._filterAppointmentsByDate()\r\n    },\r\n    _isLoaded: function() {\r\n        return this._isResourcesLoaded() && this._isDataSourceLoaded()\r\n    },\r\n    _isResourcesLoaded: function() {\r\n        return _type2.default.isDefined(this._loadedResources)\r\n    },\r\n    _isDataSourceLoaded: function() {\r\n        return this._dataSource && this._dataSource.isLoaded()\r\n    },\r\n    _render: function() {\r\n        this._toggleSmallClass();\r\n        this._toggleAdaptiveClass();\r\n        this.callBase()\r\n    },\r\n    _renderHeader: function() {\r\n        var $header = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n        this._header = this._createComponent($header, _uiScheduler4.default, this._headerConfig())\r\n    },\r\n    _headerConfig: function() {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var countConfig = this._getViewCountConfig();\r\n        var result = (0, _extend.extend)({\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            currentView: this._currentView,\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            width: this.option(\"width\"),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            useDropDownViewSwitcher: this.option(\"useDropDownViewSwitcher\"),\r\n            _dropDownButtonIcon: this.option(\"_dropDownButtonIcon\"),\r\n            customizeDateNavigatorText: this.option(\"customizeDateNavigatorText\")\r\n        }, currentViewOptions);\r\n        result.observer = this;\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.views = this.option(\"views\");\r\n        result.min = new Date(this._dateOption(\"min\"));\r\n        result.max = new Date(this._dateOption(\"max\"));\r\n        result.currentDate = _date2.default.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        return result\r\n    },\r\n    _appointmentsConfig: function() {\r\n        var that = this;\r\n        var config = {\r\n            observer: this,\r\n            onItemRendered: this._getAppointmentRenderedAction(),\r\n            onItemClick: this._createActionByOption(\"onAppointmentClick\"),\r\n            onItemContextMenu: this._createActionByOption(\"onAppointmentContextMenu\"),\r\n            onAppointmentDblClick: this._createActionByOption(\"onAppointmentDblClick\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            allowDrag: this._allowDragging(),\r\n            allowDelete: this._editing.allowUpdating && this._editing.allowDeleting,\r\n            allowResize: this._allowResizing(),\r\n            allowAllDayResize: this._allowAllDayResizing(),\r\n            rtlEnabled: this.option(\"rtlEnabled\"),\r\n            onContentReady: function() {\r\n                that._workSpace && that._workSpace.option(\"allDayExpanded\", that._isAllDayExpanded(that.getFilteredItems()));\r\n            }\r\n        };\r\n        return config\r\n    },\r\n    getCollectorOffset: function() {\r\n        if (this._workSpace.needApplyCollectorOffset() && !this.option(\"adaptivityEnabled\")) {\r\n            return this.option(\"_collectorOffset\")\r\n        } else {\r\n            return 0\r\n        }\r\n    },\r\n    getAppointmentDurationInMinutes: function() {\r\n        return this._getCurrentViewOption(\"cellDuration\")\r\n    },\r\n    _processCurrentView: function() {\r\n        var views = this.option(\"views\");\r\n        var currentView = this.option(\"currentView\");\r\n        var that = this;\r\n        this._currentView = currentView;\r\n        (0, _iterator.each)(views, function(_, view) {\r\n            var isViewIsObject = _type2.default.isObject(view);\r\n            var viewName = isViewIsObject ? view.name : view;\r\n            var viewType = view.type;\r\n            if (currentView === viewName || currentView === viewType) {\r\n                that._currentView = view;\r\n                return false\r\n            }\r\n        })\r\n    },\r\n    _getCurrentViewType: function() {\r\n        return this._currentView.type || this._currentView\r\n    },\r\n    _getAppointmentsRenderingStrategy: function() {\r\n        return VIEWS_CONFIG[this._getCurrentViewType()].renderingStrategy\r\n    },\r\n    _renderWorkSpace: function(groups) {\r\n        this._readyToRenderAppointments && this._toggleSmallClass();\r\n        var $workSpace = (0, _renderer2.default)(\"<div>\").appendTo(this.$element());\r\n        var countConfig = this._getViewCountConfig();\r\n        this._workSpace = this._createComponent($workSpace, VIEWS_CONFIG[this._getCurrentViewType()].workSpace, this._workSpaceConfig(groups, countConfig));\r\n        this._workSpace.getWorkArea().append(this._appointments.$element());\r\n        this._recalculateWorkspace();\r\n        countConfig.startDate && this._header && this._header.option(\"currentDate\", this._workSpace._getHeaderDate());\r\n        this._appointments.option(\"_collectorOffset\", this.getCollectorOffset())\r\n    },\r\n    _getViewCountConfig: function() {\r\n        var currentView = this.option(\"currentView\");\r\n        var view = this._getViewByName(currentView);\r\n        var viewCount = view && view.intervalCount || 1;\r\n        var startDate = view && view.startDate || null;\r\n        return {\r\n            intervalCount: viewCount,\r\n            startDate: startDate\r\n        }\r\n    },\r\n    _getViewByName: function(name) {\r\n        var views = this.option(\"views\");\r\n        for (var i = 0; i < views.length; i++) {\r\n            if (views[i].name === name || views[i].type === name || views[i] === name) {\r\n                return views[i]\r\n            }\r\n        }\r\n    },\r\n    _recalculateWorkspace: function() {\r\n        var _this4 = this;\r\n        this._workSpaceRecalculation = new Deferred;\r\n        this._waitAsyncTemplates(function() {\r\n            _dom2.default.triggerResizeEvent(_this4._workSpace.$element());\r\n            _this4._workSpace._refreshDateTimeIndication()\r\n        })\r\n    },\r\n    _workSpaceConfig: function(groups, countConfig) {\r\n        var _this5 = this;\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        var result = (0, _extend.extend)({\r\n            noDataText: this.option(\"noDataText\"),\r\n            firstDayOfWeek: this.option(\"firstDayOfWeek\"),\r\n            startDayHour: this.option(\"startDayHour\"),\r\n            endDayHour: this.option(\"endDayHour\"),\r\n            tabIndex: this.option(\"tabIndex\"),\r\n            accessKey: this.option(\"accessKey\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            cellDuration: this.option(\"cellDuration\"),\r\n            showAllDayPanel: this.option(\"showAllDayPanel\"),\r\n            showCurrentTimeIndicator: this.option(\"showCurrentTimeIndicator\"),\r\n            indicatorTime: this.option(\"indicatorTime\"),\r\n            indicatorUpdateInterval: this.option(\"indicatorUpdateInterval\"),\r\n            shadeUntilCurrentTime: this.option(\"shadeUntilCurrentTime\"),\r\n            allDayExpanded: this._appointments.option(\"items\"),\r\n            crossScrollingEnabled: this.option(\"crossScrollingEnabled\"),\r\n            dataCellTemplate: this.option(\"dataCellTemplate\"),\r\n            timeCellTemplate: this.option(\"timeCellTemplate\"),\r\n            resourceCellTemplate: this.option(\"resourceCellTemplate\"),\r\n            dateCellTemplate: this.option(\"dateCellTemplate\"),\r\n            allowMultipleCellSelection: this.option(\"allowMultipleCellSelection\"),\r\n            selectedCellData: this.option(\"selectedCellData\"),\r\n            onSelectionChanged: function(args) {\r\n                _this5.option(\"selectedCellData\", args.selectedCellData)\r\n            },\r\n            groupByDate: this._getCurrentViewOption(\"groupByDate\")\r\n        }, currentViewOptions);\r\n        result.observer = this;\r\n        result.intervalCount = countConfig.intervalCount;\r\n        result.startDate = countConfig.startDate;\r\n        result.groups = groups;\r\n        result.onCellClick = this._createActionByOption(\"onCellClick\");\r\n        result.onCellContextMenu = this._createActionByOption(\"onCellContextMenu\");\r\n        result.min = new Date(this._dateOption(\"min\"));\r\n        result.max = new Date(this._dateOption(\"max\"));\r\n        result.currentDate = _date2.default.trimTime(new Date(this._dateOption(\"currentDate\")));\r\n        result.hoursInterval = result.cellDuration / 60;\r\n        result.allDayExpanded = this._isAllDayExpanded(this.getFilteredItems());\r\n        result.dataCellTemplate = result.dataCellTemplate ? this._getTemplate(result.dataCellTemplate) : null;\r\n        result.timeCellTemplate = result.timeCellTemplate ? this._getTemplate(result.timeCellTemplate) : null;\r\n        result.resourceCellTemplate = result.resourceCellTemplate ? this._getTemplate(result.resourceCellTemplate) : null;\r\n        result.dateCellTemplate = result.dateCellTemplate ? this._getTemplate(result.dateCellTemplate) : null;\r\n        return result\r\n    },\r\n    _getCurrentViewOptions: function() {\r\n        return this._currentView\r\n    },\r\n    _getCurrentViewOption: function(optionName) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (currentViewOptions && void 0 !== currentViewOptions[optionName]) {\r\n            return currentViewOptions[optionName]\r\n        }\r\n        return this.option(optionName)\r\n    },\r\n    _getAppointmentTemplate: function(optionName) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (currentViewOptions && currentViewOptions[optionName]) {\r\n            return this._getTemplate(currentViewOptions[optionName])\r\n        }\r\n        return this._getTemplateByOption(optionName)\r\n    },\r\n    _updateOption: function(viewName, optionName, value) {\r\n        var currentViewOptions = this._getCurrentViewOptions();\r\n        if (!currentViewOptions || !_type2.default.isDefined(currentViewOptions[optionName])) {\r\n            this[\"_\" + viewName].option(optionName, value)\r\n        }\r\n    },\r\n    _refreshWorkSpace: function(groups) {\r\n        var _this6 = this;\r\n        this._cleanWorkspace();\r\n        delete this._workSpace;\r\n        this._renderWorkSpace(groups);\r\n        if (this._readyToRenderAppointments) {\r\n            this._appointments.option({\r\n                fixedContainer: this._workSpace.getFixedContainer(),\r\n                allDayContainer: this._workSpace.getAllDayContainer()\r\n            });\r\n            this._waitAsyncTemplates(function() {\r\n                _this6._workSpaceRecalculation.resolve()\r\n            })\r\n        }\r\n    },\r\n    _cleanWorkspace: function() {\r\n        this._appointments.$element().detach();\r\n        this._workSpace._dispose();\r\n        this._workSpace.$element().remove();\r\n        this.option(\"selectedCellData\", [])\r\n    },\r\n    getWorkSpaceScrollable: function() {\r\n        return this._workSpace.getScrollable()\r\n    },\r\n    getWorkSpaceScrollableScrollTop: function(allDay) {\r\n        return this._workSpace.getGroupedScrollableScrollTop(allDay)\r\n    },\r\n    getWorkSpaceScrollableScrollLeft: function() {\r\n        return this._workSpace.getScrollableScrollLeft()\r\n    },\r\n    getWorkSpaceScrollableContainer: function() {\r\n        return this._workSpace.getScrollableContainer()\r\n    },\r\n    getWorkSpaceAllDayHeight: function() {\r\n        return this._workSpace.getAllDayHeight()\r\n    },\r\n    getWorkSpaceAllDayOffset: function() {\r\n        return this._workSpace.getAllDayOffset()\r\n    },\r\n    getWorkSpaceHeaderPanelHeight: function() {\r\n        return this._workSpace.getHeaderPanelHeight()\r\n    },\r\n    getWorkSpaceDateTableOffset: function() {\r\n        return !this.option(\"crossScrollingEnabled\") || this.option(\"rtlEnabled\") ? this._workSpace.getWorkSpaceLeftOffset() : 0\r\n    },\r\n    getWorkSpace: function() {\r\n        return this._workSpace\r\n    },\r\n    getAppointmentModel: function() {\r\n        return this._appointmentModel\r\n    },\r\n    getHeader: function() {\r\n        return this._header\r\n    },\r\n    getMaxAppointmentsPerCell: function() {\r\n        return this._getCurrentViewOption(\"maxAppointmentsPerCell\")\r\n    },\r\n    _createPopup: function(appointmentData, processTimeZone) {\r\n        this._$popup = (0, _renderer2.default)(\"<div>\").addClass(APPOINTMENT_POPUP_CLASS).appendTo(this.$element());\r\n        this._initDynamicPopupTemplate(appointmentData, processTimeZone);\r\n        this._popup = this._createComponent(this._$popup, _popup2.default, this._popupConfig(appointmentData))\r\n    },\r\n    _popupContent: function(appointmentData, processTimeZone) {\r\n        var $popupContent = this._popup.$content();\r\n        var $form = (0, _renderer2.default)(\"<div>\").appendTo($popupContent);\r\n        this._createOrUpdateForm(appointmentData, processTimeZone, $form);\r\n        return $popupContent\r\n    },\r\n    _createAppointmentForm: function(formData, $content) {\r\n        var allDay = this.fire(\"getField\", \"allDay\", formData);\r\n        var resources = this.option(\"resources\");\r\n        _uiScheduler32.default.prepareAppointmentFormEditors(allDay, {\r\n            textExpr: this._dataAccessors.expr.textExpr,\r\n            allDayExpr: this._dataAccessors.expr.allDayExpr,\r\n            startDateExpr: this._dataAccessors.expr.startDateExpr,\r\n            endDateExpr: this._dataAccessors.expr.endDateExpr,\r\n            descriptionExpr: this._dataAccessors.expr.descriptionExpr,\r\n            recurrenceRuleExpr: this._dataAccessors.expr.recurrenceRuleExpr,\r\n            startDateTimeZoneExpr: this._dataAccessors.expr.startDateTimeZoneExpr,\r\n            endDateTimeZoneExpr: this._dataAccessors.expr.endDateTimeZoneExpr\r\n        }, this);\r\n        if (resources && resources.length) {\r\n            this._resourcesManager.setResources(this.option(\"resources\"));\r\n            _uiScheduler32.default.concatResources(this._resourcesManager.getEditors())\r\n        }\r\n        this._appointmentForm = _uiScheduler32.default.create(this._createComponent.bind(this), $content, this._editAppointmentData ? !this._editing.allowUpdating : false, formData)\r\n    },\r\n    _createOrUpdateForm: function(appointmentData, processTimeZone, $content) {\r\n        var allDay = this.fire(\"getField\", \"allDay\", appointmentData);\r\n        var startDate = this.fire(\"getField\", \"startDate\", appointmentData);\r\n        var endDate = this.fire(\"getField\", \"endDate\", appointmentData);\r\n        (0, _iterator.each)(this._resourcesManager.getResourcesFromItem(appointmentData, true) || {}, function(resourceName, resourceValue) {\r\n            appointmentData[resourceName] = resourceValue\r\n        });\r\n        var formData = (0, _extend.extend)(true, {}, appointmentData);\r\n        if (processTimeZone) {\r\n            startDate = this.fire(\"convertDateByTimezone\", startDate);\r\n            endDate = this.fire(\"convertDateByTimezone\", endDate);\r\n            this.fire(\"setField\", \"startDate\", formData, startDate);\r\n            this.fire(\"setField\", \"endDate\", formData, endDate)\r\n        }\r\n        if (this._appointmentForm) {\r\n            var startDateExpr = this._dataAccessors.expr.startDateExpr;\r\n            var endDateExpr = this._dataAccessors.expr.endDateExpr;\r\n            formData.recurrenceRule = formData.recurrenceRule || null;\r\n            _uiScheduler32.default.updateFormData(this._appointmentForm, formData);\r\n            this._appointmentForm.option(\"readOnly\", this._editAppointmentData ? !this._editing.allowUpdating : false);\r\n            _uiScheduler32.default.checkEditorsType(this._appointmentForm, startDateExpr, endDateExpr, allDay)\r\n        } else {\r\n            this._createAppointmentForm(formData, $content)\r\n        }\r\n        var recurrenceRuleExpr = this._dataAccessors.expr.recurrenceRuleExpr;\r\n        var recurrentEditorItem = recurrenceRuleExpr ? this._appointmentForm.itemOption(recurrenceRuleExpr) : null;\r\n        if (recurrentEditorItem) {\r\n            var options = recurrentEditorItem.editorOptions || {};\r\n            options.startDate = startDate;\r\n            this._appointmentForm.itemOption(recurrenceRuleExpr, \"editorOptions\", options)\r\n        }\r\n        this._actions.onAppointmentFormOpening({\r\n            form: this._appointmentForm,\r\n            appointmentData: appointmentData\r\n        })\r\n    },\r\n    _initDynamicPopupTemplate: function(appointmentData, processTimeZone) {\r\n        var that = this;\r\n        this._defaultTemplates.appointmentPopup = new _function_template2.default(function(options) {\r\n            var $popupContent = that._popupContent(appointmentData, processTimeZone);\r\n            (0, _renderer2.default)(options.container).append($popupContent);\r\n            return (0, _renderer2.default)(options.container)\r\n        })\r\n    },\r\n    _isPopupFullScreenNeeded: function() {\r\n        if (_window2.default.hasWindow()) {\r\n            var window = _window2.default.getWindow();\r\n            return (0, _renderer2.default)(window).width() < APPOINTMENT_POPUP_FULLSCREEN_WINDOW_WIDTH\r\n        }\r\n        return false\r\n    },\r\n    _updatePopupFullScreenMode: function() {\r\n        if (this._popup && this._popup.option(\"visible\")) {\r\n            var isFullScreen = this._isPopupFullScreenNeeded();\r\n            this._popup.option({\r\n                maxWidth: isFullScreen ? \"100%\" : APPOINTMENT_POPUP_WIDTH,\r\n                fullScreen: isFullScreen\r\n            })\r\n        }\r\n    },\r\n    _popupConfig: function(appointmentData) {\r\n        var _this7 = this;\r\n        var template = this._getTemplateByOption(\"appointmentPopupTemplate\");\r\n        return {\r\n            height: \"auto\",\r\n            maxHeight: \"100%\",\r\n            onHiding: function() {\r\n                return _this7.focus()\r\n            },\r\n            contentTemplate: new _function_template2.default(function(options) {\r\n                return template.render({\r\n                    model: appointmentData,\r\n                    container: options.container\r\n                })\r\n            }),\r\n            onShowing: function() {\r\n                return _this7._updatePopupFullScreenMode()\r\n            },\r\n            defaultOptionsRules: [{\r\n                device: function() {\r\n                    return _devices2.default.current().android\r\n                },\r\n                options: {\r\n                    showTitle: false\r\n                }\r\n            }]\r\n        }\r\n    },\r\n    _getPopupToolbarItems: function() {\r\n        var isIOs = \"ios\" === _devices2.default.current().platform;\r\n        return [{\r\n            shortcut: \"done\",\r\n            location: TOOLBAR_ITEM_AFTER_LOCATION,\r\n            onClick: this._doneButtonClickHandler.bind(this)\r\n        }, {\r\n            shortcut: \"cancel\",\r\n            location: isIOs ? TOOLBAR_ITEM_BEFORE_LOCATION : TOOLBAR_ITEM_AFTER_LOCATION\r\n        }]\r\n    },\r\n    _cleanPopup: function() {\r\n        if (this._$popup) {\r\n            this._popup.$element().remove();\r\n            delete this._$popup;\r\n            delete this._popup;\r\n            delete this._appointmentForm\r\n        }\r\n    },\r\n    _doneButtonClickHandler: function(args) {\r\n        args.cancel = true;\r\n        this._saveChanges(true);\r\n        if (this._lastEditData) {\r\n            var startDate = this.fire(\"getField\", \"startDate\", this._lastEditData);\r\n            this._workSpace.updateScrollPosition(startDate);\r\n            delete this._lastEditData\r\n        }\r\n    },\r\n    _saveChanges: function(disableButton) {\r\n        var validation = this._appointmentForm.validate();\r\n        if (validation && !validation.isValid) {\r\n            return false\r\n        }\r\n        disableButton && this._disableDoneButton();\r\n        var formData = _object2.default.deepExtendArraySafe({}, this._getFormData(), true);\r\n        var oldData = this._editAppointmentData;\r\n        var recData = this._updatedRecAppointment;\r\n\r\n        function convert(obj, dateFieldName) {\r\n            var date = new Date(this.fire(\"getField\", dateFieldName, obj));\r\n            var tzDiff = this._getTimezoneOffsetByOption() * toMs(\"hour\") + this.fire(\"getClientTimezoneOffset\", date);\r\n            return new Date(date.getTime() + tzDiff)\r\n        }\r\n        if (oldData) {\r\n            this._convertDatesByTimezoneBack(false, formData)\r\n        }\r\n        if (oldData && !recData) {\r\n            this.updateAppointment(oldData, formData)\r\n        } else {\r\n            if (recData) {\r\n                this.updateAppointment(oldData, recData);\r\n                delete this._updatedRecAppointment;\r\n                if (\"number\" === typeof this._getTimezoneOffsetByOption()) {\r\n                    this.fire(\"setField\", \"startDate\", formData, convert.call(this, formData, \"startDate\"));\r\n                    this.fire(\"setField\", \"endDate\", formData, convert.call(this, formData, \"endDate\"))\r\n                }\r\n            }\r\n            this.addAppointment(formData)\r\n        }\r\n        this._enableDoneButton();\r\n        this._lastEditData = formData;\r\n        return true\r\n    },\r\n    _getFormData: function() {\r\n        var formData = this._appointmentForm.option(\"formData\");\r\n        var startDate = this.fire(\"getField\", \"startDate\", formData);\r\n        var endDate = this.fire(\"getField\", \"endDate\", formData);\r\n        this.fire(\"setField\", \"startDate\", formData, startDate);\r\n        this.fire(\"setField\", \"endDate\", formData, endDate);\r\n        return formData\r\n    },\r\n    _convertDatesByTimezoneBack: function(applyAppointmentTimezone, sourceAppointmentData, targetAppointmentData) {\r\n        targetAppointmentData = targetAppointmentData || sourceAppointmentData;\r\n        var processedStartDate = this.fire(\"convertDateByTimezoneBack\", this.fire(\"getField\", \"startDate\", sourceAppointmentData), applyAppointmentTimezone && this.fire(\"getField\", \"startDateTimeZone\", sourceAppointmentData));\r\n        var processedEndDate = this.fire(\"convertDateByTimezoneBack\", this.fire(\"getField\", \"endDate\", sourceAppointmentData), applyAppointmentTimezone && this.fire(\"getField\", \"endDateTimeZone\", sourceAppointmentData));\r\n        this.fire(\"setField\", \"startDate\", targetAppointmentData, processedStartDate);\r\n        this.fire(\"setField\", \"endDate\", targetAppointmentData, processedEndDate)\r\n    },\r\n    _disableDoneButton: function() {\r\n        var toolbarItems = this._popup.option(\"toolbarItems\");\r\n        toolbarItems[0].options = (0, _extend.extend)(toolbarItems[0].options, {\r\n            disabled: true\r\n        });\r\n        this._popup.option(\"toolbarItems\", toolbarItems)\r\n    },\r\n    _enableDoneButton: function() {\r\n        var toolbarItems = this._popup.option(\"toolbarItems\");\r\n        toolbarItems[0].options = (0, _extend.extend)(toolbarItems[0].options, {\r\n            disabled: false\r\n        });\r\n        this._popup.option(\"toolbarItems\", toolbarItems)\r\n    },\r\n    _checkRecurringAppointment: function(targetAppointment, singleAppointment, exceptionDate, callback, isDeleted, isPopupEditing) {\r\n        delete this._updatedRecAppointment;\r\n        var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", targetAppointment);\r\n        if (!_utils2.default.getRecurrenceRule(recurrenceRule).isValid || !this._editing.allowUpdating) {\r\n            callback();\r\n            return\r\n        }\r\n        var editMode = this.option(\"recurrenceEditMode\");\r\n        switch (editMode) {\r\n            case \"series\":\r\n                callback();\r\n                break;\r\n            case \"occurrence\":\r\n                this._singleAppointmentChangesHandler(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing);\r\n                break;\r\n            default:\r\n                this._showRecurrenceChangeConfirm(isDeleted).done(function(result) {\r\n                    result && callback();\r\n                    !result && this._singleAppointmentChangesHandler(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing)\r\n                }.bind(this)).fail(function() {\r\n                    this._appointments.moveAppointmentBack()\r\n                }.bind(this))\r\n        }\r\n    },\r\n    _singleAppointmentChangesHandler: function(targetAppointment, singleAppointment, exceptionDate, isDeleted, isPopupEditing) {\r\n        exceptionDate = new Date(exceptionDate);\r\n\r\n        function processAppointmentDates(appointment, commonTimezoneOffset) {\r\n            var startDate = this.fire(\"getField\", \"startDate\", appointment);\r\n            var processedStartDate = this.fire(\"convertDateByTimezoneBack\", startDate, this.fire(\"getField\", \"startDateTimeZone\", appointment));\r\n            var endDate = this.fire(\"getField\", \"endDate\", appointment);\r\n            var processedEndDate = this.fire(\"convertDateByTimezoneBack\", endDate, this.fire(\"getField\", \"endDateTimeZone\", appointment));\r\n            if (\"number\" === typeof commonTimezoneOffset && !isNaN(commonTimezoneOffset)) {\r\n                var startDateClientTzOffset = -(this._subscribes.getClientTimezoneOffset(startDate) / toMs(\"hour\"));\r\n                var endDateClientTzOffset = -(this._subscribes.getClientTimezoneOffset(endDate) / toMs(\"hour\"));\r\n                var processedStartDateInUTC = processedStartDate.getTime() - startDateClientTzOffset * toMs(\"hour\");\r\n                var processedEndDateInUTC = processedEndDate.getTime() - endDateClientTzOffset * toMs(\"hour\");\r\n                processedStartDate = new Date(processedStartDateInUTC + commonTimezoneOffset * toMs(\"hour\"));\r\n                processedEndDate = new Date(processedEndDateInUTC + commonTimezoneOffset * toMs(\"hour\"))\r\n            }\r\n            this.fire(\"setField\", \"startDate\", appointment, processedStartDate);\r\n            this.fire(\"setField\", \"endDate\", appointment, processedEndDate)\r\n        }\r\n        this.fire(\"setField\", \"recurrenceRule\", singleAppointment, \"\");\r\n        this.fire(\"setField\", \"recurrenceException\", singleAppointment, \"\");\r\n        if (!isDeleted && !isPopupEditing) {\r\n            processAppointmentDates.call(this, singleAppointment, this._getTimezoneOffsetByOption());\r\n            this.addAppointment(singleAppointment)\r\n        }\r\n        var recurrenceException = this._makeDateAsRecurrenceException(exceptionDate, targetAppointment);\r\n        var updatedAppointment = (0, _extend.extend)({}, targetAppointment);\r\n        this.fire(\"setField\", \"recurrenceException\", updatedAppointment, recurrenceException);\r\n        if (isPopupEditing) {\r\n            this._updatedRecAppointment = updatedAppointment;\r\n            processAppointmentDates.call(this, singleAppointment);\r\n            this._showAppointmentPopup(singleAppointment, true, true);\r\n            this._editAppointmentData = targetAppointment\r\n        } else {\r\n            this._updateAppointment(targetAppointment, updatedAppointment, function() {\r\n                this._appointments.moveAppointmentBack()\r\n            })\r\n        }\r\n    },\r\n    _makeDateAsRecurrenceException: function(exceptionDate, targetAppointment) {\r\n        var startDate = this._getStartDate(targetAppointment, true);\r\n        var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", targetAppointment);\r\n        var exceptionByDate = this._getRecurrenceExceptionDate(exceptionDate, startDate, startDateTimeZone);\r\n        var recurrenceException = this.fire(\"getField\", \"recurrenceException\", targetAppointment);\r\n        return recurrenceException ? recurrenceException + \",\" + exceptionByDate : exceptionByDate\r\n    },\r\n    _getRecurrenceExceptionDate: function(exceptionStartDate, targetStartDate, startDateTimeZone) {\r\n        exceptionStartDate = this.fire(\"convertDateByTimezoneBack\", exceptionStartDate, startDateTimeZone);\r\n        var appointmentStartDate = this.fire(\"convertDateByTimezoneBack\", targetStartDate, startDateTimeZone);\r\n        exceptionStartDate.setHours(appointmentStartDate.getHours(), appointmentStartDate.getMinutes(), appointmentStartDate.getSeconds(), appointmentStartDate.getMilliseconds());\r\n        var timezoneDiff = targetStartDate.getTimezoneOffset() - exceptionStartDate.getTimezoneOffset();\r\n        exceptionStartDate = new Date(exceptionStartDate.getTime() - timezoneDiff * toMs(\"minute\"));\r\n        return _date_serialization2.default.serializeDate(exceptionStartDate, UTC_FULL_DATE_FORMAT)\r\n    },\r\n    _showRecurrenceChangeConfirm: function(isDeleted) {\r\n        var message = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteMessage\" : \"dxScheduler-confirmRecurrenceEditMessage\");\r\n        var seriesText = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteSeries\" : \"dxScheduler-confirmRecurrenceEditSeries\");\r\n        var occurrenceText = _message2.default.format(isDeleted ? \"dxScheduler-confirmRecurrenceDeleteOccurrence\" : \"dxScheduler-confirmRecurrenceEditOccurrence\");\r\n        return _dialog2.default.custom({\r\n            messageHtml: message,\r\n            showCloseButton: true,\r\n            showTitle: true,\r\n            buttons: [{\r\n                text: seriesText,\r\n                onClick: function() {\r\n                    return true\r\n                }\r\n            }, {\r\n                text: occurrenceText,\r\n                onClick: function() {\r\n                    return false\r\n                }\r\n            }]\r\n        }).show()\r\n    },\r\n    _getUpdatedData: function(options) {\r\n        var target = options.data || options;\r\n        var cellData = this.getTargetCellData();\r\n        var targetAllDay = this.fire(\"getField\", \"allDay\", target);\r\n        var targetStartDate = new Date(this.fire(\"getField\", \"startDate\", target));\r\n        var targetEndDate = new Date(this.fire(\"getField\", \"endDate\", target));\r\n        var date = cellData.date || targetStartDate;\r\n        var duration = targetEndDate.getTime() - targetStartDate.getTime();\r\n        if (this._workSpace.keepOriginalHours()) {\r\n            var diff = targetStartDate.getTime() - _date2.default.trimTime(targetStartDate).getTime();\r\n            date = new Date(_date2.default.trimTime(date).getTime() + diff)\r\n        }\r\n        var updatedData = {};\r\n        var allDay = cellData.allDay;\r\n        this.fire(\"setField\", \"allDay\", updatedData, allDay);\r\n        this.fire(\"setField\", \"startDate\", updatedData, date);\r\n        var endDate = new Date(date.getTime() + duration);\r\n        if (this.appointmentTakesAllDay(target) && !updatedData.allDay && this._workSpace.supportAllDayRow()) {\r\n            endDate = this._workSpace.calculateEndDate(date)\r\n        }\r\n        if (targetAllDay && !this._workSpace.supportAllDayRow() && !this._workSpace.keepOriginalHours()) {\r\n            var dateCopy = new Date(date);\r\n            dateCopy.setHours(0);\r\n            endDate = new Date(dateCopy.getTime() + duration);\r\n            if (0 !== endDate.getHours()) {\r\n                endDate.setHours(this._getCurrentViewOption(\"endDayHour\"))\r\n            }\r\n        }\r\n        this.fire(\"setField\", \"endDate\", updatedData, endDate);\r\n        this._resourcesManager.setResourcesToItem(updatedData, cellData.groups);\r\n        return updatedData\r\n    },\r\n    _getCoordinates: function(initialDates, dates, appointmentResources, allDay) {\r\n        var result = [];\r\n        for (var i = 0; i < dates.length; i++) {\r\n            var currentCoords = this._workSpace.getCoordinatesByDateInGroup(dates[i], appointmentResources, allDay);\r\n            for (var j = 0; j < currentCoords.length; j++) {\r\n                (0, _extend.extend)(currentCoords[j], {\r\n                    startDate: dates[i],\r\n                    initialStartDate: initialDates[i]\r\n                })\r\n            }\r\n            result = result.concat(currentCoords)\r\n        }\r\n        return result\r\n    },\r\n    _isAppointmentRecurrence: function(appointmentData) {\r\n        var recurrenceRule = this.fire(\"getField\", \"recurrenceRule\", appointmentData);\r\n        return recurrenceRule && _utils2.default.getRecurrenceRule(recurrenceRule).isValid\r\n    },\r\n    _getSingleAppointmentData: function(appointmentData, options) {\r\n        options = options || {};\r\n        var $appointment = options.$appointment;\r\n        var updatedData = options.skipDateCalculation ? {} : this._getUpdatedData(options);\r\n        var resultAppointmentData = (0, _extend.extend)({}, appointmentData, updatedData);\r\n        var allDay = this.fire(\"getField\", \"allDay\", appointmentData);\r\n        var isAllDay = this._workSpace.supportAllDayRow() && allDay;\r\n        var startDate = new Date(this.fire(\"getField\", \"startDate\", resultAppointmentData));\r\n        var endDate = new Date(this.fire(\"getField\", \"endDate\", resultAppointmentData));\r\n        var appointmentDuration = endDate.getTime() - startDate.getTime();\r\n        var updatedStartDate;\r\n        var appointmentStartDate;\r\n        if (_type2.default.isDefined($appointment) && this._needUpdateAppointmentData($appointment)) {\r\n            var apptDataCalculator = this.getRenderingStrategyInstance().getAppointmentDataCalculator();\r\n            if (_type2.default.isFunction(apptDataCalculator)) {\r\n                updatedStartDate = apptDataCalculator($appointment, startDate).startDate\r\n            } else {\r\n                var coordinates = _translator2.default.locate($appointment);\r\n                updatedStartDate = new Date(this._workSpace.getCellDataByCoordinates(coordinates, isAllDay).startDate);\r\n                if ($appointment.hasClass(\"dx-scheduler-appointment-reduced\")) {\r\n                    appointmentStartDate = $appointment.data(\"dxAppointmentStartDate\");\r\n                    if (appointmentStartDate) {\r\n                        updatedStartDate = appointmentStartDate\r\n                    }\r\n                }\r\n                if (this._isAppointmentRecurrence(appointmentData)) {\r\n                    appointmentStartDate = $appointment.data(\"dxAppointmentSettings\") && $appointment.data(\"dxAppointmentSettings\").startDate;\r\n                    if (appointmentStartDate) {\r\n                        updatedStartDate = appointmentStartDate\r\n                    }\r\n                }\r\n                if (!options.skipHoursProcessing) {\r\n                    this.fire(\"convertDateByTimezoneBack\", updatedStartDate, this.fire(\"getField\", \"startDateTimeZone\", appointmentData))\r\n                }\r\n            }\r\n        }\r\n        if (!updatedStartDate && options.startDate) {\r\n            updatedStartDate = options.startDate\r\n        }\r\n        if (updatedStartDate) {\r\n            this.fire(\"setField\", \"startDate\", resultAppointmentData, updatedStartDate);\r\n            this.fire(\"setField\", \"endDate\", resultAppointmentData, new Date(updatedStartDate.getTime() + appointmentDuration))\r\n        }\r\n        return resultAppointmentData\r\n    },\r\n    _needUpdateAppointmentData: function($appointment) {\r\n        return $appointment.hasClass(\"dx-scheduler-appointment-compact\") || $appointment.hasClass(\"dx-scheduler-appointment-recurrence\")\r\n    },\r\n    _getNormalizedTemplateArgs: function(options) {\r\n        var args = this.callBase(options);\r\n        if (\"targetedAppointmentData\" in options) {\r\n            args.push(options.targetedAppointmentData)\r\n        }\r\n        if (\"currentIndex\" in options) {\r\n            args.push(options.currentIndex)\r\n        }\r\n        return args\r\n    },\r\n    subscribe: function(subject, action) {\r\n        this._subscribes[subject] = _uiScheduler2.default[subject] = action\r\n    },\r\n    fire: function(subject) {\r\n        var callback = this._subscribes[subject];\r\n        var args = Array.prototype.slice.call(arguments);\r\n        if (!_type2.default.isFunction(callback)) {\r\n            throw _ui2.default.Error(\"E1031\", subject)\r\n        }\r\n        return callback.apply(this, args.slice(1))\r\n    },\r\n    getTargetCellData: function() {\r\n        return this._workSpace.getDataByDroppableCell()\r\n    },\r\n    _updateAppointment: function(target, appointment, onUpdatePrevented) {\r\n        var updatingOptions = {\r\n            newData: appointment,\r\n            oldData: (0, _extend.extend)({}, target),\r\n            cancel: false\r\n        };\r\n        var performFailAction = function(err) {\r\n            if (_type2.default.isFunction(onUpdatePrevented)) {\r\n                onUpdatePrevented.call(this)\r\n            }\r\n            if (err && \"Error\" === err.name) {\r\n                throw err\r\n            }\r\n        }.bind(this);\r\n        this._actions.onAppointmentUpdating(updatingOptions);\r\n        this._processActionResult(updatingOptions, function(canceled) {\r\n            if (!canceled) {\r\n                this._expandAllDayPanel(appointment);\r\n                try {\r\n                    this._appointmentModel.update(target, appointment).always(function(e) {\r\n                        this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentUpdated, appointment, e)\r\n                    }.bind(this)).fail(function() {\r\n                        performFailAction()\r\n                    })\r\n                } catch (err) {\r\n                    performFailAction(err)\r\n                }\r\n            } else {\r\n                performFailAction()\r\n            }\r\n        })\r\n    },\r\n    _processActionResult: function(actionOptions, callback) {\r\n        var _this8 = this;\r\n        if (_type2.default.isPromise(actionOptions.cancel)) {\r\n            when(_deferred2.default.fromPromise(actionOptions.cancel)).always(function(cancel) {\r\n                if (!_type2.default.isDefined(cancel)) {\r\n                    cancel = \"rejected\" === actionOptions.cancel.state()\r\n                }\r\n                callback.call(_this8, cancel)\r\n            })\r\n        } else {\r\n            callback.call(this, actionOptions.cancel)\r\n        }\r\n    },\r\n    _expandAllDayPanel: function(appointment) {\r\n        if (!this._isAllDayExpanded(this.getFilteredItems()) && this.appointmentTakesAllDay(appointment)) {\r\n            this._workSpace.option(\"allDayExpanded\", true)\r\n        }\r\n    },\r\n    _executeActionWhenOperationIsCompleted: function(action, appointment, e) {\r\n        var options = {\r\n            appointmentData: appointment\r\n        };\r\n        var isError = e && \"Error\" === e.name;\r\n        if (isError) {\r\n            options.error = e\r\n        } else {\r\n            if (this._popup && this._popup.option(\"visible\")) {\r\n                this._popup.hide()\r\n            }\r\n        }\r\n        action(options);\r\n        this._fireContentReadyAction()\r\n    },\r\n    _showAppointmentPopup: function(data, showButtons, processTimeZone) {\r\n        if (!this._popup) {\r\n            this._createPopup(data, processTimeZone)\r\n        }\r\n        var toolbarItems = [];\r\n        var showCloseButton = true;\r\n        if (!_type2.default.isDefined(showButtons) || showButtons) {\r\n            toolbarItems = this._getPopupToolbarItems();\r\n            showCloseButton = this._popup.initialOption(\"showCloseButton\")\r\n        }\r\n        this._popup.option({\r\n            toolbarItems: toolbarItems,\r\n            showCloseButton: showCloseButton\r\n        });\r\n        if (this._appointmentForm) {\r\n            this._createOrUpdateForm(data, processTimeZone)\r\n        } else {\r\n            this._initDynamicPopupTemplate(data, processTimeZone);\r\n            this._popup.option(this._popupConfig(data))\r\n        }\r\n        this._popup.show()\r\n    },\r\n    getAppointmentPopup: function() {\r\n        return this._popup\r\n    },\r\n    getAppointmentDetailsForm: function() {\r\n        return this._appointmentForm\r\n    },\r\n    getUpdatedAppointment: function() {\r\n        return this._appointmentModel.getUpdatedAppointment()\r\n    },\r\n    getUpdatedAppointmentKeys: function() {\r\n        return this._appointmentModel.getUpdatedAppointmentKeys()\r\n    },\r\n    getAppointmentsInstance: function() {\r\n        return this._appointments\r\n    },\r\n    getResourceManager: function() {\r\n        return this._resourcesManager\r\n    },\r\n    getLayoutManager: function() {\r\n        return this._layoutManager\r\n    },\r\n    getRenderingStrategyInstance: function() {\r\n        return this._layoutManager.getRenderingStrategyInstance()\r\n    },\r\n    getFilteredItems: function() {\r\n        return this._filteredItems\r\n    },\r\n    getActions: function() {\r\n        return this._actions\r\n    },\r\n    appointmentTakesAllDay: function(appointment) {\r\n        return this._appointmentModel.appointmentTakesAllDay(appointment, this._getCurrentViewOption(\"startDayHour\"), this._getCurrentViewOption(\"endDayHour\"))\r\n    },\r\n    _getStartDate: function(appointment, skipNormalize) {\r\n        var startDate = this.fire(\"getField\", \"startDate\", appointment);\r\n        var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointment);\r\n        startDate = _date2.default.makeDate(startDate);\r\n        startDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\r\n        !skipNormalize && this.fire(\"updateAppointmentStartDate\", {\r\n            startDate: startDate,\r\n            appointment: appointment,\r\n            callback: function(result) {\r\n                startDate = result\r\n            }\r\n        });\r\n        return startDate\r\n    },\r\n    _getEndDate: function(appointment, skipNormalize) {\r\n        var endDate = new Date(this.fire(\"getField\", \"endDate\", appointment));\r\n        var startDate = new Date(this.fire(\"getField\", \"startDate\", appointment));\r\n        var isSameDate = _date2.default.sameDate(startDate, endDate);\r\n        if (endDate) {\r\n            var endDateTimeZone = this.fire(\"getField\", \"endDateTimeZone\", appointment);\r\n            endDate = _date2.default.makeDate(endDate);\r\n            endDate = this.fire(\"convertDateByTimezone\", endDate, endDateTimeZone);\r\n            !skipNormalize && this.fire(\"updateAppointmentEndDate\", {\r\n                endDate: endDate,\r\n                isSameDate: isSameDate,\r\n                callback: function(result) {\r\n                    endDate = result\r\n                }\r\n            })\r\n        }\r\n        return endDate\r\n    },\r\n    _getRecurrenceException: function(appointmentData) {\r\n        var recurrenceException = this.fire(\"getField\", \"recurrenceException\", appointmentData);\r\n        if (recurrenceException) {\r\n            var startDate = this.fire(\"getField\", \"startDate\", appointmentData);\r\n            var exceptions = recurrenceException.split(\",\");\r\n            var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointmentData);\r\n            var exceptionByStartDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\r\n            for (var i = 0; i < exceptions.length; i++) {\r\n                exceptions[i] = this._convertRecurrenceException(exceptions[i], exceptionByStartDate, startDateTimeZone)\r\n            }\r\n            recurrenceException = exceptions.join()\r\n        }\r\n        return recurrenceException\r\n    },\r\n    _convertRecurrenceException: function(exception, exceptionByStartDate, startDateTimeZone) {\r\n        exception = exception.replace(/\\s/g, \"\");\r\n        exception = _date_serialization2.default.deserializeDate(exception);\r\n        exception = this.fire(\"convertDateByTimezone\", exception, startDateTimeZone);\r\n        exception.setHours(exceptionByStartDate.getHours());\r\n        exception = _date_serialization2.default.serializeDate(exception, FULL_DATE_FORMAT);\r\n        return exception\r\n    },\r\n    recurrenceEditorVisibilityChanged: function(visible) {\r\n        if (this._appointmentForm) {\r\n            this._appointmentForm.$element().find(\".\" + RECURRENCE_EDITOR_ITEM_CLASS).toggleClass(RECURRENCE_EDITOR_OPENED_ITEM_CLASS, visible)\r\n        }\r\n    },\r\n    resizePopup: function() {\r\n        if (this.getAppointmentPopup()) {\r\n            _dom2.default.triggerResizeEvent(this.getAppointmentPopup().$element())\r\n        }\r\n    },\r\n    dayHasAppointment: function(day, appointment, trimTime) {\r\n        var startDate = new Date(this.fire(\"getField\", \"startDate\", appointment));\r\n        var endDate = new Date(this.fire(\"getField\", \"endDate\", appointment));\r\n        var startDateTimeZone = this.fire(\"getField\", \"startDateTimeZone\", appointment);\r\n        var endDateTimeZone = this.fire(\"getField\", \"endDateTimeZone\", appointment);\r\n        startDate = this.fire(\"convertDateByTimezone\", startDate, startDateTimeZone);\r\n        endDate = this.fire(\"convertDateByTimezone\", endDate, endDateTimeZone);\r\n        if (day.getTime() === endDate.getTime()) {\r\n            return startDate.getTime() === endDate.getTime()\r\n        }\r\n        if (trimTime) {\r\n            day = _date2.default.trimTime(day);\r\n            startDate = _date2.default.trimTime(startDate);\r\n            endDate = _date2.default.trimTime(endDate)\r\n        }\r\n        var dayTimeStamp = day.getTime();\r\n        var startDateTimeStamp = startDate.getTime();\r\n        var endDateTimeStamp = endDate.getTime();\r\n        return (0, _array.inArray)(dayTimeStamp, [startDateTimeStamp, endDateTimeStamp]) > -1 || startDateTimeStamp < dayTimeStamp && endDateTimeStamp > dayTimeStamp\r\n    },\r\n    setTargetedAppointmentResources: function(targetedAppointment, appointmentElement, appointmentIndex) {\r\n        var groups = this._getCurrentViewOption(\"groups\");\r\n        if (groups && groups.length) {\r\n            var resourcesSetter = this._resourcesManager._dataAccessors.setter;\r\n            var workSpace = this._workSpace;\r\n            var getGroups;\r\n            var setResourceCallback;\r\n            if (this._isAgenda()) {\r\n                getGroups = function() {\r\n                    var apptSettings = this.getLayoutManager()._positionMap[appointmentIndex];\r\n                    return workSpace._getCellGroups(apptSettings[0].groupIndex)\r\n                };\r\n                setResourceCallback = function(_, group) {\r\n                    resourcesSetter[group.name](targetedAppointment, group.id)\r\n                }\r\n            } else {\r\n                getGroups = function() {\r\n                    var setting = (0, _renderer2.default)(appointmentElement).data(\"dxAppointmentSettings\") || {};\r\n                    return workSpace.getCellDataByCoordinates({\r\n                        left: setting.left,\r\n                        top: setting.top\r\n                    }).groups\r\n                };\r\n                setResourceCallback = function(field, value) {\r\n                    resourcesSetter[field](targetedAppointment, value)\r\n                }\r\n            }(0, _iterator.each)(getGroups.call(this), setResourceCallback)\r\n        }\r\n    },\r\n    getStartViewDate: function() {\r\n        return this._workSpace.getStartViewDate()\r\n    },\r\n    getEndViewDate: function() {\r\n        return this._workSpace.getEndViewDate()\r\n    },\r\n    showAppointmentPopup: function(appointmentData, createNewAppointment, currentAppointmentData) {\r\n        var singleAppointment = currentAppointmentData || this._getSingleAppointmentData(appointmentData, {\r\n            skipDateCalculation: true\r\n        });\r\n        var startDate = this.fire(\"getField\", \"startDate\", currentAppointmentData || appointmentData);\r\n        this._checkRecurringAppointment(appointmentData, singleAppointment, startDate, function() {\r\n            if (createNewAppointment || _type2.default.isEmptyObject(appointmentData)) {\r\n                delete this._editAppointmentData;\r\n                this._editing.allowAdding && this._showAppointmentPopup(appointmentData, true, false)\r\n            } else {\r\n                this._editAppointmentData = appointmentData;\r\n                this._showAppointmentPopup(appointmentData, this._editing.allowUpdating, true)\r\n            }\r\n        }.bind(this), false, true)\r\n    },\r\n    hideAppointmentPopup: function(saveChanges) {\r\n        if (!this._popup || !this._popup.option(\"visible\")) {\r\n            return\r\n        }\r\n        if (saveChanges) {\r\n            this._saveChanges()\r\n        }\r\n        this._popup.hide()\r\n    },\r\n    showAppointmentTooltip: function(appointmentData, target, currentAppointmentData) {\r\n        if (appointmentData) {\r\n            this.showAppointmentTooltipCore(target, [{\r\n                color: this._appointments._tryGetAppointmentColor(target),\r\n                data: appointmentData,\r\n                currentData: currentAppointmentData\r\n            }], true)\r\n        }\r\n    },\r\n    showAppointmentTooltipCore: function(target, data, isSingleBehavior) {\r\n        this._appointmentTooltip.show(target, data, isSingleBehavior)\r\n    },\r\n    hideAppointmentTooltip: function() {\r\n        this._appointmentTooltip.hide()\r\n    },\r\n    scrollToTime: function(hours, minutes, date) {\r\n        this._workSpace.scrollToTime(hours, minutes, date)\r\n    },\r\n    addAppointment: function(appointment) {\r\n        var text = this.fire(\"getField\", \"text\", appointment);\r\n        if (!text) {\r\n            this.fire(\"setField\", \"text\", appointment, \"\")\r\n        }\r\n        this._convertDatesByTimezoneBack(true, appointment);\r\n        var addingOptions = {\r\n            appointmentData: appointment,\r\n            cancel: false\r\n        };\r\n        this._actions.onAppointmentAdding(addingOptions);\r\n        this._processActionResult(addingOptions, function(canceled) {\r\n            if (!canceled) {\r\n                this._expandAllDayPanel(appointment);\r\n                this._appointmentModel.add(appointment, {\r\n                    value: this._getTimezoneOffsetByOption(),\r\n                    clientOffset: this.fire(\"getClientTimezoneOffset\")\r\n                }).always(function(e) {\r\n                    this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentAdded, appointment, e)\r\n                }.bind(this))\r\n            }\r\n        })\r\n    },\r\n    updateAppointment: function(target, appointment) {\r\n        this._updateAppointment(target, appointment)\r\n    },\r\n    deleteAppointment: function(appointment) {\r\n        var deletingOptions = {\r\n            appointmentData: appointment,\r\n            cancel: false\r\n        };\r\n        this._actions.onAppointmentDeleting(deletingOptions);\r\n        this._processActionResult(deletingOptions, function(canceled) {\r\n            if (!canceled) {\r\n                this._appointmentModel.remove(appointment).always(function(e) {\r\n                    this._executeActionWhenOperationIsCompleted(this._actions.onAppointmentDeleted, appointment, e)\r\n                }.bind(this))\r\n            }\r\n        })\r\n    },\r\n    focus: function() {\r\n        if (this._editAppointmentData) {\r\n            this._appointments.focus()\r\n        } else {\r\n            this._workSpace.focus()\r\n        }\r\n    },\r\n    getFirstDayOfWeek: function() {\r\n        return _type2.default.isDefined(this.option(\"firstDayOfWeek\")) ? this.option(\"firstDayOfWeek\") : _date4.default.firstDayOfWeekIndex()\r\n    }\r\n}).include(_async_template_mixin2.default, _data_helper2.default);\r\n(0, _component_registrator2.default)(\"dxScheduler\", Scheduler);\r\nmodule.exports = Scheduler;\r\n"]},"metadata":{},"sourceType":"script"}