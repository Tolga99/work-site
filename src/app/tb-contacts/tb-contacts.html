<ion-header>
  <ion-toolbar>
    <ion-title class="ion-text-center">{{'myClients' | translate}}</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true" style="overflow-y: auto;">
  <div class="jumbotron text-center" style="padding: 5px;
  margin: 10px;">
    <div class="mat-elevation-z8" style="background-color: white;">
      <dx-data-grid
      id="gridClient"
      [dataSource]="contactsList"
      keyExpr="userId"
      [showBorders]="true"
      [title]="'myClients' | translate"
      (onRowClick)="openContact($event)"
    >
    <dxo-search-panel
    [placeholder]="'search' | translate"
    [visible]="true"
    [highlightCaseSensitive]="false"
    ></dxo-search-panel>
      <dxo-scrolling rowRenderingMode="virtual"> </dxo-scrolling>
      <dxo-paging [pageSize]="10"> </dxo-paging>
      <dxo-pager
        [visible]="true"
        [allowedPageSizes]="allowedPageSizes"
        displayMode="full"
        [showPageSizeSelector]="showPageSizeSelector"
        [showInfo]="showInfo"
        [showNavigationButtons]="showNavButtons"
      >
      </dxo-pager>
      <dxi-column
      dataField="lastName"
      [caption]="'name' | translate"
      cellTemplate="lastNameTemplate"
      >
      </dxi-column>
      <dxi-column
      dataField="firstName"
      [caption]="'fName' | translate"
      >
      </dxi-column>
      <dxi-column
      dataField="address"
      [caption]="'address' | translate"
      >
      </dxi-column>
      <dxi-column
      [caption]="'...'"
      cellTemplate="buttonsTemplate"
      >
    
      </dxi-column>
      <div *dxTemplate="let el of 'lastNameTemplate'">
        {{el.data.lastName.toUpperCase()}}
      </div>
      <div *dxTemplate="let el of 'buttonsTemplate'">
        <button mat-icon-button [matMenuTriggerFor]="menu" (click)="$event.stopPropagation()">
          <mat-icon>toc</mat-icon>
    
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item type="button" (click)="NewWork(el.data)">
            <mat-icon>add_location</mat-icon>
            <span>{{'newWorksite' | translate}}</span>
          </button>
          <button mat-menu-item type="button" (click)="EditContact(el.data)">
            <mat-icon>edit</mat-icon>
            <span>{{'edit' | translate}}</span>
          </button>
          <button mat-menu-item (click)="deleteContact(el.data)" type="button">
            <mat-icon>delete</mat-icon>
            <span>{{'delete' | translate}}</span>
          </button>
        </mat-menu>
      </div>
    </dx-data-grid>
    </div>
    <div class="card text-center">
      <div class="card-footer text-muted">
        <dx-button type="button" class="btn btn-secondary" style="background-color:orange;" icon="fas fa-user-plus" 
        (click)="CreateClient()" [text]="'newClient' | translate"></dx-button>
      </div>
    </div>
  </div>
</ion-content>